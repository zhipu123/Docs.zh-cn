---
uid: web-forms/overview/data-access/enhancing-the-gridview/adding-a-gridview-column-of-radio-buttons-cs
title: "添加单选按钮 (C#) 的 GridView 列 |Microsoft 文档"
author: rick-anderson
description: "本教程讲述如何向用户提供更直观的方式选择的单个行的 GridView 控件添加单选按钮的列..."
ms.author: aspnetcontent
manager: wpickett
ms.date: 03/06/2007
ms.topic: article
ms.assetid: 32377145-ec25-4715-8370-a1c590a331d5
ms.technology: dotnet-webforms
ms.prod: .net-framework
msc.legacyurl: /web-forms/overview/data-access/enhancing-the-gridview/adding-a-gridview-column-of-radio-buttons-cs
msc.type: authoredcontent
ms.openlocfilehash: ba6b163078bbab1bda302676e7e4c8a1d07f3c98
ms.sourcegitcommit: 9a9483aceb34591c97451997036a9120c3fe2baf
ms.translationtype: MT
ms.contentlocale: zh-CN
ms.lasthandoff: 11/10/2017
---
<a name="adding-a-gridview-column-of-radio-buttons-c"></a><span data-ttu-id="220db-103">添加 GridView 列的单选按钮 (C#)</span><span class="sxs-lookup"><span data-stu-id="220db-103">Adding a GridView Column of Radio Buttons (C#)</span></span>
====================
<span data-ttu-id="220db-104">通过[Scott Mitchell](https://twitter.com/ScottOnWriting)</span><span class="sxs-lookup"><span data-stu-id="220db-104">by [Scott Mitchell](https://twitter.com/ScottOnWriting)</span></span>

<span data-ttu-id="220db-105">[下载示例应用程序](http://download.microsoft.com/download/4/a/7/4a7a3b18-d80e-4014-8e53-a6a2427f0d93/ASPNET_Data_Tutorial_51_CS.exe)或[下载 PDF](adding-a-gridview-column-of-radio-buttons-cs/_static/datatutorial51cs1.pdf)</span><span class="sxs-lookup"><span data-stu-id="220db-105">[Download Sample App](http://download.microsoft.com/download/4/a/7/4a7a3b18-d80e-4014-8e53-a6a2427f0d93/ASPNET_Data_Tutorial_51_CS.exe) or [Download PDF](adding-a-gridview-column-of-radio-buttons-cs/_static/datatutorial51cs1.pdf)</span></span>

> <span data-ttu-id="220db-106">本教程讲述如何向用户提供更直观的方式选择的 GridView 单个行的 GridView 控件添加单选按钮的列。</span><span class="sxs-lookup"><span data-stu-id="220db-106">This tutorial looks at how to add a column of radio buttons to a GridView control to provide the user with a more intuitive way of selecting a single row of the GridView.</span></span>


## <a name="introduction"></a><span data-ttu-id="220db-107">介绍</span><span class="sxs-lookup"><span data-stu-id="220db-107">Introduction</span></span>

<span data-ttu-id="220db-108">GridView 控件提供了大量的内置功能。</span><span class="sxs-lookup"><span data-stu-id="220db-108">The GridView control offers a great deal of built-in functionality.</span></span> <span data-ttu-id="220db-109">它包括用于显示文本、 图像、 超链接和按钮的不同字段的数目。</span><span class="sxs-lookup"><span data-stu-id="220db-109">It includes a number of different fields for displaying text, images, hyperlinks, and buttons.</span></span> <span data-ttu-id="220db-110">它支持进一步的自定义的模板。</span><span class="sxs-lookup"><span data-stu-id="220db-110">It supports templates for further customization.</span></span> <span data-ttu-id="220db-111">只需单击几下鼠标，它可能使其中每一行可以选择一个按钮，通过一个 GridView 或启用编辑或删除功能的 s。</span><span class="sxs-lookup"><span data-stu-id="220db-111">With a few clicks of the mouse, it s possible to make a GridView where each row can be selected via a button, or to enable editing or deleting capabilities.</span></span> <span data-ttu-id="220db-112">尽管提供功能的过多，通常会在其中附加，不支持的功能将需要添加的情况。</span><span class="sxs-lookup"><span data-stu-id="220db-112">Despite the plethora of provided features, there will often be situations in which additional, non-supported features will need to be added.</span></span> <span data-ttu-id="220db-113">在本教程下, 一步的两个，我们将查看如何增强以包括其他功能的 GridView 的功能。</span><span class="sxs-lookup"><span data-stu-id="220db-113">In this tutorial and the next two we'll examine how to enhance the GridView s functionality to include additional features.</span></span>

<span data-ttu-id="220db-114">本教程，并且对增强行选择过程的下一个重点关注。</span><span class="sxs-lookup"><span data-stu-id="220db-114">This tutorial and the next one focus on enhancing the row-selection process.</span></span> <span data-ttu-id="220db-115">在检查作为[母版/详细介绍使用详细信息 DetailView 可选择的主 GridView](../masterdetail/master-detail-using-a-selectable-master-gridview-with-a-details-detailview-cs.md)，我们可以将 CommandField 添加到包括选择按钮 GridView。</span><span class="sxs-lookup"><span data-stu-id="220db-115">As examined in the [Master/Detail Using a Selectable Master GridView with a Details DetailView](../masterdetail/master-detail-using-a-selectable-master-gridview-with-a-details-detailview-cs.md), we can add a CommandField to the GridView that includes a Select button.</span></span> <span data-ttu-id="220db-116">单击时，回发时，才会和 GridView 的`SelectedIndex`属性更新为其选择按钮被单击的行的索引。</span><span class="sxs-lookup"><span data-stu-id="220db-116">When clicked, a postback ensues and the GridView s `SelectedIndex` property is updated to the index of the row whose Select button was clicked.</span></span> <span data-ttu-id="220db-117">在[母版/详细介绍使用详细信息 DetailView 可选择的主 GridView](../masterdetail/master-detail-using-a-selectable-master-gridview-with-a-details-detailview-cs.md)教程，我们已了解如何使用此功能以显示所选的 GridView 行的详细信息。</span><span class="sxs-lookup"><span data-stu-id="220db-117">In the [Master/Detail Using a Selectable Master GridView with a Details DetailView](../masterdetail/master-detail-using-a-selectable-master-gridview-with-a-details-detailview-cs.md) tutorial, we saw how to use this feature to display details for the selected GridView row.</span></span>

<span data-ttu-id="220db-118">在选择按钮在许多情况下，它可能不适于以及其他。</span><span class="sxs-lookup"><span data-stu-id="220db-118">While the Select button works in many situations, it may not work as well for others.</span></span> <span data-ttu-id="220db-119">而不是使用一个按钮，两个其他用户界面元素通常用于进行选择： 的单选按钮和复选框。</span><span class="sxs-lookup"><span data-stu-id="220db-119">Rather than using a button, two other user interface elements are commonly used for selection: the radio button and checkbox.</span></span> <span data-ttu-id="220db-120">因此，而不是选择按钮，每一行都包含单选按钮或复选框，我们可以增加 GridView。</span><span class="sxs-lookup"><span data-stu-id="220db-120">We can augment the GridView so that instead of a Select button, each row contains a radio button or checkbox.</span></span> <span data-ttu-id="220db-121">在其中用户可以仅选择其中一个 GridView 记录的情况下，单选按钮可能选择按钮上方首选。</span><span class="sxs-lookup"><span data-stu-id="220db-121">In scenarios where the user can only select one of the GridView records, the radio button might be preferred over the Select button.</span></span> <span data-ttu-id="220db-122">在情况下可能选择用户可以如在基于 web 的电子邮件应用中，用户可能想要选择要删除的复选框的多个消息的其中的多个记录提供不是可从选择按钮或单选按钮的功能用户界面。</span><span class="sxs-lookup"><span data-stu-id="220db-122">In situations where the user can potentially select multiple records such as in a web-based email application, where a user might want to select multiple messages to delete the checkbox offers functionality that is not available from the Select button or radio button user interfaces.</span></span>

<span data-ttu-id="220db-123">本教程讲述如何将单选按钮的列添加到 GridView。</span><span class="sxs-lookup"><span data-stu-id="220db-123">This tutorial looks at how to add a column of radio buttons to the GridView.</span></span> <span data-ttu-id="220db-124">继续本教程将探讨使用复选框。</span><span class="sxs-lookup"><span data-stu-id="220db-124">The proceeding tutorial explores using checkboxes.</span></span>

## <a name="step-1-creating-the-enhancing-the-gridview-web-pages"></a><span data-ttu-id="220db-125">步骤 1： 创建增强 GridView 网页</span><span class="sxs-lookup"><span data-stu-id="220db-125">Step 1: Creating the Enhancing the GridView Web Pages</span></span>

<span data-ttu-id="220db-126">我们开始增强 GridView 可包含的单选按钮列之前，让我们来首先花一些时间，我们需要以及本教程后面的两个网站项目中创建 ASP.NET 页。</span><span class="sxs-lookup"><span data-stu-id="220db-126">Before we start enhancing the GridView to include a column of radio buttons, let s first take a moment to create the ASP.NET pages in our website project that we'll need for this tutorial and the next two.</span></span> <span data-ttu-id="220db-127">首先，通过添加一个名为的新文件夹`EnhancedGridView`。</span><span class="sxs-lookup"><span data-stu-id="220db-127">Start by adding a new folder named `EnhancedGridView`.</span></span> <span data-ttu-id="220db-128">接下来，添加到该文件夹，并确保将每个包含网页相关联的以下 ASP.NET 页面`Site.master`母版页：</span><span class="sxs-lookup"><span data-stu-id="220db-128">Next, add the following ASP.NET pages to that folder, making sure to associate each page with the `Site.master` master page:</span></span>

- `Default.aspx`
- `RadioButtonField.aspx`
- `CheckBoxField.aspx`
- `InsertThroughFooter.aspx`


![SqlDataSource 相关教程添加的 ASP.NET 页面](adding-a-gridview-column-of-radio-buttons-cs/_static/image1.gif)

<span data-ttu-id="220db-130">**图 1**： 添加 ASP.NET 页 SqlDataSource 相关教程</span><span class="sxs-lookup"><span data-stu-id="220db-130">**Figure 1**: Add the ASP.NET Pages for the SqlDataSource-Related Tutorials</span></span>


<span data-ttu-id="220db-131">在其他文件夹中，如`Default.aspx`中`EnhancedGridView`文件夹将在其部分中列出这些教程。</span><span class="sxs-lookup"><span data-stu-id="220db-131">Like in the other folders, `Default.aspx` in the `EnhancedGridView` folder will list the tutorials in its section.</span></span> <span data-ttu-id="220db-132">回想一下，`SectionLevelTutorialListing.ascx`用户控件提供此功能。</span><span class="sxs-lookup"><span data-stu-id="220db-132">Recall that the `SectionLevelTutorialListing.ascx` User Control provides this functionality.</span></span> <span data-ttu-id="220db-133">因此，此用户将控件添加到`Default.aspx`通过从解决方案资源管理器拖到页面上的设计视图拖动。</span><span class="sxs-lookup"><span data-stu-id="220db-133">Therefore, add this User Control to `Default.aspx` by dragging it from the Solution Explorer onto the page s Design view.</span></span>


<span data-ttu-id="220db-134">[![SectionLevelTutorialListing.ascx 用户控件添加到 Default.aspx](adding-a-gridview-column-of-radio-buttons-cs/_static/image2.gif)](adding-a-gridview-column-of-radio-buttons-cs/_static/image1.png)</span><span class="sxs-lookup"><span data-stu-id="220db-134">[![Add the SectionLevelTutorialListing.ascx User Control to Default.aspx](adding-a-gridview-column-of-radio-buttons-cs/_static/image2.gif)](adding-a-gridview-column-of-radio-buttons-cs/_static/image1.png)</span></span>

<span data-ttu-id="220db-135">**图 2**： 添加`SectionLevelTutorialListing.ascx`用户控件`Default.aspx`([单击以查看实际尺寸的图像](adding-a-gridview-column-of-radio-buttons-cs/_static/image2.png))</span><span class="sxs-lookup"><span data-stu-id="220db-135">**Figure 2**: Add the `SectionLevelTutorialListing.ascx` User Control to `Default.aspx` ([Click to view full-size image](adding-a-gridview-column-of-radio-buttons-cs/_static/image2.png))</span></span>


<span data-ttu-id="220db-136">最后，将这些四个页面添加到的条目为`Web.sitemap`文件。</span><span class="sxs-lookup"><span data-stu-id="220db-136">Lastly, add these four pages as entries to the `Web.sitemap` file.</span></span> <span data-ttu-id="220db-137">具体而言，在使用后添加以下标记 SqlDataSource 控件`<siteMapNode>`:</span><span class="sxs-lookup"><span data-stu-id="220db-137">Specifically, add the following markup after the Using the SqlDataSource Control `<siteMapNode>`:</span></span>


[!code-xml[Main](adding-a-gridview-column-of-radio-buttons-cs/samples/sample1.xml)]

<span data-ttu-id="220db-138">在更新后`Web.sitemap`，花些时间查看通过浏览器网站的教程。</span><span class="sxs-lookup"><span data-stu-id="220db-138">After updating `Web.sitemap`, take a moment to view the tutorials website through a browser.</span></span> <span data-ttu-id="220db-139">在左侧菜单现在包括用于编辑、 插入和删除教程的项。</span><span class="sxs-lookup"><span data-stu-id="220db-139">The menu on the left now includes items for the editing, inserting, and deleting tutorials.</span></span>


![站点图现在包括项增强 GridView 教程](adding-a-gridview-column-of-radio-buttons-cs/_static/image3.gif)

<span data-ttu-id="220db-141">**图 3**： 站点图现在包括项增强 GridView 教程</span><span class="sxs-lookup"><span data-stu-id="220db-141">**Figure 3**: The Site Map Now Includes Entries for the Enhancing the GridView Tutorials</span></span>


## <a name="step-2-displaying-the-suppliers-in-a-gridview"></a><span data-ttu-id="220db-142">步骤 2： 在一个 GridView 中显示供应商</span><span class="sxs-lookup"><span data-stu-id="220db-142">Step 2: Displaying the Suppliers in a GridView</span></span>

<span data-ttu-id="220db-143">本教程让 s 生成一个 GridView，其中列出每个提供一个单选按钮的 GridView 行从美国、 供应商。</span><span class="sxs-lookup"><span data-stu-id="220db-143">For this tutorial let s build a GridView that lists the suppliers from the USA, with each GridView row providing a radio button.</span></span> <span data-ttu-id="220db-144">选择通过单选按钮的供应商提供之后, 用户可以通过单击的按钮查看供应商的产品。</span><span class="sxs-lookup"><span data-stu-id="220db-144">After selecting a supplier via the radio button, the user can view the supplier s products by clicking a button.</span></span> <span data-ttu-id="220db-145">虽然此任务听起来可能很普通，有大量的细微的难度特别难的部分。</span><span class="sxs-lookup"><span data-stu-id="220db-145">While this task may sound trivial, there are a number of subtleties that make it particularly tricky.</span></span> <span data-ttu-id="220db-146">我们深入探讨这些细微部分之前，让我们来首先要获取列出供应商 GridView。</span><span class="sxs-lookup"><span data-stu-id="220db-146">Before we delve into these subtleties, let s first get a GridView listing the suppliers.</span></span>

<span data-ttu-id="220db-147">首先打开`RadioButtonField.aspx`页面`EnhancedGridView`通过从工具箱中拖动到设计器中拖动一个 GridView 的文件夹。</span><span class="sxs-lookup"><span data-stu-id="220db-147">Start by opening the `RadioButtonField.aspx` page in the `EnhancedGridView` folder by dragging a GridView from the Toolbox onto the Designer.</span></span> <span data-ttu-id="220db-148">设置 GridView s`ID`到`Suppliers`并从其智能标记上，选择创建新的数据源。</span><span class="sxs-lookup"><span data-stu-id="220db-148">Set the GridView s `ID` to `Suppliers` and, from its smart tag, choose to create a new data source.</span></span> <span data-ttu-id="220db-149">具体而言，创建名为 ObjectDataSource`SuppliersDataSource`拉取从其数据`SuppliersBLL`对象。</span><span class="sxs-lookup"><span data-stu-id="220db-149">Specifically, create an ObjectDataSource named `SuppliersDataSource` that pulls its data from the `SuppliersBLL` object.</span></span>


<span data-ttu-id="220db-150">[![创建名为 SuppliersDataSource 新对象数据源](adding-a-gridview-column-of-radio-buttons-cs/_static/image4.gif)](adding-a-gridview-column-of-radio-buttons-cs/_static/image3.png)</span><span class="sxs-lookup"><span data-stu-id="220db-150">[![Create a New ObjectDataSource Named SuppliersDataSource](adding-a-gridview-column-of-radio-buttons-cs/_static/image4.gif)](adding-a-gridview-column-of-radio-buttons-cs/_static/image3.png)</span></span>

<span data-ttu-id="220db-151">**图 4**： 创建新对象数据源命名`SuppliersDataSource`([单击以查看实际尺寸的图像](adding-a-gridview-column-of-radio-buttons-cs/_static/image4.png))</span><span class="sxs-lookup"><span data-stu-id="220db-151">**Figure 4**: Create a New ObjectDataSource Named `SuppliersDataSource` ([Click to view full-size image](adding-a-gridview-column-of-radio-buttons-cs/_static/image4.png))</span></span>


<span data-ttu-id="220db-152">[![配置对象数据源以使用 SuppliersBLL 类](adding-a-gridview-column-of-radio-buttons-cs/_static/image5.gif)](adding-a-gridview-column-of-radio-buttons-cs/_static/image5.png)</span><span class="sxs-lookup"><span data-stu-id="220db-152">[![Configure the ObjectDataSource to Use the SuppliersBLL Class](adding-a-gridview-column-of-radio-buttons-cs/_static/image5.gif)](adding-a-gridview-column-of-radio-buttons-cs/_static/image5.png)</span></span>

<span data-ttu-id="220db-153">**图 5**： 配置使用 ObjectDataSource`SuppliersBLL`类 ([单击以查看实际尺寸的图像](adding-a-gridview-column-of-radio-buttons-cs/_static/image6.png))</span><span class="sxs-lookup"><span data-stu-id="220db-153">**Figure 5**: Configure the ObjectDataSource to Use the `SuppliersBLL` Class ([Click to view full-size image](adding-a-gridview-column-of-radio-buttons-cs/_static/image6.png))</span></span>


<span data-ttu-id="220db-154">由于我们只想要列出这些供应商在美国，选择`GetSuppliersByCountry(country)`从下拉列表中选择的选项卡上的方法。</span><span class="sxs-lookup"><span data-stu-id="220db-154">Since we only want to list those suppliers in the USA, choose the `GetSuppliersByCountry(country)` method from the drop-down list in the SELECT tab.</span></span>


<span data-ttu-id="220db-155">[![配置对象数据源以使用 SuppliersBLL 类](adding-a-gridview-column-of-radio-buttons-cs/_static/image6.gif)](adding-a-gridview-column-of-radio-buttons-cs/_static/image7.png)</span><span class="sxs-lookup"><span data-stu-id="220db-155">[![Configure the ObjectDataSource to Use the SuppliersBLL Class](adding-a-gridview-column-of-radio-buttons-cs/_static/image6.gif)](adding-a-gridview-column-of-radio-buttons-cs/_static/image7.png)</span></span>

<span data-ttu-id="220db-156">**图 6**： 配置使用 ObjectDataSource`SuppliersBLL`类 ([单击以查看实际尺寸的图像](adding-a-gridview-column-of-radio-buttons-cs/_static/image8.png))</span><span class="sxs-lookup"><span data-stu-id="220db-156">**Figure 6**: Configure the ObjectDataSource to Use the `SuppliersBLL` Class ([Click to view full-size image](adding-a-gridview-column-of-radio-buttons-cs/_static/image8.png))</span></span>


<span data-ttu-id="220db-157">从更新选项卡，选择 （无） 选项，然后单击下一步。</span><span class="sxs-lookup"><span data-stu-id="220db-157">From the UPDATE tab, select the (None) option and click Next.</span></span>


<span data-ttu-id="220db-158">[![配置对象数据源以使用 SuppliersBLL 类](adding-a-gridview-column-of-radio-buttons-cs/_static/image7.gif)](adding-a-gridview-column-of-radio-buttons-cs/_static/image9.png)</span><span class="sxs-lookup"><span data-stu-id="220db-158">[![Configure the ObjectDataSource to Use the SuppliersBLL Class](adding-a-gridview-column-of-radio-buttons-cs/_static/image7.gif)](adding-a-gridview-column-of-radio-buttons-cs/_static/image9.png)</span></span>

<span data-ttu-id="220db-159">**图 7**： 配置使用 ObjectDataSource`SuppliersBLL`类 ([单击以查看实际尺寸的图像](adding-a-gridview-column-of-radio-buttons-cs/_static/image10.png))</span><span class="sxs-lookup"><span data-stu-id="220db-159">**Figure 7**: Configure the ObjectDataSource to Use the `SuppliersBLL` Class ([Click to view full-size image](adding-a-gridview-column-of-radio-buttons-cs/_static/image10.png))</span></span>


<span data-ttu-id="220db-160">由于`GetSuppliersByCountry(country)`方法接受参数，配置数据源向导将提示我们为该参数的源。</span><span class="sxs-lookup"><span data-stu-id="220db-160">Since the `GetSuppliersByCountry(country)` method accepts a parameter, the Configure Data Source wizard prompts us for the source of that parameter.</span></span> <span data-ttu-id="220db-161">若要指定一个硬编码的值 （美国，在此示例中），将源下拉列表设置为 None，在文本框中输入的默认值的参数。</span><span class="sxs-lookup"><span data-stu-id="220db-161">To specify a hard coded value ( USA, in this example), leave the Parameter source drop-down list set to None and enter the default value in the textbox.</span></span> <span data-ttu-id="220db-162">单击完成以完成向导。</span><span class="sxs-lookup"><span data-stu-id="220db-162">Click Finish to complete the wizard.</span></span>


<span data-ttu-id="220db-163">[![用作美国国家/地区参数的默认值](adding-a-gridview-column-of-radio-buttons-cs/_static/image8.gif)](adding-a-gridview-column-of-radio-buttons-cs/_static/image11.png)</span><span class="sxs-lookup"><span data-stu-id="220db-163">[![Use USA as the Default Value for the country Parameter](adding-a-gridview-column-of-radio-buttons-cs/_static/image8.gif)](adding-a-gridview-column-of-radio-buttons-cs/_static/image11.png)</span></span>

<span data-ttu-id="220db-164">**图 8**： 作为的默认值的使用美国`country`参数 ([单击以查看实际尺寸的图像](adding-a-gridview-column-of-radio-buttons-cs/_static/image12.png))</span><span class="sxs-lookup"><span data-stu-id="220db-164">**Figure 8**: Use USA as the Default Value for the `country` Parameter ([Click to view full-size image](adding-a-gridview-column-of-radio-buttons-cs/_static/image12.png))</span></span>


<span data-ttu-id="220db-165">完成向导后，GridView 将为每个供应商数据字段包括 BoundField。</span><span class="sxs-lookup"><span data-stu-id="220db-165">After completing the wizard, the GridView will include a BoundField for each of the supplier data fields.</span></span> <span data-ttu-id="220db-166">删除所有但`CompanyName`， `City`，和`Country`BoundFields，并重命名`CompanyName`BoundFields`HeaderText`到供应商的属性。</span><span class="sxs-lookup"><span data-stu-id="220db-166">Remove all but the `CompanyName`, `City`, and `Country` BoundFields, and rename the `CompanyName` BoundFields `HeaderText` property to Supplier.</span></span> <span data-ttu-id="220db-167">这么做，应该类似于以下的 GridView 和对象数据源的声明性语法。</span><span class="sxs-lookup"><span data-stu-id="220db-167">After doing so, the GridView and ObjectDataSource declarative syntax should look similar to the following.</span></span>


[!code-aspx[Main](adding-a-gridview-column-of-radio-buttons-cs/samples/sample2.aspx)]

<span data-ttu-id="220db-168">对于本教程，让我们来允许用户查看所选供应商的产品供应商列表中，位于同一页上或另一页上。</span><span class="sxs-lookup"><span data-stu-id="220db-168">For this tutorial, let s allow the user to view the selected supplier s products on the same page as the supplier list, or on a different page.</span></span> <span data-ttu-id="220db-169">为了适应这种情况，请向页面添加两个按钮 Web 控件。</span><span class="sxs-lookup"><span data-stu-id="220db-169">To accommodate this, add two Button Web controls to the page.</span></span> <span data-ttu-id="220db-170">我已集`ID`到这两个按钮的 s`ListProducts`和`SendToProducts`的想法，当`ListProducts`单击回发将发生，并且将在同一页上，而是何时列出所选供应商的产品`SendToProducts`单击后，用户将 whisked 到的另一个页面中列出的产品。</span><span class="sxs-lookup"><span data-stu-id="220db-170">I ve set the `ID` s of these two Buttons to `ListProducts` and `SendToProducts`, with the idea that when `ListProducts` is clicked a postback will occur and the selected supplier s products will be listed on the same page, but when `SendToProducts` is clicked, the user will be whisked to a another page that lists the products.</span></span>

<span data-ttu-id="220db-171">图 9 显示`Suppliers`GridView 和两个按钮 Web 控制通过浏览器查看时。</span><span class="sxs-lookup"><span data-stu-id="220db-171">Figure 9 shows the `Suppliers` GridView and the two Button Web controls when viewed through a browser.</span></span>


<span data-ttu-id="220db-172">[![从美国这些供应商具有其名称、 城市和列出的国家/地区信息](adding-a-gridview-column-of-radio-buttons-cs/_static/image9.gif)](adding-a-gridview-column-of-radio-buttons-cs/_static/image13.png)</span><span class="sxs-lookup"><span data-stu-id="220db-172">[![Those Suppliers from the USA Have Their Name, City, and Country Information Listed](adding-a-gridview-column-of-radio-buttons-cs/_static/image9.gif)](adding-a-gridview-column-of-radio-buttons-cs/_static/image13.png)</span></span>

<span data-ttu-id="220db-173">**图 9**： 那些供应商的美国具有与其名称、 市和列出国家/地区信息 ([单击以查看实际尺寸的图像](adding-a-gridview-column-of-radio-buttons-cs/_static/image14.png))</span><span class="sxs-lookup"><span data-stu-id="220db-173">**Figure 9**: Those Suppliers from the USA Have Their Name, City, and Country Information Listed ([Click to view full-size image](adding-a-gridview-column-of-radio-buttons-cs/_static/image14.png))</span></span>


## <a name="step-3-adding-a-column-of-radio-buttons"></a><span data-ttu-id="220db-174">步骤 3： 添加单选按钮的列</span><span class="sxs-lookup"><span data-stu-id="220db-174">Step 3: Adding a Column of Radio Buttons</span></span>

<span data-ttu-id="220db-175">此时`Suppliers`GridView 具有三个 BoundFields 美国显示公司名称、 城市和每个供应商的国家/地区。</span><span class="sxs-lookup"><span data-stu-id="220db-175">At this point the `Suppliers` GridView has three BoundFields displaying the company name, city, and country of each supplier in the USA.</span></span> <span data-ttu-id="220db-176">它仍但是缺少单选按钮的列。</span><span class="sxs-lookup"><span data-stu-id="220db-176">It is still lacking a column of radio buttons, however.</span></span> <span data-ttu-id="220db-177">遗憾的是，GridView 不包括内置 RadioButtonField，否则为我们无法只需将它添加到网格和完成。</span><span class="sxs-lookup"><span data-stu-id="220db-177">Unfortunately, the GridView doesn t include a built-in RadioButtonField, otherwise we could just add that to the grid and be done.</span></span> <span data-ttu-id="220db-178">相反，我们可以添加为 TemplateField 和配置其`ItemTemplate`呈现单选按钮，从而导致每个 GridView 行的单选按钮。</span><span class="sxs-lookup"><span data-stu-id="220db-178">Instead, we can add a TemplateField and configure its `ItemTemplate` to render a radio button, resulting in a radio button for each GridView row.</span></span>

<span data-ttu-id="220db-179">最初，我们可能会假定是否可以通过添加单选按钮 Web 控件与实现所需的用户界面`ItemTemplate`TemplateField。</span><span class="sxs-lookup"><span data-stu-id="220db-179">Initially, we might assume that the desired user interface can be implemented by adding a RadioButton Web control to the `ItemTemplate` of a TemplateField.</span></span> <span data-ttu-id="220db-180">虽然这确实会将单个单选按钮添加到的 GridView 每一行，单选按钮不能进行组合，因此不互相排斥。</span><span class="sxs-lookup"><span data-stu-id="220db-180">While this will indeed add a single radio button to each row of the GridView, the radio buttons cannot be grouped and therefore are not mutually exclusive.</span></span> <span data-ttu-id="220db-181">即，最终用户是能够从 GridView 同时选择多个单选按钮。</span><span class="sxs-lookup"><span data-stu-id="220db-181">That is, an end user is able to select multiple radio buttons simultaneously from the GridView.</span></span>

<span data-ttu-id="220db-182">即使使用的单选按钮 Web 控件 TemplateField 不提供，我们需要的功能，让 s 实现此方法，因为它 s 值得检查生成的单选按钮未分组的原因。</span><span class="sxs-lookup"><span data-stu-id="220db-182">Even though using a TemplateField of RadioButton Web controls does not offer the functionality we need, let s implement this approach, as it s worthwhile to examine why the resulting radio buttons are not grouped.</span></span> <span data-ttu-id="220db-183">首先，通过添加为 TemplateField 到供应商 GridView，使其最左边的字段。</span><span class="sxs-lookup"><span data-stu-id="220db-183">Start by adding a TemplateField to the Suppliers GridView, making it the leftmost field.</span></span> <span data-ttu-id="220db-184">接下来，从 GridView s 智能标记中，单击编辑模板链接并将单选按钮 Web 控件从工具箱拖到 TemplateField 的`ItemTemplate`（请参阅图 10）。</span><span class="sxs-lookup"><span data-stu-id="220db-184">Next, from the GridView s smart tag, click the Edit Templates link and drag a RadioButton Web control from the Toolbox into the TemplateField s `ItemTemplate` (see Figure 10).</span></span> <span data-ttu-id="220db-185">设置 RadioButton s`ID`属性`RowSelector`和`GroupName`属性`SuppliersGroup`。</span><span class="sxs-lookup"><span data-stu-id="220db-185">Set the RadioButton s `ID` property to `RowSelector` and the `GroupName` property to `SuppliersGroup`.</span></span>


<span data-ttu-id="220db-186">[![将单选按钮 Web 控件添加到 ItemTemplate](adding-a-gridview-column-of-radio-buttons-cs/_static/image10.gif)](adding-a-gridview-column-of-radio-buttons-cs/_static/image15.png)</span><span class="sxs-lookup"><span data-stu-id="220db-186">[![Add a RadioButton Web Control to the ItemTemplate](adding-a-gridview-column-of-radio-buttons-cs/_static/image10.gif)](adding-a-gridview-column-of-radio-buttons-cs/_static/image15.png)</span></span>

<span data-ttu-id="220db-187">**图 10**： 添加单选按钮 Web 控件与`ItemTemplate`([单击以查看实际尺寸的图像](adding-a-gridview-column-of-radio-buttons-cs/_static/image16.png))</span><span class="sxs-lookup"><span data-stu-id="220db-187">**Figure 10**: Add a RadioButton Web Control to the `ItemTemplate` ([Click to view full-size image](adding-a-gridview-column-of-radio-buttons-cs/_static/image16.png))</span></span>


<span data-ttu-id="220db-188">进行这些添加通过设计器之后, 你 GridView 的标记应如下类似如下：</span><span class="sxs-lookup"><span data-stu-id="220db-188">After making these additions through the Designer, your GridView s markup should look similar to the following:</span></span>


[!code-aspx[Main](adding-a-gridview-column-of-radio-buttons-cs/samples/sample3.aspx)]

<span data-ttu-id="220db-189">单选按钮 s [ `GroupName`属性](https://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.radiobutton.groupname(VS.80).aspx)用于组单选按钮的一系列内容。</span><span class="sxs-lookup"><span data-stu-id="220db-189">The RadioButton s [`GroupName` property](https://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.radiobutton.groupname(VS.80).aspx) is what is used to group a series of radio buttons.</span></span> <span data-ttu-id="220db-190">具有相同的所有单选按钮控件`GroupName`值被视为分组; 只有一个单选按钮可以一次选择从组。</span><span class="sxs-lookup"><span data-stu-id="220db-190">All RadioButton controls with the same `GroupName` value are considered grouped; only one radio button can be selected from a group at a time.</span></span> <span data-ttu-id="220db-191">`GroupName`属性指定的值呈现的单选按钮的`name`属性。</span><span class="sxs-lookup"><span data-stu-id="220db-191">The `GroupName` property specifies the value for the rendered radio button s `name` attribute.</span></span> <span data-ttu-id="220db-192">浏览器检查的单选按钮`name`属性以确定单选按钮分组。</span><span class="sxs-lookup"><span data-stu-id="220db-192">The browser examines the radio buttons `name` attributes to determine the radio button groupings.</span></span>

<span data-ttu-id="220db-193">与 RadioButton Web 控件添加到`ItemTemplate`，访问此页面，通过浏览器，然后单击网格的行中的单选按钮。</span><span class="sxs-lookup"><span data-stu-id="220db-193">With the RadioButton Web control added to the `ItemTemplate`, visit this page through a browser and click on the radio buttons in the grid s rows.</span></span> <span data-ttu-id="220db-194">请注意如何未分组的单选按钮，因而可能选择的所有行，作为图 11 显示。</span><span class="sxs-lookup"><span data-stu-id="220db-194">Notice how the radio buttons are not grouped, making it possible to select all of the rows, as Figure 11 shows.</span></span>


<span data-ttu-id="220db-195">[![GridView 的单选按钮是不分组在一起](adding-a-gridview-column-of-radio-buttons-cs/_static/image11.gif)](adding-a-gridview-column-of-radio-buttons-cs/_static/image17.png)</span><span class="sxs-lookup"><span data-stu-id="220db-195">[![The GridView s Radio Buttons are Not Grouped](adding-a-gridview-column-of-radio-buttons-cs/_static/image11.gif)](adding-a-gridview-column-of-radio-buttons-cs/_static/image17.png)</span></span>

<span data-ttu-id="220db-196">**图 11**: GridView 的单选按钮是不分组在一起 ([单击以查看实际尺寸的图像](adding-a-gridview-column-of-radio-buttons-cs/_static/image18.png))</span><span class="sxs-lookup"><span data-stu-id="220db-196">**Figure 11**: The GridView s Radio Buttons are Not Grouped ([Click to view full-size image](adding-a-gridview-column-of-radio-buttons-cs/_static/image18.png))</span></span>


<span data-ttu-id="220db-197">未分组的单选按钮的原因是因为其呈现`name`特性都相同，尽管具有相同`GroupName`属性设置。</span><span class="sxs-lookup"><span data-stu-id="220db-197">The reason the radio buttons are not grouped is because their rendered `name` attributes are different, despite having the same `GroupName` property setting.</span></span> <span data-ttu-id="220db-198">若要查看这些差异，请查看/源执行从浏览器并检查单选按钮标记：</span><span class="sxs-lookup"><span data-stu-id="220db-198">To see these differences, do a View/Source from the browser and examine the radio button markup:</span></span>


[!code-html[Main](adding-a-gridview-column-of-radio-buttons-cs/samples/sample4.html)]

<span data-ttu-id="220db-199">请注意这两种`name`和`id`属性不是在属性窗口中，指定精确值，但前面带有数目的其他`ID`值。</span><span class="sxs-lookup"><span data-stu-id="220db-199">Notice how both the `name` and `id` attributes are not the exact values as specified in the Properties window, but are prepended with a number of other `ID` values.</span></span> <span data-ttu-id="220db-200">其他`ID`值添加到前面的呈现`id`和`name`属性是`ID`s 单选按钮父控件`GridViewRow`s `ID` s、 GridView 的`ID`，内容控件 s `ID`，和 Web 窗体的`ID`。</span><span class="sxs-lookup"><span data-stu-id="220db-200">The additional `ID` values added to the front of the rendered `id` and `name` attributes are the `ID` s of the radio buttons parent controls the `GridViewRow` s `ID` s, the GridView s `ID`, the Content control s `ID`, and the Web Form s `ID`.</span></span> <span data-ttu-id="220db-201">这些`ID`s 将添加，以便每个呈现在 GridView Web 控件具有一个唯一`id`和`name`值。</span><span class="sxs-lookup"><span data-stu-id="220db-201">These `ID` s are added so that each rendered Web control in the GridView has a unique `id` and `name` values.</span></span>

<span data-ttu-id="220db-202">每个呈现控制需求不同`name`和`id`因为这是如何浏览器唯一标识客户端和如何它标识为 web 服务器的操作的每个控件或在回发时已发生更改。</span><span class="sxs-lookup"><span data-stu-id="220db-202">Each rendered control needs a different `name` and `id` because this is how the browser uniquely identifies each control on the client-side and how it identifies to the web server what action or change has occurred on postback.</span></span> <span data-ttu-id="220db-203">例如，假设我们想要每次 RadioButton s 签状态发生了更改时运行某些服务器端代码。</span><span class="sxs-lookup"><span data-stu-id="220db-203">For example, imagine that we wanted to run some server-side code whenever a RadioButton s checked state was changed.</span></span> <span data-ttu-id="220db-204">我们无法完成此操作通过设置 RadioButton s`AutoPostBack`属性`true`和创建的事件处理程序`CheckChanged`事件。</span><span class="sxs-lookup"><span data-stu-id="220db-204">We could accomplish this by setting the RadioButton s `AutoPostBack` property to `true` and creating an event handler for the `CheckChanged` event.</span></span> <span data-ttu-id="220db-205">但是，如果呈现`name`和`id`的所有单选按钮相同的在回发我们无法确定哪些特定值的单选按钮被单击。</span><span class="sxs-lookup"><span data-stu-id="220db-205">However, if the rendered `name` and `id` values for all of the radio buttons were the same, on postback we could not determine what specific RadioButton was clicked.</span></span>

<span data-ttu-id="220db-206">它的短是我们无法在使用单选按钮 Web 控件 GridView 中创建的单选按钮的列。</span><span class="sxs-lookup"><span data-stu-id="220db-206">The short of it is that we cannot create a column of radio buttons in a GridView using the RadioButton Web control.</span></span> <span data-ttu-id="220db-207">相反，我们必须使用而是陈旧的技术以确保每个 GridView 行注入相应的标记。</span><span class="sxs-lookup"><span data-stu-id="220db-207">Instead, we must use rather archaic techniques to ensure that the appropriate markup is injected into each GridView row.</span></span>

> [!NOTE]
> <span data-ttu-id="220db-208">像 RadioButton Web 控件，单选按钮 HTML 控件时添加到模板，将包括唯一`name`属性，在未分组的网格中进行的单选按钮。</span><span class="sxs-lookup"><span data-stu-id="220db-208">Like the RadioButton Web control, the radio button HTML control, when added to a template, will include the unique `name` attribute, making the radio buttons in the grid ungrouped.</span></span> <span data-ttu-id="220db-209">如果你不熟悉 HTML 控件，随意地忽略此说明，如 HTML 控件很少使用，特别是在 ASP.NET 2.0。</span><span class="sxs-lookup"><span data-stu-id="220db-209">If you are not familiar with HTML controls, feel free to disregard this note, as HTML controls are rarely used, especially in ASP.NET 2.0.</span></span> <span data-ttu-id="220db-210">但如果你有兴趣了解详细信息，请参阅[k。 Scott Allen](http://odetocode.com/blogs/scott/default.aspx) s 博客文章[Web 控件和 HTML 控件](http://www.odetocode.com/Articles/348.aspx)。</span><span class="sxs-lookup"><span data-stu-id="220db-210">But if you are interested in learning more, see [K. Scott Allen](http://odetocode.com/blogs/scott/default.aspx) s blog entry [Web Controls and HTML Controls](http://www.odetocode.com/Articles/348.aspx).</span></span>


## <a name="using-a-literal-control-to-inject-radio-button-markup"></a><span data-ttu-id="220db-211">使用文本控件将注入单选按钮标记</span><span class="sxs-lookup"><span data-stu-id="220db-211">Using a Literal Control to Inject Radio Button Markup</span></span>

<span data-ttu-id="220db-212">为了正确组所有 GridView 内单选按钮，我们需要手动将注入到的单选按钮标记`ItemTemplate`。</span><span class="sxs-lookup"><span data-stu-id="220db-212">In order to correctly group all of the radio buttons within the GridView, we need to manually inject the radio buttons markup into the `ItemTemplate`.</span></span> <span data-ttu-id="220db-213">每个单选按钮需要相同`name`属性，但应具有唯一`id`属性 （如果我们想要访问通过客户端脚本的单选按钮）。</span><span class="sxs-lookup"><span data-stu-id="220db-213">Each radio button needs the same `name` attribute, but should have a unique `id` attribute (in case we want to access a radio button via client-side script).</span></span> <span data-ttu-id="220db-214">用户选择一个单选按钮和页回发后，浏览器将返回的值发送选定的单选按钮的`value`属性。</span><span class="sxs-lookup"><span data-stu-id="220db-214">After a user selects a radio button and posts back the page, the browser will send back the value of the selected radio button s `value` attribute.</span></span> <span data-ttu-id="220db-215">因此，每个单选按钮将需要一个唯一`value`属性。</span><span class="sxs-lookup"><span data-stu-id="220db-215">Therefore, each radio button will need a unique `value` attribute.</span></span> <span data-ttu-id="220db-216">最后，在回发时我们需要确保将添加`checked`属性与后选中了，否则用户所做选择和文章返回一个单选按钮，单选按钮将返回到其默认状态 （所有未选定）。</span><span class="sxs-lookup"><span data-stu-id="220db-216">Finally, on postback we need to make sure to add the `checked` attribute to the one radio button that is selected, otherwise after the user makes a selection and posts back, the radio buttons will return to their default state (all unselected).</span></span>

<span data-ttu-id="220db-217">有两种方法可以执行以便将低级别的标记注入到模板。</span><span class="sxs-lookup"><span data-stu-id="220db-217">There are two approaches that can be taken in order to inject low-level markup into a template.</span></span> <span data-ttu-id="220db-218">之一是执行标记和为格式化方法的代码隐藏类中定义的调用的组合。</span><span class="sxs-lookup"><span data-stu-id="220db-218">One is to do a mix of markup and calls to formatting methods defined in the code-behind class.</span></span> <span data-ttu-id="220db-219">此方法首先中所述[GridView 控件中使用 TemplateFields](../custom-formatting/using-templatefields-in-the-gridview-control-cs.md)教程。</span><span class="sxs-lookup"><span data-stu-id="220db-219">This technique was first discussed in the [Using TemplateFields in the GridView Control](../custom-formatting/using-templatefields-in-the-gridview-control-cs.md) tutorial.</span></span> <span data-ttu-id="220db-220">在我们的示例中，它可能如下所示：</span><span class="sxs-lookup"><span data-stu-id="220db-220">In our case it might look something like:</span></span>


[!code-aspx[Main](adding-a-gridview-column-of-radio-buttons-cs/samples/sample5.aspx)]

<span data-ttu-id="220db-221">在这里，`GetUniqueRadioButton`和`GetRadioButtonValue`将返回相应的代码隐藏类中定义的方法`id`和`value`属性值为每个单选按钮。</span><span class="sxs-lookup"><span data-stu-id="220db-221">Here, `GetUniqueRadioButton` and `GetRadioButtonValue` would be methods defined in the code-behind class that returned the appropriate `id` and `value` attribute values for each radio button.</span></span> <span data-ttu-id="220db-222">此方法非常适用于分配`id`和`value`属性，但会短时无需指定`checked`属性值，因为数据绑定语法仅执行时数据首先绑定到 GridView。</span><span class="sxs-lookup"><span data-stu-id="220db-222">This approach works well for assigning the `id` and `value` attributes, but falls short when needing to specify the `checked` attribute value because the databinding syntax is only executed when data is first bound to the GridView.</span></span> <span data-ttu-id="220db-223">因此，如果 GridView 具有启用视图状态，格式设置方法，将仅时，会激发首次加载页 （或当 GridView 显式重新绑定到数据源），因此该设置的函数`checked`上调用获胜 t 的属性回发。</span><span class="sxs-lookup"><span data-stu-id="220db-223">Therefore, if the GridView has view state enabled, the formatting methods will only fire when the page is first loaded (or when the GridView is explicitly rebound to the data source), and therefore the function that sets the `checked` attribute won t be called on postback.</span></span> <span data-ttu-id="220db-224">它 s 而是细微问题和有点超出了本文中，因此，我将按此保留的范围。</span><span class="sxs-lookup"><span data-stu-id="220db-224">It s a rather subtle problem and a bit beyond the scope of this article, so I'll leave it at this.</span></span> <span data-ttu-id="220db-225">我做、 但是，建议你尝试使用上面的方法和一同通过它在其中你将遇到困难的点。</span><span class="sxs-lookup"><span data-stu-id="220db-225">I do, however, encourage you to try using the above approach and work it through to the point where you'll get stuck.</span></span> <span data-ttu-id="220db-226">尽管此类练习获胜不能获得您任何仔细的可行版本，它将帮助培养 GridView 和数据绑定生命周期的更深入地了解。</span><span class="sxs-lookup"><span data-stu-id="220db-226">While such an exercise won t get you any closer to a working version, it will help foster a deeper understanding of the GridView and the databinding lifecycle.</span></span>

<span data-ttu-id="220db-227">注入自定义其他方法，模板和我们将使用本教程中的方法中的低级标记是添加[文本控件](https://msdn.microsoft.com/en-us/library/sz4949ks(VS.80).aspx)到模板。</span><span class="sxs-lookup"><span data-stu-id="220db-227">The other approach to injecting custom, low-level markup in a template and the approach that we'll be using for this tutorial is to add a [Literal control](https://msdn.microsoft.com/en-us/library/sz4949ks(VS.80).aspx) to the template.</span></span> <span data-ttu-id="220db-228">然后，在 GridView s`RowCreated`或`RowDataBound`事件处理程序，可以以编程方式访问文本控件并将其`Text`属性设置为标记发出。</span><span class="sxs-lookup"><span data-stu-id="220db-228">Then, in the GridView s `RowCreated` or `RowDataBound` event handler, the Literal control can be programmatically accessed and its `Text` property set to the markup to emit.</span></span>

<span data-ttu-id="220db-229">通过从 TemplateField s 删除单选按钮来启动`ItemTemplate`，替换文本控件。</span><span class="sxs-lookup"><span data-stu-id="220db-229">Start by removing the RadioButton from the TemplateField s `ItemTemplate`, replacing it with a Literal control.</span></span> <span data-ttu-id="220db-230">设置的文本控件，s`ID`到`RadioButtonMarkup`。</span><span class="sxs-lookup"><span data-stu-id="220db-230">Set the Literal control s `ID` to `RadioButtonMarkup`.</span></span>


<span data-ttu-id="220db-231">[![将文本控件添加到 ItemTemplate](adding-a-gridview-column-of-radio-buttons-cs/_static/image12.gif)](adding-a-gridview-column-of-radio-buttons-cs/_static/image19.png)</span><span class="sxs-lookup"><span data-stu-id="220db-231">[![Add a Literal Control to the ItemTemplate](adding-a-gridview-column-of-radio-buttons-cs/_static/image12.gif)](adding-a-gridview-column-of-radio-buttons-cs/_static/image19.png)</span></span>

<span data-ttu-id="220db-232">**图 12**: 文本将控件添加到`ItemTemplate`([单击以查看实际尺寸的图像](adding-a-gridview-column-of-radio-buttons-cs/_static/image20.png))</span><span class="sxs-lookup"><span data-stu-id="220db-232">**Figure 12**: Add a Literal Control to the `ItemTemplate` ([Click to view full-size image](adding-a-gridview-column-of-radio-buttons-cs/_static/image20.png))</span></span>


<span data-ttu-id="220db-233">接下来，创建的事件处理程序 GridView 的`RowCreated`事件。</span><span class="sxs-lookup"><span data-stu-id="220db-233">Next, create an event handler for the GridView s `RowCreated` event.</span></span> <span data-ttu-id="220db-234">`RowCreated`后对于每个添加的行，无论数据正在重新绑定到 GridView，事件将激发。</span><span class="sxs-lookup"><span data-stu-id="220db-234">The `RowCreated` event fires once for every row added, whether or not the data is being rebound to the GridView.</span></span> <span data-ttu-id="220db-235">这意味着，即使在回发时重新从视图状态加载数据，`RowCreated`仍激发事件，这是我们将使用它而不是原因`RowDataBound`（其中激发仅当数据显式绑定到 Web 控件的数据）。</span><span class="sxs-lookup"><span data-stu-id="220db-235">That means that even on a postback when the data is reloaded from view state, the `RowCreated` event still fires and this is the reason we are using it instead of `RowDataBound` (which fires only when the data is explicitly bound to the data Web control).</span></span>

<span data-ttu-id="220db-236">在此事件处理程序中，我们只希望的情况下继续我们重新处理数据行。</span><span class="sxs-lookup"><span data-stu-id="220db-236">In this event handler, we only want to proceed if we re dealing with a data row.</span></span> <span data-ttu-id="220db-237">我们想要以编程方式引用每个数据行`RadioButtonMarkup`文本控件并设置其`Text`到要发出的标记的属性。</span><span class="sxs-lookup"><span data-stu-id="220db-237">For each data row we want to programmatically reference the `RadioButtonMarkup` Literal control and set its `Text` property to the markup to emit.</span></span> <span data-ttu-id="220db-238">如下面的代码所示，发出的标记创建单选按钮其`name`属性设置为`SuppliersGroup`、 其`id`属性设置为`RowSelectorX`，其中*X*是 GridView 行的索引并且其`value`属性设置为 GridView 行的索引。</span><span class="sxs-lookup"><span data-stu-id="220db-238">As the following code shows, the markup emitted creates a radio button whose `name` attribute is set to `SuppliersGroup`, whose `id` attribute is set to `RowSelectorX`, where *X* is the index of the GridView row, and whose `value` attribute is set to the index of the GridView row.</span></span>


[!code-csharp[Main](adding-a-gridview-column-of-radio-buttons-cs/samples/sample6.cs)]

<span data-ttu-id="220db-239">当选择某个 GridView 行且回发发生时，我们感兴趣`SupplierID`的所选供应商。</span><span class="sxs-lookup"><span data-stu-id="220db-239">When a GridView row is selected and a postback occurs, we are interested in the `SupplierID` of the selected supplier.</span></span> <span data-ttu-id="220db-240">因此，有人可能认为每个单选按钮的值应为实际`SupplierID`（而不是 GridView 行的索引）。</span><span class="sxs-lookup"><span data-stu-id="220db-240">Therefore, one might think that the value of each radio button should be the actual `SupplierID` (rather than the index of the GridView row).</span></span> <span data-ttu-id="220db-241">虽然这在某些情况下，它将会带来安全风险盲目地接受并处理`SupplierID`。</span><span class="sxs-lookup"><span data-stu-id="220db-241">While this may work in certain circumstances, it would be a security risk to blindly accept and process a `SupplierID`.</span></span> <span data-ttu-id="220db-242">我们 GridView，例如，列出了仅在美国这些供应商。</span><span class="sxs-lookup"><span data-stu-id="220db-242">Our GridView, for example, lists only those suppliers in the USA.</span></span> <span data-ttu-id="220db-243">但是，如果`SupplierID`直接从单选按钮的新增功能，若要停止有害用户从操作传递`SupplierID`发送开机回发值？</span><span class="sxs-lookup"><span data-stu-id="220db-243">However, if the `SupplierID` is passed directly from the radio button, what s to stop a mischievous user from manipulating the `SupplierID` value sent back on postback?</span></span> <span data-ttu-id="220db-244">通过使用作为的行索引`value`，，然后获取`SupplierID`在回发时从`DataKeys`集合中，我们可以确保用户仅使用其中一个`SupplierID`与 GridView 行之一相关联的值。</span><span class="sxs-lookup"><span data-stu-id="220db-244">By using the row index as the `value`, and then getting the `SupplierID` on postback from the `DataKeys` collection, we can ensure that the user is only using one of the `SupplierID` values associated with one of the GridView rows.</span></span>

<span data-ttu-id="220db-245">添加此事件处理程序代码后，花点时间查看浏览器中测试。</span><span class="sxs-lookup"><span data-stu-id="220db-245">After adding this event handler code, take a minute to test out the page in a browser.</span></span> <span data-ttu-id="220db-246">首先，请注意，只有一个单选按钮在网格中的可以一次选择。</span><span class="sxs-lookup"><span data-stu-id="220db-246">First, note that only one radio button in the grid can be selected at a time.</span></span> <span data-ttu-id="220db-247">但是，当选择一个单选按钮，然后单击一个按钮，产生的回发，并且所有的单选按钮恢复为其初始状态 （即，在回发时，选定的单选按钮不再处于选中状态）。</span><span class="sxs-lookup"><span data-stu-id="220db-247">However, when selecting a radio button and clicking one of the buttons, a postback occurs and the radio buttons all revert to their initial state (that is, on postback, the selected radio button is no longer selected).</span></span> <span data-ttu-id="220db-248">若要解决此问题，我们需要增加`RowCreated`事件处理程序，以便它检查发送的回发的所选的单选按钮索引添加`checked="checked"`属性设为发出的行索引匹配项的标记。</span><span class="sxs-lookup"><span data-stu-id="220db-248">To fix this, we need to augment the `RowCreated` event handler so that it inspects the selected radio button index sent from the postback and adds the `checked="checked"` attribute to the emitted markup of the row index matches.</span></span>

<span data-ttu-id="220db-249">当发生回发时，浏览器发送回`name`和`value`的选定的单选按钮。</span><span class="sxs-lookup"><span data-stu-id="220db-249">When a postback occurs, the browser sends back the `name` and `value` of the selected radio button.</span></span> <span data-ttu-id="220db-250">检索此值，可以以编程方式使用`Request.Form["name"]`。</span><span class="sxs-lookup"><span data-stu-id="220db-250">The value can be programmatically retrieved using `Request.Form["name"]`.</span></span> <span data-ttu-id="220db-251">[ `Request.Form`属性](https://msdn.microsoft.com/en-us/library/system.web.httprequest.form.aspx)提供[ `NameValueCollection` ](https://msdn.microsoft.com/en-us/library/system.collections.specialized.namevaluecollection.aspx)表示窗体变量。</span><span class="sxs-lookup"><span data-stu-id="220db-251">The [`Request.Form` property](https://msdn.microsoft.com/en-us/library/system.web.httprequest.form.aspx) provides a [`NameValueCollection`](https://msdn.microsoft.com/en-us/library/system.collections.specialized.namevaluecollection.aspx) representing the form variables.</span></span> <span data-ttu-id="220db-252">窗体变量的名称和 web 页中中的窗体字段的值也每当回发时，才会发送回的 web 浏览器。</span><span class="sxs-lookup"><span data-stu-id="220db-252">The form variables are the names and values of the form fields in the web page, and are sent back by the web browser whenever a postback ensues.</span></span> <span data-ttu-id="220db-253">因为呈现`name`GridView 中的单选按钮的属性`SuppliersGroup`，当浏览器将发送的回发 web 页面`SuppliersGroup=valueOfSelectedRadioButton`返回到 web 服务器 （以及其他窗体字段）。</span><span class="sxs-lookup"><span data-stu-id="220db-253">Because the rendered `name` attribute of the radio buttons in the GridView is `SuppliersGroup`, when the web page is posted back the browser will send `SuppliersGroup=valueOfSelectedRadioButton` back to the web server (along with the other form fields).</span></span> <span data-ttu-id="220db-254">然后可以从访问此信息`Request.Form`属性使用： `Request.Form["SuppliersGroup"]`。</span><span class="sxs-lookup"><span data-stu-id="220db-254">This information can then be accessed from the `Request.Form` property using: `Request.Form["SuppliersGroup"]`.</span></span>

<span data-ttu-id="220db-255">因为我们将需要以确定选中的单选按钮索引不是仅在`RowCreated`事件处理程序，但在`Click`按钮 Web 控件的事件处理程序，让 s 添加`SuppliersSelectedIndex`属性返回的代码隐藏类`-1`如果选择没有单选按钮和所选的索引，如果一个单选按钮处于选中状态。</span><span class="sxs-lookup"><span data-stu-id="220db-255">Since we'll need to determine the selected radio button index not only in the `RowCreated` event handler, but in the `Click` event handlers for the Button Web controls, let s add a `SuppliersSelectedIndex` property to the code-behind class that returns `-1` if no radio button was selected and the selected index if one of the radio buttons is selected.</span></span>


[!code-csharp[Main](adding-a-gridview-column-of-radio-buttons-cs/samples/sample7.cs)]

<span data-ttu-id="220db-256">通过添加此属性，我们已知要添加`checked="checked"`中的标记`RowCreated`事件处理程序时`SuppliersSelectedIndex`等于`e.Row.RowIndex`。</span><span class="sxs-lookup"><span data-stu-id="220db-256">With this property added, we know to add the `checked="checked"` markup in the `RowCreated` event handler when `SuppliersSelectedIndex` equals `e.Row.RowIndex`.</span></span> <span data-ttu-id="220db-257">更新事件处理程序，以包括此逻辑：</span><span class="sxs-lookup"><span data-stu-id="220db-257">Update the event handler to include this logic:</span></span>


[!code-csharp[Main](adding-a-gridview-column-of-radio-buttons-cs/samples/sample8.cs)]

<span data-ttu-id="220db-258">进行此更改后，选中的单选按钮处于选定状态的回发之后。</span><span class="sxs-lookup"><span data-stu-id="220db-258">With this change, the selected radio button remains selected after a postback.</span></span> <span data-ttu-id="220db-259">现在，我们已经能够指定哪些单选按钮处于选中状态，我们无法更改行为，以便当首次访问页，选择第一个 GridView 行的单选按钮 （而不是具有默认情况下选择没有单选按钮，即当前行为）。</span><span class="sxs-lookup"><span data-stu-id="220db-259">Now that we have the ability to specify what radio button is selected, we could change the behavior so that when the page was first visited, the first GridView row s radio button was selected (rather than having no radio buttons selected by default, which is the current behavior).</span></span> <span data-ttu-id="220db-260">若要让第一个单选按钮选择默认情况下，只需更改`if (SuppliersSelectedIndex == e.Row.RowIndex)`与以下语句： `if (SuppliersSelectedIndex == e.Row.RowIndex || (!Page.IsPostBack && e.Row.RowIndex == 0))`。</span><span class="sxs-lookup"><span data-stu-id="220db-260">To have the first radio button selected by default, simply change the `if (SuppliersSelectedIndex == e.Row.RowIndex)` statement to the following: `if (SuppliersSelectedIndex == e.Row.RowIndex || (!Page.IsPostBack && e.Row.RowIndex == 0))`.</span></span>

<span data-ttu-id="220db-261">此时我们已添加到允许单个 GridView 行选择和跨回发记住 GridView 的一列分组的单选按钮。</span><span class="sxs-lookup"><span data-stu-id="220db-261">At this point we have added a column of grouped radio buttons to the GridView that allows for a single GridView row to be selected and remembered across postbacks.</span></span> <span data-ttu-id="220db-262">我们后续步骤是以显示所选供应商提供的产品。</span><span class="sxs-lookup"><span data-stu-id="220db-262">Our next steps are to display the products provided by the selected supplier.</span></span> <span data-ttu-id="220db-263">在步骤 4 中我们将了解如何将用户重定向到另一页，沿所选发送`SupplierID`。</span><span class="sxs-lookup"><span data-stu-id="220db-263">In Step 4 we'll see how to redirect the user to another page, sending along the selected `SupplierID`.</span></span> <span data-ttu-id="220db-264">在步骤 5 中，我们将了解如何在同一页面上 GridView 中显示所选供应商的产品。</span><span class="sxs-lookup"><span data-stu-id="220db-264">In Step 5, we'll see how to display the selected supplier s products in a GridView on the same page.</span></span>

> [!NOTE]
> <span data-ttu-id="220db-265">而不是使用 TemplateField （此时间较长的步骤 3 的焦点），我们无法创建自定义`DataControlField`呈现合适的用户界面和功能的类。</span><span class="sxs-lookup"><span data-stu-id="220db-265">Rather than using a TemplateField (the focus of this lengthy Step 3), we could create a custom `DataControlField` class that renders the appropriate user interface and functionality.</span></span> <span data-ttu-id="220db-266">[ `DataControlField`类](https://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.datacontrolfield.aspx)是 BoundField、 CheckBoxField、 TemplateField 和其他内置的 GridView 和说明字段派生自的基类。</span><span class="sxs-lookup"><span data-stu-id="220db-266">The [`DataControlField` class](https://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.datacontrolfield.aspx) is the base class from which the BoundField, CheckBoxField, TemplateField, and other built-in GridView and DetailsView fields derive.</span></span> <span data-ttu-id="220db-267">创建自定义`DataControlField`类将表示单选按钮的列无法仅使用声明性语法，添加，并且还会使复制其他网页和其他简单得多的 web 应用程序的功能。</span><span class="sxs-lookup"><span data-stu-id="220db-267">Creating a custom `DataControlField` class would mean that the column of radio buttons could be added just using declarative syntax, and would also make replicating the functionality on other web pages and other web applications significantly easier.</span></span>


<span data-ttu-id="220db-268">如果你已创建自定义，编译在 ASP.NET 中的控件，但是，你知道，这样做需要数量相当大的先并携带的细微部分和必须进行仔细处理的边缘情况的主机。</span><span class="sxs-lookup"><span data-stu-id="220db-268">If you ve ever created custom, compiled controls in ASP.NET, however, you know that doing so requires a fair amount of legwork and carries with it a host of subtleties and edge cases that must be carefully handled.</span></span> <span data-ttu-id="220db-269">因此，我们将放弃实现作为自定义的单选按钮的列`DataControlField`类现在并坚持使用 TemplateField 选项。</span><span class="sxs-lookup"><span data-stu-id="220db-269">Therefore, we will forgo implementing a column of radio buttons as a custom `DataControlField` class for now and stick with the TemplateField option.</span></span> <span data-ttu-id="220db-270">也许，我们将有机会浏览创建、 使用和部署自定义`DataControlField`将来的教程中的类 ！</span><span class="sxs-lookup"><span data-stu-id="220db-270">Perhaps we'll have the chance to explore creating, using, and deploying custom `DataControlField` classes in a future tutorial!</span></span>

## <a name="step-4-displaying-the-selected-supplier-s-products-in-a-separate-page"></a><span data-ttu-id="220db-271">步骤 4： 在单独的页面中显示所选供应商的产品</span><span class="sxs-lookup"><span data-stu-id="220db-271">Step 4: Displaying the Selected Supplier s Products in a Separate Page</span></span>

<span data-ttu-id="220db-272">用户选定的 GridView 行后，我们需要显示所选供应商的产品。</span><span class="sxs-lookup"><span data-stu-id="220db-272">After the user has selected a GridView row, we need to show the selected supplier s products.</span></span> <span data-ttu-id="220db-273">在某些情况下，我们可能想要在单独的页上，在其他我们可能更愿意执行此操作在同一页面中显示这些产品。</span><span class="sxs-lookup"><span data-stu-id="220db-273">In some circumstances, we may want to display these products in a separate page, in others we might prefer to do it in the same page.</span></span> <span data-ttu-id="220db-274">让我们来首先检查如何在单独的页面; 中显示的产品步骤 5 中，我们将考察添加到 GridView`RadioButtonField.aspx`以显示所选供应商的产品。</span><span class="sxs-lookup"><span data-stu-id="220db-274">Let s first examine how to display the products in a separate page; in Step 5 we'll look at adding a GridView to `RadioButtonField.aspx` to display the selected supplier s products.</span></span>

<span data-ttu-id="220db-275">目前有两个页面上的按钮 Web 控件`ListProducts`和`SendToProducts`。</span><span class="sxs-lookup"><span data-stu-id="220db-275">Currently there are two Button Web controls on the page `ListProducts` and `SendToProducts`.</span></span> <span data-ttu-id="220db-276">当`SendToProducts`单击按钮时，我们想要发送到用户`~/Filtering/ProductsForSupplierDetails.aspx`。</span><span class="sxs-lookup"><span data-stu-id="220db-276">When the `SendToProducts` Button is clicked, we want to send the user to `~/Filtering/ProductsForSupplierDetails.aspx`.</span></span> <span data-ttu-id="220db-277">此页中创建[主/详细信息筛选跨两个页](../masterdetail/master-detail-filtering-across-two-pages-cs.md)教程并显示供应商的产品其`SupplierID`通过名为的查询字符串字段传递`SupplierID`。</span><span class="sxs-lookup"><span data-stu-id="220db-277">This page was created in the [Master/Detail Filtering Across Two Pages](../masterdetail/master-detail-filtering-across-two-pages-cs.md) tutorial and displays the products for the supplier whose `SupplierID` is passed through the querystring field named `SupplierID`.</span></span>

<span data-ttu-id="220db-278">若要提供此功能，创建的事件处理程序`SendToProducts`按钮的`Click`事件。</span><span class="sxs-lookup"><span data-stu-id="220db-278">To provide this functionality, create an event handler for the `SendToProducts` Button s `Click` event.</span></span> <span data-ttu-id="220db-279">在步骤 3 中，我们将添加`SuppliersSelectedIndex`选择属性，它将返回其单选按钮的行的索引。</span><span class="sxs-lookup"><span data-stu-id="220db-279">In Step 3 we added the `SuppliersSelectedIndex` property, which returns the index of the row whose radio button is selected.</span></span> <span data-ttu-id="220db-280">相应`SupplierID`可检索来自 GridView s`DataKeys`集合和用户然后可以发送到`~/Filtering/ProductsForSupplierDetails.aspx?SupplierID=SupplierID`使用`Response.Redirect("url")`。</span><span class="sxs-lookup"><span data-stu-id="220db-280">The corresponding `SupplierID` can be retrieved from the GridView s `DataKeys` collection and the user can then be sent to `~/Filtering/ProductsForSupplierDetails.aspx?SupplierID=SupplierID` using `Response.Redirect("url")`.</span></span>


[!code-csharp[Main](adding-a-gridview-column-of-radio-buttons-cs/samples/sample9.cs)]

<span data-ttu-id="220db-281">此代码非常有效，只要一个单选按钮处于选中状态从 GridView。</span><span class="sxs-lookup"><span data-stu-id="220db-281">This code works wonderfully as long as one of the radio buttons is selected from the GridView.</span></span> <span data-ttu-id="220db-282">如果最初，GridView 不包含任何单选按钮选择，并且用户单击`SendToProducts`按钮，`SuppliersSelectedIndex`将`-1`，这将导致异常引发自`-1`超出的索引范围`DataKeys`集合。</span><span class="sxs-lookup"><span data-stu-id="220db-282">If, initially, the GridView does not have any radio buttons selected, and the user clicks the `SendToProducts` button, `SuppliersSelectedIndex` will be `-1`, which will cause an exception to be thrown since `-1` is out of the index range of the `DataKeys` collection.</span></span> <span data-ttu-id="220db-283">这是一个问题，但是，如果您决定更新`RowCreated`事件处理程序以便在初始时会选中 GridView 中具有的第一个单选按钮的步骤 3 中所述。</span><span class="sxs-lookup"><span data-stu-id="220db-283">This is not a concern, however, if you decided to update the `RowCreated` event handler as discussed in Step 3 so as to have the first radio button in the GridView initially selected.</span></span>

<span data-ttu-id="220db-284">若要容纳`SuppliersSelectedIndex`值`-1`，将标签 Web 控件添加到页面上方 GridView。</span><span class="sxs-lookup"><span data-stu-id="220db-284">To accommodate a `SuppliersSelectedIndex` value of `-1`, add a Label Web control to the page above the GridView.</span></span> <span data-ttu-id="220db-285">设置其`ID`属性`ChooseSupplierMsg`，将其`CssClass`属性`Warning`，将其`EnableViewState`和`Visible`属性设置为`false`，并将其`Text`请属性从网格中选择一个供应商。</span><span class="sxs-lookup"><span data-stu-id="220db-285">Set its `ID` property to `ChooseSupplierMsg`, its `CssClass` property to `Warning`, its `EnableViewState` and `Visible` properties to `false`, and its `Text` property to Please choose a supplier from the grid.</span></span> <span data-ttu-id="220db-286">CSS 类`Warning`以红色、 斜体、 粗体、 大字体显示文本，并在中定义`Styles.css`。</span><span class="sxs-lookup"><span data-stu-id="220db-286">The CSS class `Warning` displays text in a red, italic, bold, large font and is defined in `Styles.css`.</span></span> <span data-ttu-id="220db-287">通过设置`EnableViewState`和`Visible`属性设置为`false`，标签不呈现除外，对于那些回发的位置控制 s`Visible`属性以编程方式设置为`true`。</span><span class="sxs-lookup"><span data-stu-id="220db-287">By setting the `EnableViewState` and `Visible` properties to `false`, the Label is not rendered except for only those postbacks where the control s `Visible` property is programmatically set to `true`.</span></span>


<span data-ttu-id="220db-288">[![添加标签 Web 控件上方 GridView](adding-a-gridview-column-of-radio-buttons-cs/_static/image13.gif)](adding-a-gridview-column-of-radio-buttons-cs/_static/image21.png)</span><span class="sxs-lookup"><span data-stu-id="220db-288">[![Add a Label Web Control Above the GridView](adding-a-gridview-column-of-radio-buttons-cs/_static/image13.gif)](adding-a-gridview-column-of-radio-buttons-cs/_static/image21.png)</span></span>

<span data-ttu-id="220db-289">**图 13**： 添加标签 Web 控件上方 GridView ([单击以查看实际尺寸的图像](adding-a-gridview-column-of-radio-buttons-cs/_static/image22.png))</span><span class="sxs-lookup"><span data-stu-id="220db-289">**Figure 13**: Add a Label Web Control Above the GridView ([Click to view full-size image](adding-a-gridview-column-of-radio-buttons-cs/_static/image22.png))</span></span>


<span data-ttu-id="220db-290">接下来，增加`Click`事件处理程序来显示`ChooseSupplierMsg`标签如果`SuppliersSelectedIndex`是小于零，并将重定向到用户`~/Filtering/ProductsForSupplierDetails.aspx?SupplierID=SupplierID`否则为。</span><span class="sxs-lookup"><span data-stu-id="220db-290">Next, augment the `Click` event handler to display the `ChooseSupplierMsg` Label if `SuppliersSelectedIndex` is less than zero, and redirect the user to `~/Filtering/ProductsForSupplierDetails.aspx?SupplierID=SupplierID` otherwise.</span></span>


[!code-csharp[Main](adding-a-gridview-column-of-radio-buttons-cs/samples/sample10.cs)]

<span data-ttu-id="220db-291">请访问中某个浏览器，然后单击页面`SendToProducts`之前从 GridView 选择供应商的按钮。</span><span class="sxs-lookup"><span data-stu-id="220db-291">Visit the page in a browser and click the `SendToProducts` button before selecting a supplier from the GridView.</span></span> <span data-ttu-id="220db-292">如图 14 所示，这将显示`ChooseSupplierMsg`标签。</span><span class="sxs-lookup"><span data-stu-id="220db-292">As Figure 14 shows, this displays the `ChooseSupplierMsg` label.</span></span> <span data-ttu-id="220db-293">接下来，选择一个供应商，然后单击`SendToProducts`按钮。</span><span class="sxs-lookup"><span data-stu-id="220db-293">Next, select a supplier and click the `SendToProducts` button.</span></span> <span data-ttu-id="220db-294">这将 whisk 你到页列出由所选供应商提供的产品。</span><span class="sxs-lookup"><span data-stu-id="220db-294">This will whisk you to a page that lists the products supplied by the selected supplier.</span></span> <span data-ttu-id="220db-295">图 15 所示`ProductsForSupplierDetails.aspx`页选择野人绑架 Breweries 供应商。</span><span class="sxs-lookup"><span data-stu-id="220db-295">Figure 15 shows the `ProductsForSupplierDetails.aspx` page when the Bigfoot Breweries supplier was selected.</span></span>


<span data-ttu-id="220db-296">[![如果选择否供应商，显示 ChooseSupplierMsg 标签](adding-a-gridview-column-of-radio-buttons-cs/_static/image14.gif)](adding-a-gridview-column-of-radio-buttons-cs/_static/image23.png)</span><span class="sxs-lookup"><span data-stu-id="220db-296">[![The ChooseSupplierMsg Label is Displayed if No Supplier is Selected](adding-a-gridview-column-of-radio-buttons-cs/_static/image14.gif)](adding-a-gridview-column-of-radio-buttons-cs/_static/image23.png)</span></span>

<span data-ttu-id="220db-297">**图 14**:`ChooseSupplierMsg`才显示标签，如果选择否供应商 ([单击以查看实际尺寸的图像](adding-a-gridview-column-of-radio-buttons-cs/_static/image24.png))</span><span class="sxs-lookup"><span data-stu-id="220db-297">**Figure 14**: The `ChooseSupplierMsg` Label is Displayed if No Supplier is Selected ([Click to view full-size image](adding-a-gridview-column-of-radio-buttons-cs/_static/image24.png))</span></span>


<span data-ttu-id="220db-298">[![选择供应商的产品将显示在 ProductsForSupplierDetails.aspx](adding-a-gridview-column-of-radio-buttons-cs/_static/image15.gif)](adding-a-gridview-column-of-radio-buttons-cs/_static/image25.png)</span><span class="sxs-lookup"><span data-stu-id="220db-298">[![The Selected Supplier s Products are Displayed in ProductsForSupplierDetails.aspx](adding-a-gridview-column-of-radio-buttons-cs/_static/image15.gif)](adding-a-gridview-column-of-radio-buttons-cs/_static/image25.png)</span></span>

<span data-ttu-id="220db-299">**图 15**: 选择供应商的产品显示在`ProductsForSupplierDetails.aspx`([单击以查看实际尺寸的图像](adding-a-gridview-column-of-radio-buttons-cs/_static/image26.png))</span><span class="sxs-lookup"><span data-stu-id="220db-299">**Figure 15**: The Selected Supplier s Products are Displayed in `ProductsForSupplierDetails.aspx` ([Click to view full-size image](adding-a-gridview-column-of-radio-buttons-cs/_static/image26.png))</span></span>


## <a name="step-5-displaying-the-selected-supplier-s-products-on-the-same-page"></a><span data-ttu-id="220db-300">步骤 5： 在同一页上显示所选供应商的产品</span><span class="sxs-lookup"><span data-stu-id="220db-300">Step 5: Displaying the Selected Supplier s Products on the Same Page</span></span>

<span data-ttu-id="220db-301">在步骤 4 中，我们已了解如何将用户发送到另一个 web 页面，以显示所选供应商的产品。</span><span class="sxs-lookup"><span data-stu-id="220db-301">In Step 4 we saw how to send the user to another web page to display the selected supplier s products.</span></span> <span data-ttu-id="220db-302">或者，可以在同一页上显示所选供应商的产品。</span><span class="sxs-lookup"><span data-stu-id="220db-302">Alternatively, the selected supplier s products can be displayed on the same page.</span></span> <span data-ttu-id="220db-303">为了说明这一点，我们将添加到另一个 GridView`RadioButtonField.aspx`以显示所选供应商的产品。</span><span class="sxs-lookup"><span data-stu-id="220db-303">To illustrate this, we'll add another GridView to `RadioButtonField.aspx` to display the selected supplier s products.</span></span>

<span data-ttu-id="220db-304">由于我们只需要此 GridView 的产品以显示选定供应商后，将添加下方面板 Web 控件`Suppliers`GridView，设置其`ID`到`ProductsBySupplierPanel`及其`Visible`属性`false`。</span><span class="sxs-lookup"><span data-stu-id="220db-304">Since we only want this GridView of products to display once a supplier has been selected, add a Panel Web control beneath the `Suppliers` GridView, setting its `ID` to `ProductsBySupplierPanel` and its `Visible` property to `false`.</span></span> <span data-ttu-id="220db-305">在面板内将文本产品添加所选供应商后, 跟一个名为的 GridView `ProductsBySupplier`。</span><span class="sxs-lookup"><span data-stu-id="220db-305">Within the Panel, add the text Products for the Selected Supplier, followed by a GridView named `ProductsBySupplier`.</span></span> <span data-ttu-id="220db-306">从 GridView s 智能标记中，选择要绑定到名为新 ObjectDataSource `ProductsBySupplierDataSource`。</span><span class="sxs-lookup"><span data-stu-id="220db-306">From the GridView s smart tag, choose to bind it to a new ObjectDataSource named `ProductsBySupplierDataSource`.</span></span>


<span data-ttu-id="220db-307">[![将 ProductsBySupplier GridView 绑定到新对象数据源](adding-a-gridview-column-of-radio-buttons-cs/_static/image16.gif)](adding-a-gridview-column-of-radio-buttons-cs/_static/image27.png)</span><span class="sxs-lookup"><span data-stu-id="220db-307">[![Bind the ProductsBySupplier GridView to a New ObjectDataSource](adding-a-gridview-column-of-radio-buttons-cs/_static/image16.gif)](adding-a-gridview-column-of-radio-buttons-cs/_static/image27.png)</span></span>

<span data-ttu-id="220db-308">**图 16**： 绑定`ProductsBySupplier`到新对象数据源的 GridView ([单击以查看实际尺寸的图像](adding-a-gridview-column-of-radio-buttons-cs/_static/image28.png))</span><span class="sxs-lookup"><span data-stu-id="220db-308">**Figure 16**: Bind the `ProductsBySupplier` GridView to a New ObjectDataSource ([Click to view full-size image](adding-a-gridview-column-of-radio-buttons-cs/_static/image28.png))</span></span>


<span data-ttu-id="220db-309">接下来，配置对象数据源以使用`ProductsBLL`类。</span><span class="sxs-lookup"><span data-stu-id="220db-309">Next, configure the ObjectDataSource to use the `ProductsBLL` class.</span></span> <span data-ttu-id="220db-310">由于我们只想要检索选定的供应商提供的这些产品，指定应调用 ObjectDataSource`GetProductsBySupplierID(supplierID)`方法来检索其数据。</span><span class="sxs-lookup"><span data-stu-id="220db-310">Since we only want to retrieve those products provided by the selected supplier, specify that the ObjectDataSource should invoke the `GetProductsBySupplierID(supplierID)` method to retrieve its data.</span></span> <span data-ttu-id="220db-311">从下拉列表中，在更新中，插入、 选择 （无） 并删除选项卡。</span><span class="sxs-lookup"><span data-stu-id="220db-311">Select (None) from the drop-down lists in the UPDATE, INSERT, and DELETE tabs.</span></span>


<span data-ttu-id="220db-312">[![配置对象数据源以使用 GetProductsBySupplierID(supplierID) 方法](adding-a-gridview-column-of-radio-buttons-cs/_static/image17.gif)](adding-a-gridview-column-of-radio-buttons-cs/_static/image29.png)</span><span class="sxs-lookup"><span data-stu-id="220db-312">[![Configure the ObjectDataSource to Use the GetProductsBySupplierID(supplierID) Method](adding-a-gridview-column-of-radio-buttons-cs/_static/image17.gif)](adding-a-gridview-column-of-radio-buttons-cs/_static/image29.png)</span></span>

<span data-ttu-id="220db-313">**图 17**： 配置使用 ObjectDataSource`GetProductsBySupplierID(supplierID)`方法 ([单击以查看实际尺寸的图像](adding-a-gridview-column-of-radio-buttons-cs/_static/image30.png))</span><span class="sxs-lookup"><span data-stu-id="220db-313">**Figure 17**: Configure the ObjectDataSource to Use the `GetProductsBySupplierID(supplierID)` Method ([Click to view full-size image](adding-a-gridview-column-of-radio-buttons-cs/_static/image30.png))</span></span>


<span data-ttu-id="220db-314">[![在更新中，INSERT、 设置下拉列表中的，以便 （无） 和删除选项卡](adding-a-gridview-column-of-radio-buttons-cs/_static/image18.gif)](adding-a-gridview-column-of-radio-buttons-cs/_static/image31.png)</span><span class="sxs-lookup"><span data-stu-id="220db-314">[![Set the Drop-Down Lists to (None) in the UPDATE, INSERT, and DELETE Tabs](adding-a-gridview-column-of-radio-buttons-cs/_static/image18.gif)](adding-a-gridview-column-of-radio-buttons-cs/_static/image31.png)</span></span>

<span data-ttu-id="220db-315">**图 18**： 设置中更新、 插入和删除选项卡的下拉列表将列出到 （无） ([单击以查看实际尺寸的图像](adding-a-gridview-column-of-radio-buttons-cs/_static/image32.png))</span><span class="sxs-lookup"><span data-stu-id="220db-315">**Figure 18**: Set the Drop-Down Lists to (None) in the UPDATE, INSERT, and DELETE Tabs ([Click to view full-size image](adding-a-gridview-column-of-radio-buttons-cs/_static/image32.png))</span></span>


<span data-ttu-id="220db-316">配置选择之后, 更新、 插入和删除选项卡，请单击下一步。</span><span class="sxs-lookup"><span data-stu-id="220db-316">After configuring the SELECT, UPDATE, INSERT, and DELETE tabs, click Next.</span></span> <span data-ttu-id="220db-317">由于`GetProductsBySupplierID(supplierID)`方法需要输入的参数，创建数据源向导将提示我们需要指定参数的值的源。</span><span class="sxs-lookup"><span data-stu-id="220db-317">Since the `GetProductsBySupplierID(supplierID)` method expects an input parameter, the Create Data Source wizard prompts us to specify the source for the parameter s value.</span></span>

<span data-ttu-id="220db-318">我们有几个此处在指定参数的值的源的选项。</span><span class="sxs-lookup"><span data-stu-id="220db-318">We have a couple of options here in specifying the source of the parameter s value.</span></span> <span data-ttu-id="220db-319">我们无法使用默认参数对象，并以编程方式将分配的值`SuppliersSelectedIndex`属性参数 s`DefaultValue`中 ObjectDataSource 的属性`Selecting`事件处理程序。</span><span class="sxs-lookup"><span data-stu-id="220db-319">We could use the default Parameter object, and programmatically assign the value of the `SuppliersSelectedIndex` property to the Parameter s `DefaultValue` property in the ObjectDataSource s `Selecting` event handler.</span></span> <span data-ttu-id="220db-320">将回指[以编程方式设置对象数据源的参数值](../basic-reporting/programmatically-setting-the-objectdatasource-s-parameter-values-cs.md)教程，以在以编程方式将值分配到 ObjectDataSource 的参数使用刷新程序。</span><span class="sxs-lookup"><span data-stu-id="220db-320">Refer back to the [Programmatically Setting the ObjectDataSource's Parameter Values](../basic-reporting/programmatically-setting-the-objectdatasource-s-parameter-values-cs.md) tutorial for a refresher on programmatically assigning values to the ObjectDataSource s parameters.</span></span>

<span data-ttu-id="220db-321">或者，我们可以使用 ControlParameter，请参阅`Suppliers`GridView s [ `SelectedValue`属性](https://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.gridview.selectedvalue.aspx)（请参阅图 19）。</span><span class="sxs-lookup"><span data-stu-id="220db-321">Alternatively, we can use a ControlParameter and refer to the `Suppliers` GridView s [`SelectedValue` property](https://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.gridview.selectedvalue.aspx) (see Figure 19).</span></span> <span data-ttu-id="220db-322">GridView s`SelectedValue`属性返回`DataKey`值对应于[`SelectedIndex`属性](https://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.gridview.selectedindex.aspx)。</span><span class="sxs-lookup"><span data-stu-id="220db-322">The GridView s `SelectedValue` property returns the `DataKey` value corresponding to the [`SelectedIndex` property](https://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.gridview.selectedindex.aspx).</span></span> <span data-ttu-id="220db-323">为了使此选项才能工作，我们需要以编程方式设置 GridView s`SelectedIndex`对所选的属性时行`ListProducts`单击按钮。</span><span class="sxs-lookup"><span data-stu-id="220db-323">In order for this option to work, we need to programmatically set the GridView s `SelectedIndex` property to the selected row when the `ListProducts` button is clicked.</span></span> <span data-ttu-id="220db-324">作为一项额外权益，通过设置`SelectedIndex`，将不执行所选的记录`SelectedRowStyle`中定义`DataWebControls`主题 （黄色背景）。</span><span class="sxs-lookup"><span data-stu-id="220db-324">As an added benefit, by setting the `SelectedIndex`, the selected record will take on the `SelectedRowStyle` defined in the `DataWebControls` Theme (a yellow background).</span></span>


<span data-ttu-id="220db-325">[![使用 ControlParameter GridView 的 SelectedValue 指定为参数源](adding-a-gridview-column-of-radio-buttons-cs/_static/image19.gif)](adding-a-gridview-column-of-radio-buttons-cs/_static/image33.png)</span><span class="sxs-lookup"><span data-stu-id="220db-325">[![Use a ControlParameter to Specify the GridView s SelectedValue as the Parameter Source](adding-a-gridview-column-of-radio-buttons-cs/_static/image19.gif)](adding-a-gridview-column-of-radio-buttons-cs/_static/image33.png)</span></span>

<span data-ttu-id="220db-326">**图 19**： 使用 ControlParameter 指定为参数源的 GridView 的 SelectedValue ([单击以查看实际尺寸的图像](adding-a-gridview-column-of-radio-buttons-cs/_static/image34.png))</span><span class="sxs-lookup"><span data-stu-id="220db-326">**Figure 19**: Use a ControlParameter to Specify the GridView s SelectedValue as the Parameter Source ([Click to view full-size image](adding-a-gridview-column-of-radio-buttons-cs/_static/image34.png))</span></span>


<span data-ttu-id="220db-327">完成向导之后，Visual Studio 将自动添加产品的数据字段的字段。</span><span class="sxs-lookup"><span data-stu-id="220db-327">Upon completing the wizard, Visual Studio will automatically add fields for the product s data fields.</span></span> <span data-ttu-id="220db-328">删除所有但`ProductName`， `CategoryName`，和`UnitPrice`BoundFields，并更改`HeaderText`到产品、 类别和价格的属性。</span><span class="sxs-lookup"><span data-stu-id="220db-328">Remove all but the `ProductName`, `CategoryName`, and `UnitPrice` BoundFields, and change the `HeaderText` properties to Product, Category, and Price.</span></span> <span data-ttu-id="220db-329">配置`UnitPrice`BoundField，以便其值设置为货币的格式。</span><span class="sxs-lookup"><span data-stu-id="220db-329">Configure the `UnitPrice` BoundField so that its value is formatted as a currency.</span></span> <span data-ttu-id="220db-330">进行这些更改后，面板、 GridView 和 ObjectDataSource s 声明性标记应如下所示：</span><span class="sxs-lookup"><span data-stu-id="220db-330">After making these changes, the Panel, GridView, and ObjectDataSource s declarative markup should look like the following:</span></span>


[!code-aspx[Main](adding-a-gridview-column-of-radio-buttons-cs/samples/sample11.aspx)]

<span data-ttu-id="220db-331">若要完成本练习中，我们需要设置 GridView s`SelectedIndex`属性`SelectedSuppliersIndex`和`ProductsBySupplierPanel`面板 s`Visible`属性`true`时`ListProducts`单击按钮。</span><span class="sxs-lookup"><span data-stu-id="220db-331">To complete this exercise, we need to set the GridView s `SelectedIndex` property to the `SelectedSuppliersIndex` and the `ProductsBySupplierPanel` Panel s `Visible` property to `true` when the `ListProducts` button is clicked.</span></span> <span data-ttu-id="220db-332">若要实现此目的，创建的事件处理程序`ListProducts`按钮 Web 控件的`Click`事件并添加以下代码：</span><span class="sxs-lookup"><span data-stu-id="220db-332">To accomplish this, create an event handler for the `ListProducts` Button Web control s `Click` event and add the following code:</span></span>


[!code-csharp[Main](adding-a-gridview-column-of-radio-buttons-cs/samples/sample12.cs)]

<span data-ttu-id="220db-333">如果尚未选择 GridView，从供应商`ChooseSupplierMsg`显示标签和`ProductsBySupplierPanel`隐藏的面板。</span><span class="sxs-lookup"><span data-stu-id="220db-333">If a supplier has not been selected from the GridView, the `ChooseSupplierMsg` Label is displayed and the `ProductsBySupplierPanel` Panel hidden.</span></span> <span data-ttu-id="220db-334">否则为如果已选择了供应商，`ProductsBySupplierPanel`显示和 GridView 的`SelectedIndex`更新属性。</span><span class="sxs-lookup"><span data-stu-id="220db-334">Otherwise, if a supplier has been selected, the `ProductsBySupplierPanel` is displayed and the GridView s `SelectedIndex` property is updated.</span></span>

<span data-ttu-id="220db-335">图 20 后已选择野人绑架 Breweries 供应商，并且单击页按钮上的显示产品后显示的结果。</span><span class="sxs-lookup"><span data-stu-id="220db-335">Figure 20 shows the results after the Bigfoot Breweries supplier has been selected and the Show Products on Page button has been clicked.</span></span>


<span data-ttu-id="220db-336">[![由野人绑架 Breweries 产品提供的同一页面上列出](adding-a-gridview-column-of-radio-buttons-cs/_static/image20.gif)](adding-a-gridview-column-of-radio-buttons-cs/_static/image35.png)</span><span class="sxs-lookup"><span data-stu-id="220db-336">[![The Products Supplied by Bigfoot Breweries are Listed on the Same Page](adding-a-gridview-column-of-radio-buttons-cs/_static/image20.gif)](adding-a-gridview-column-of-radio-buttons-cs/_static/image35.png)</span></span>

<span data-ttu-id="220db-337">**图 20**： 由野人绑架 Breweries 产品提供的同一页面上列出 ([单击以查看实际尺寸的图像](adding-a-gridview-column-of-radio-buttons-cs/_static/image36.png))</span><span class="sxs-lookup"><span data-stu-id="220db-337">**Figure 20**: The Products Supplied by Bigfoot Breweries are Listed on the Same Page ([Click to view full-size image](adding-a-gridview-column-of-radio-buttons-cs/_static/image36.png))</span></span>


## <a name="summary"></a><span data-ttu-id="220db-338">摘要</span><span class="sxs-lookup"><span data-stu-id="220db-338">Summary</span></span>

<span data-ttu-id="220db-339">中所述[母版/详细介绍使用详细信息 DetailView 可选择的主 GridView](../masterdetail/master-detail-using-a-selectable-master-gridview-with-a-details-detailview-cs.md)教程，则可以从使用 CommandField GridView 选择记录其`ShowSelectButton`属性设置为`true`。</span><span class="sxs-lookup"><span data-stu-id="220db-339">As discussed in the [Master/Detail Using a Selectable Master GridView with a Details DetailView](../masterdetail/master-detail-using-a-selectable-master-gridview-with-a-details-detailview-cs.md) tutorial, records can be selected from a GridView using a CommandField whose `ShowSelectButton` property is set to `true`.</span></span> <span data-ttu-id="220db-340">但 CommandField 作为正则下压按钮、 链接或图像显示其按钮。</span><span class="sxs-lookup"><span data-stu-id="220db-340">But the CommandField displays its buttons either as regular push buttons, links, or images.</span></span> <span data-ttu-id="220db-341">替代的行选择用户界面是提供的单选按钮或每个 GridView 行中的复选框。</span><span class="sxs-lookup"><span data-stu-id="220db-341">An alternative row-selection user interface is to provide a radio button or checkbox in each GridView row.</span></span> <span data-ttu-id="220db-342">在本教程中，我们将探讨如何添加单选按钮的列。</span><span class="sxs-lookup"><span data-stu-id="220db-342">In this tutorial we examined how to add a column of radio buttons.</span></span>

<span data-ttu-id="220db-343">遗憾的，为简单或简单添加单选按钮并不是 t 的列，如您所料。</span><span class="sxs-lookup"><span data-stu-id="220db-343">Unfortunately, adding a column of radio buttons isn t as straightforward or simple as one might expect.</span></span> <span data-ttu-id="220db-344">没有可以添加一个按钮的单击没有内置 RadioButtonField，使用单选按钮 Web 控件中为 TemplateField 引入了自己的问题集。</span><span class="sxs-lookup"><span data-stu-id="220db-344">There is no built-in RadioButtonField that can be added at the click of a button, and using the RadioButton Web control within a TemplateField introduces its own set of problems.</span></span> <span data-ttu-id="220db-345">在结束时，若要提供此类接口我们也具有创建自定义`DataControlField`类或将适当的 HTML 注入转换期间为 TemplateField 采用`RowCreated`事件。</span><span class="sxs-lookup"><span data-stu-id="220db-345">In the end, to provide such an interface we either have to create a custom `DataControlField` class or resort to injecting the appropriate HTML into a TemplateField during the `RowCreated` event.</span></span>

<span data-ttu-id="220db-346">具有探讨了如何添加列的单选按钮，让我们着重于添加的列的复选框。</span><span class="sxs-lookup"><span data-stu-id="220db-346">Having explored how to add a column of radio buttons, let us turn our attention to adding a column of checkboxes.</span></span> <span data-ttu-id="220db-347">具有复选框的列，用户可以选择一个或多个 GridView 行，然后执行某项操作上的所有所选行 （如从基于 web 的电子邮件客户端，选择一组的电子邮件，然后选择要删除所有所选电子邮件）。</span><span class="sxs-lookup"><span data-stu-id="220db-347">With a column of checkboxes, a user can select one or more GridView rows and then perform some operation on all of the selected rows (such as selecting a set of emails from a web-based email client, and then choosing to delete all selected emails).</span></span> <span data-ttu-id="220db-348">在下一步的教程，我们将了解如何添加这类列。</span><span class="sxs-lookup"><span data-stu-id="220db-348">In the next tutorial we'll see how to add such a column.</span></span>

<span data-ttu-id="220db-349">尽情享受编程 ！</span><span class="sxs-lookup"><span data-stu-id="220db-349">Happy Programming!</span></span>

## <a name="about-the-author"></a><span data-ttu-id="220db-350">关于作者</span><span class="sxs-lookup"><span data-stu-id="220db-350">About the Author</span></span>

<span data-ttu-id="220db-351">[Scott Mitchell](http://www.4guysfromrolla.com/ScottMitchell.shtml)，作者的七个 ASP/ASP.NET 书籍和的创始人[4GuysFromRolla.com](http://www.4guysfromrolla.com)，自 1998 年使用与 Microsoft Web 技术。</span><span class="sxs-lookup"><span data-stu-id="220db-351">[Scott Mitchell](http://www.4guysfromrolla.com/ScottMitchell.shtml), author of seven ASP/ASP.NET books and founder of [4GuysFromRolla.com](http://www.4guysfromrolla.com), has been working with Microsoft Web technologies since 1998.</span></span> <span data-ttu-id="220db-352">Scott 的作用是作为独立的顾问、 培训师和编写器。</span><span class="sxs-lookup"><span data-stu-id="220db-352">Scott works as an independent consultant, trainer, and writer.</span></span> <span data-ttu-id="220db-353">最新书籍是[ *Sam 教授自己 ASP.NET 2.0 24 小时内*](https://www.amazon.com/exec/obidos/ASIN/0672327384/4guysfromrollaco)。</span><span class="sxs-lookup"><span data-stu-id="220db-353">His latest book is [*Sams Teach Yourself ASP.NET 2.0 in 24 Hours*](https://www.amazon.com/exec/obidos/ASIN/0672327384/4guysfromrollaco).</span></span> <span data-ttu-id="220db-354">他可以达到在[ mitchell@4GuysFromRolla.com。](mailto:mitchell@4GuysFromRolla.com)或通过他的博客，其中可以找到在[http://ScottOnWriting.NET](http://ScottOnWriting.NET)。</span><span class="sxs-lookup"><span data-stu-id="220db-354">He can be reached at [mitchell@4GuysFromRolla.com.](mailto:mitchell@4GuysFromRolla.com) or via his blog, which can be found at [http://ScottOnWriting.NET](http://ScottOnWriting.NET).</span></span>

## <a name="special-thanks-to"></a><span data-ttu-id="220db-355">特别感谢</span><span class="sxs-lookup"><span data-stu-id="220db-355">Special Thanks To</span></span>

<span data-ttu-id="220db-356">本教程系列已由许多有用的审阅者评审。</span><span class="sxs-lookup"><span data-stu-id="220db-356">This tutorial series was reviewed by many helpful reviewers.</span></span> <span data-ttu-id="220db-357">本教程中的前导审阅者已 David Suru。</span><span class="sxs-lookup"><span data-stu-id="220db-357">Lead reviewer for this tutorial was David Suru.</span></span> <span data-ttu-id="220db-358">对感兴趣查看我即将到来的 MSDN 文章？</span><span class="sxs-lookup"><span data-stu-id="220db-358">Interested in reviewing my upcoming MSDN articles?</span></span> <span data-ttu-id="220db-359">如果是这样，删除我一行[ mitchell@4GuysFromRolla.com。](mailto:mitchell@4GuysFromRolla.com)</span><span class="sxs-lookup"><span data-stu-id="220db-359">If so, drop me a line at [mitchell@4GuysFromRolla.com.](mailto:mitchell@4GuysFromRolla.com)</span></span>

>[!div class="step-by-step"]
[<span data-ttu-id="220db-360">下一篇</span><span class="sxs-lookup"><span data-stu-id="220db-360">Next</span></span>](adding-a-gridview-column-of-checkboxes-cs.md)
