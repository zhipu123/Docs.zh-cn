---
uid: web-forms/overview/data-access/paging-and-sorting-with-the-datalist-and-repeater/sorting-data-in-a-datalist-or-repeater-control-cs
title: "对 DataList 或转发器控件 (C#) 中的数据进行排序 |Microsoft 文档"
author: rick-anderson
description: "在本教程中我们将研究如何包含排序 DataList 和转发器中的支持，以及如何构造其数据可以 DataList 或转发器..."
ms.author: aspnetcontent
manager: wpickett
ms.date: 11/13/2006
ms.topic: article
ms.assetid: f52c302a-1b7c-46fe-8a13-8412c95cbf6d
ms.technology: dotnet-webforms
ms.prod: .net-framework
msc.legacyurl: /web-forms/overview/data-access/paging-and-sorting-with-the-datalist-and-repeater/sorting-data-in-a-datalist-or-repeater-control-cs
msc.type: authoredcontent
ms.openlocfilehash: f7ab0df2ebfa24b0928117e683325b158e3aad1c
ms.sourcegitcommit: 9a9483aceb34591c97451997036a9120c3fe2baf
ms.translationtype: MT
ms.contentlocale: zh-CN
ms.lasthandoff: 11/10/2017
---
<a name="sorting-data-in-a-datalist-or-repeater-control-c"></a><span data-ttu-id="a1c59-103">DataList 或转发器控件 (C#) 中对数据进行排序</span><span class="sxs-lookup"><span data-stu-id="a1c59-103">Sorting Data in a DataList or Repeater Control (C#)</span></span>
====================
<span data-ttu-id="a1c59-104">通过[Scott Mitchell](https://twitter.com/ScottOnWriting)</span><span class="sxs-lookup"><span data-stu-id="a1c59-104">by [Scott Mitchell](https://twitter.com/ScottOnWriting)</span></span>

<span data-ttu-id="a1c59-105">[下载示例应用程序](http://download.microsoft.com/download/4/a/7/4a7a3b18-d80e-4014-8e53-a6a2427f0d93/ASPNET_Data_Tutorial_45_CS.exe)或[下载 PDF](sorting-data-in-a-datalist-or-repeater-control-cs/_static/datatutorial45cs1.pdf)</span><span class="sxs-lookup"><span data-stu-id="a1c59-105">[Download Sample App](http://download.microsoft.com/download/4/a/7/4a7a3b18-d80e-4014-8e53-a6a2427f0d93/ASPNET_Data_Tutorial_45_CS.exe) or [Download PDF](sorting-data-in-a-datalist-or-repeater-control-cs/_static/datatutorial45cs1.pdf)</span></span>

> <span data-ttu-id="a1c59-106">在本教程中我们将查看如何包含排序 DataList 和转发器中的支持，以及如何构造 DataList 或其数据可以分页和排序的转发器。</span><span class="sxs-lookup"><span data-stu-id="a1c59-106">In this tutorial we'll examine how to include sorting support in the DataList and Repeater, as well as how to construct a DataList or Repeater whose data can be paged and sorted.</span></span>


## <a name="introduction"></a><span data-ttu-id="a1c59-107">介绍</span><span class="sxs-lookup"><span data-stu-id="a1c59-107">Introduction</span></span>

<span data-ttu-id="a1c59-108">在[以前一教程](paging-report-data-in-a-datalist-or-repeater-control-cs.md)，我们探讨了如何向 DataList 添加分页支持。</span><span class="sxs-lookup"><span data-stu-id="a1c59-108">In the [previous tutorial](paging-report-data-in-a-datalist-or-repeater-control-cs.md) we examined how to add paging support to a DataList.</span></span> <span data-ttu-id="a1c59-109">我们创建中的新方法`ProductsBLL`类 (`GetProductsAsPagedDataSource`) 返回`PagedDataSource`对象。</span><span class="sxs-lookup"><span data-stu-id="a1c59-109">We created a new method in the `ProductsBLL` class (`GetProductsAsPagedDataSource`) that returned a `PagedDataSource` object.</span></span> <span data-ttu-id="a1c59-110">绑定到 DataList 或转发器时，DataList 或转发器将显示只请求的数据页。</span><span class="sxs-lookup"><span data-stu-id="a1c59-110">When bound to a DataList or Repeater, the DataList or Repeater would display just the requested page of data.</span></span> <span data-ttu-id="a1c59-111">此方法十分类似于什么用于内部由 GridView、 说明如何和 FormView 控件提供其内置的默认分页功能。</span><span class="sxs-lookup"><span data-stu-id="a1c59-111">This technique is similar to what is used internally by the GridView, DetailsView, and FormView controls to provide their built-in default paging functionality.</span></span>

<span data-ttu-id="a1c59-112">除了产品/服务的分页支持，GridView 还包括现成排序支持。</span><span class="sxs-lookup"><span data-stu-id="a1c59-112">In addition to offering paging support, the GridView also includes out of the box sorting support.</span></span> <span data-ttu-id="a1c59-113">DataList 和转发器都不提供内置的排序功能;但是，进行少量的代码添加排序功能。</span><span class="sxs-lookup"><span data-stu-id="a1c59-113">Neither the DataList nor Repeater provides built-in sorting functionality; however, sorting features can be added with a bit of code.</span></span> <span data-ttu-id="a1c59-114">在本教程中我们将查看如何包含排序 DataList 和转发器中的支持，以及如何构造 DataList 或其数据可以分页和排序的转发器。</span><span class="sxs-lookup"><span data-stu-id="a1c59-114">In this tutorial we'll examine how to include sorting support in the DataList and Repeater, as well as how to construct a DataList or Repeater whose data can be paged and sorted.</span></span>

## <a name="a-review-of-sorting"></a><span data-ttu-id="a1c59-115">排序检查</span><span class="sxs-lookup"><span data-stu-id="a1c59-115">A Review of Sorting</span></span>

<span data-ttu-id="a1c59-116">正如我们看到在[分页和排序报表数据](../paging-and-sorting/paging-and-sorting-report-data-cs.md)教程中，提供排序支持现成的 GridView 控件。</span><span class="sxs-lookup"><span data-stu-id="a1c59-116">As we saw in the [Paging and Sorting Report Data](../paging-and-sorting/paging-and-sorting-report-data-cs.md) tutorial, the GridView control provides out of the box sorting support.</span></span> <span data-ttu-id="a1c59-117">每个 GridView 字段只能具有一个关联`SortExpression`，表示对数据进行排序所依据的数据字段。</span><span class="sxs-lookup"><span data-stu-id="a1c59-117">Each GridView field can have an associated `SortExpression`, which indicates the data field by which to sort the data.</span></span> <span data-ttu-id="a1c59-118">当 GridView s`AllowSorting`属性设置为`true`，具有每个 GridView 字段`SortExpression`属性值已呈现为 LinkButton 其标头。</span><span class="sxs-lookup"><span data-stu-id="a1c59-118">When the GridView s `AllowSorting` property is set to `true`, each GridView field that has a `SortExpression` property value has its header rendered as a LinkButton.</span></span> <span data-ttu-id="a1c59-119">当用户单击特定的 GridView 字段 s 标头时，产生的回发而的数据排序根据单击字段的`SortExpression`。</span><span class="sxs-lookup"><span data-stu-id="a1c59-119">When a user clicks a particular GridView field s header, a postback occurs and the data is sorted according to the clicked field s `SortExpression`.</span></span>

<span data-ttu-id="a1c59-120">GridView 控件具有`SortExpression`属性，它存储`SortExpression`的 GridView 字段的数据按排序。</span><span class="sxs-lookup"><span data-stu-id="a1c59-120">The GridView control has a `SortExpression` property as well, which stores the `SortExpression` of the GridView field the data is sorted by.</span></span> <span data-ttu-id="a1c59-121">此外，`SortDirection`属性指示数据是否按升序或降序 （如果用户单击切换特定 GridView 字段 s 标头中的链接，两次连续的排序顺序） 排序。</span><span class="sxs-lookup"><span data-stu-id="a1c59-121">Additionally, a `SortDirection` property indicates whether the data is to be sorted in ascending or descending order (if a user clicks a particular GridView field s header link twice in succession, the sort order is toggled).</span></span>

<span data-ttu-id="a1c59-122">当 GridView 绑定到其数据源控件时，将传递其`SortExpression`和`SortDirection`属性设置为数据源控件。</span><span class="sxs-lookup"><span data-stu-id="a1c59-122">When the GridView is bound to its data source control, it hands off its `SortExpression` and `SortDirection` properties to the data source control.</span></span> <span data-ttu-id="a1c59-123">数据源控件中检索数据，然后对它进行排序根据所提供`SortExpression`和`SortDirection`属性。</span><span class="sxs-lookup"><span data-stu-id="a1c59-123">The data source control retrieves the data and then sorts it according to the supplied `SortExpression` and `SortDirection` properties.</span></span> <span data-ttu-id="a1c59-124">排序后的数据，数据源控件将其返回给 GridView。</span><span class="sxs-lookup"><span data-stu-id="a1c59-124">After sorting the data, the data source control returns it to the GridView.</span></span>

<span data-ttu-id="a1c59-125">若要复制 DataList 或转发器控制此功能，我们必须：</span><span class="sxs-lookup"><span data-stu-id="a1c59-125">To replicate this functionality with the DataList or Repeater controls, we must:</span></span>

- <span data-ttu-id="a1c59-126">创建排序接口</span><span class="sxs-lookup"><span data-stu-id="a1c59-126">Create a sorting interface</span></span>
- <span data-ttu-id="a1c59-127">请记住要作为排序依据的数据字段，以及是否按升序或降序进行排序</span><span class="sxs-lookup"><span data-stu-id="a1c59-127">Remember the data field to sort by and whether to sort in ascending or descending order</span></span>
- <span data-ttu-id="a1c59-128">指示 ObjectDataSource 按特定的数据字段的数据进行排序</span><span class="sxs-lookup"><span data-stu-id="a1c59-128">Instruct the ObjectDataSource to sort the data by a particular data field</span></span>

<span data-ttu-id="a1c59-129">例如，我们将介绍这些步骤 3 和 4 中的三个任务。</span><span class="sxs-lookup"><span data-stu-id="a1c59-129">We'll tackle these three tasks in steps 3 and 4.</span></span> <span data-ttu-id="a1c59-130">接下来，我们将研究如何包括分页和排序中 DataList 或转发器的支持。</span><span class="sxs-lookup"><span data-stu-id="a1c59-130">Following that, we'll examine how to include both paging and sorting support in a DataList or Repeater.</span></span>

## <a name="step-2-displaying-the-products-in-a-repeater"></a><span data-ttu-id="a1c59-131">步骤 2： 在中继器中显示的产品</span><span class="sxs-lookup"><span data-stu-id="a1c59-131">Step 2: Displaying the Products in a Repeater</span></span>

<span data-ttu-id="a1c59-132">我们担心实现任何与排序相关的功能之前，让我们来开始通过列出的转发器控件中的产品。</span><span class="sxs-lookup"><span data-stu-id="a1c59-132">Before we worry about implementing any of the sorting-related functionality, let s start by listing the products in a Repeater control.</span></span> <span data-ttu-id="a1c59-133">首先打开`Sorting.aspx`页面`PagingSortingDataListRepeater`文件夹。</span><span class="sxs-lookup"><span data-stu-id="a1c59-133">Start by opening the `Sorting.aspx` page in the `PagingSortingDataListRepeater` folder.</span></span> <span data-ttu-id="a1c59-134">将重复器控件添加到 web 页上，设置其`ID`属性`SortableProducts`。</span><span class="sxs-lookup"><span data-stu-id="a1c59-134">Add a Repeater control to the web page, setting its `ID` property to `SortableProducts`.</span></span> <span data-ttu-id="a1c59-135">从转发器 s 智能标记，创建名为新 ObjectDataSource`ProductsDataSource`并将其从中检索数据配置`ProductsBLL`类的`GetProducts()`方法。</span><span class="sxs-lookup"><span data-stu-id="a1c59-135">From the Repeater s smart tag, create a new ObjectDataSource named `ProductsDataSource` and configure it to retrieve data from the `ProductsBLL` class s `GetProducts()` method.</span></span> <span data-ttu-id="a1c59-136">（无） 从下拉列表中插入、 更新和删除选项卡中选项的选择。</span><span class="sxs-lookup"><span data-stu-id="a1c59-136">Select the (None) option from the drop-down lists in the INSERT, UPDATE, and DELETE tabs.</span></span>


<span data-ttu-id="a1c59-137">[![创建 ObjectDataSource 并将其配置为使用 GetProductsAsPagedDataSource() 方法](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image2.png)](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image1.png)</span><span class="sxs-lookup"><span data-stu-id="a1c59-137">[![Create an ObjectDataSource and Configure it to Use the GetProductsAsPagedDataSource() Method](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image2.png)](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image1.png)</span></span>

<span data-ttu-id="a1c59-138">**图 1**： 创建对象数据源并将它配置为使用`GetProductsAsPagedDataSource()`方法 ([单击以查看实际尺寸的图像](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image3.png))</span><span class="sxs-lookup"><span data-stu-id="a1c59-138">**Figure 1**: Create an ObjectDataSource and Configure it to Use the `GetProductsAsPagedDataSource()` Method ([Click to view full-size image](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image3.png))</span></span>


<span data-ttu-id="a1c59-139">[![在更新中，INSERT、 设置下拉列表将列出和删除选项卡添加到 （无）](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image5.png)](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image4.png)</span><span class="sxs-lookup"><span data-stu-id="a1c59-139">[![Set the Drop-Down Lists in the UPDATE, INSERT, and DELETE tabs to (None)](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image5.png)](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image4.png)</span></span>

<span data-ttu-id="a1c59-140">**图 2**： 在更新中，INSERT、 设置下拉列表将列出和删除选项卡添加到 （无） ([单击以查看实际尺寸的图像](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image6.png))</span><span class="sxs-lookup"><span data-stu-id="a1c59-140">**Figure 2**: Set the Drop-Down Lists in the UPDATE, INSERT, and DELETE tabs to (None) ([Click to view full-size image](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image6.png))</span></span>


<span data-ttu-id="a1c59-141">与不同 DataList，与 Visual Studio 不会自动创建`ItemTemplate`转发器控件后将其绑定到数据源。</span><span class="sxs-lookup"><span data-stu-id="a1c59-141">Unlike with the DataList, Visual Studio does not automatically create an `ItemTemplate` for the Repeater control after binding it to a data source.</span></span> <span data-ttu-id="a1c59-142">此外，我们必须添加此`ItemTemplate`以声明方式，如中继器控件 s 智能标记缺少 DataList s 中找到编辑模板选项。</span><span class="sxs-lookup"><span data-stu-id="a1c59-142">Furthermore, we must add this `ItemTemplate` declaratively, as the Repeater control s smart tag lacks the Edit Templates option found in the DataList s.</span></span> <span data-ttu-id="a1c59-143">允许 s 使用相同`ItemTemplate`从前面的教程，其中显示产品的名称、 供应商和类别。</span><span class="sxs-lookup"><span data-stu-id="a1c59-143">Let s use the same `ItemTemplate` from the previous tutorial, which displayed the product s name, supplier, and category.</span></span>

<span data-ttu-id="a1c59-144">在添加后`ItemTemplate`，转发器和 ObjectDataSource s 声明性标记的外观应与以下类似：</span><span class="sxs-lookup"><span data-stu-id="a1c59-144">After adding the `ItemTemplate`, the Repeater and ObjectDataSource s declarative markup should look similar to the following:</span></span>


[!code-aspx[Main](sorting-data-in-a-datalist-or-repeater-control-cs/samples/sample1.aspx)]

<span data-ttu-id="a1c59-145">图 3 显示此页查看通过浏览器时。</span><span class="sxs-lookup"><span data-stu-id="a1c59-145">Figure 3 shows this page when viewed through a browser.</span></span>


<span data-ttu-id="a1c59-146">[![显示每个产品的名称、 供应商和类别](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image8.png)](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image7.png)</span><span class="sxs-lookup"><span data-stu-id="a1c59-146">[![Each Product s Name, Supplier, and Category is Displayed](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image8.png)](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image7.png)</span></span>

<span data-ttu-id="a1c59-147">**图 3**： 显示每个产品的名称、 供应商和类别 ([单击以查看实际尺寸的图像](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image9.png))</span><span class="sxs-lookup"><span data-stu-id="a1c59-147">**Figure 3**: Each Product s Name, Supplier, and Category is Displayed ([Click to view full-size image](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image9.png))</span></span>


## <a name="step-3-instructing-the-objectdatasource-to-sort-the-data"></a><span data-ttu-id="a1c59-148">步骤 3： 指示 ObjectDataSource 对数据进行排序</span><span class="sxs-lookup"><span data-stu-id="a1c59-148">Step 3: Instructing the ObjectDataSource to Sort the Data</span></span>

<span data-ttu-id="a1c59-149">若要排序的转发器中显示的数据，我们需要告知对数据进行排序所依据的排序表达式的对象数据源。</span><span class="sxs-lookup"><span data-stu-id="a1c59-149">To sort the data displayed in the Repeater, we need to inform the ObjectDataSource of the sort expression by which the data should be sorted.</span></span> <span data-ttu-id="a1c59-150">对象数据源中检索其数据之前，首先激发其[`Selecting`事件](https://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.objectdatasource.selecting.aspx)，这使我们需要指定排序表达式有机会。</span><span class="sxs-lookup"><span data-stu-id="a1c59-150">Before the ObjectDataSource retrieves its data, it first fires its [`Selecting` event](https://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.objectdatasource.selecting.aspx), which provides an opportunity for us to specify a sort expression.</span></span> <span data-ttu-id="a1c59-151">`Selecting`事件处理程序传递的类型对象[ `ObjectDataSourceSelectingEventArgs` ](https://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.objectdatasourceselectingeventargs.aspx)，其中有一个名为[ `Arguments` ](https://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.objectdatasourceselectingeventargs.arguments.aspx)类型的[ `DataSourceSelectArguments` ](https://msdn.microsoft.com/en-us/library/system.web.ui.datasourceselectarguments.aspx)。</span><span class="sxs-lookup"><span data-stu-id="a1c59-151">The `Selecting` event handler is passed an object of type [`ObjectDataSourceSelectingEventArgs`](https://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.objectdatasourceselectingeventargs.aspx), which has a property named [`Arguments`](https://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.objectdatasourceselectingeventargs.arguments.aspx) of type [`DataSourceSelectArguments`](https://msdn.microsoft.com/en-us/library/system.web.ui.datasourceselectarguments.aspx).</span></span> <span data-ttu-id="a1c59-152">`DataSourceSelectArguments`类旨在将与数据相关的请求的数据使用者从传递给数据源控件，并且包括[`SortExpression`属性](https://msdn.microsoft.com/en-us/library/system.web.ui.datasourceselectarguments.sortexpression.aspx)。</span><span class="sxs-lookup"><span data-stu-id="a1c59-152">The `DataSourceSelectArguments` class is designed to pass data-related requests from a consumer of data to the data source control, and includes a [`SortExpression` property](https://msdn.microsoft.com/en-us/library/system.web.ui.datasourceselectarguments.sortexpression.aspx).</span></span>

<span data-ttu-id="a1c59-153">若要将从 ASP.NET 页的排序信息传递给 ObjectDataSource，创建的事件处理程序`Selecting`事件并使用下面的代码：</span><span class="sxs-lookup"><span data-stu-id="a1c59-153">To pass sorting information from the ASP.NET page to the ObjectDataSource, create an event handler for the `Selecting` event and use the following code:</span></span>


[!code-csharp[Main](sorting-data-in-a-datalist-or-repeater-control-cs/samples/sample2.cs)]

<span data-ttu-id="a1c59-154">*SortExpression*值应分配要通过 （如 ProductName) 对数据进行排序的数据字段的名称。</span><span class="sxs-lookup"><span data-stu-id="a1c59-154">The *sortExpression* value should be assigned the name of the data field to sort the data by (such as ProductName ).</span></span> <span data-ttu-id="a1c59-155">没有任何排序方向相关的属性，因此如果你想要按降序对数据进行排序，将字符串追加 DESC 到*sortExpression* （如 ProductName DESC) 的值。</span><span class="sxs-lookup"><span data-stu-id="a1c59-155">There is no sort direction-related property, so if you want to sort the data in descending order, append the string DESC to the *sortExpression* value (such as ProductName DESC ).</span></span>

<span data-ttu-id="a1c59-156">请继续并尝试的一些不同的硬编码值*sortExpression*和浏览器中测试的结果。</span><span class="sxs-lookup"><span data-stu-id="a1c59-156">Go ahead and try some different hard-coded values for *sortExpression* and test the results in a browser.</span></span> <span data-ttu-id="a1c59-157">如图 4 所示，当使用作为 ProductName DESC *sortExpression*，按其名称按反向字母顺序排序的产品。</span><span class="sxs-lookup"><span data-stu-id="a1c59-157">As Figure 4 shows, when using ProductName DESC as the *sortExpression*, the products are sorted by their name in reverse alphabetical order.</span></span>


<span data-ttu-id="a1c59-158">[![按其名称按反向字母顺序排序的产品](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image11.png)](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image10.png)</span><span class="sxs-lookup"><span data-stu-id="a1c59-158">[![The Products are Sorted by their Name in Reverse Alphabetical Order](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image11.png)](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image10.png)</span></span>

<span data-ttu-id="a1c59-159">**图 4**： 按其名称按反向字母顺序排序的产品 ([单击以查看实际尺寸的图像](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image12.png))</span><span class="sxs-lookup"><span data-stu-id="a1c59-159">**Figure 4**: The Products are Sorted by their Name in Reverse Alphabetical Order ([Click to view full-size image](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image12.png))</span></span>


## <a name="step-4-creating-the-sorting-interface-and-remembering-the-sort-expression-and-direction"></a><span data-ttu-id="a1c59-160">步骤 4： 创建排序的接口，然后记住的排序表达式和方向</span><span class="sxs-lookup"><span data-stu-id="a1c59-160">Step 4: Creating the Sorting Interface and Remembering the Sort Expression and Direction</span></span>

<span data-ttu-id="a1c59-161">开启排序 GridView 中的支持将每个可排序字段 s 标头文本转换为 LinkButton，单击时，请相应地对数据。</span><span class="sxs-lookup"><span data-stu-id="a1c59-161">Turning on sorting support in the GridView converts each sortable field s header text into a LinkButton that, when clicked, sorts the data accordingly.</span></span> <span data-ttu-id="a1c59-162">此类的排序接口合理的 GridView，其中其整齐布局数据列中。</span><span class="sxs-lookup"><span data-stu-id="a1c59-162">Such a sorting interface makes sense for the GridView, where its data is neatly laid out in columns.</span></span> <span data-ttu-id="a1c59-163">对于 DataList 和转发器控件中，但是，不同的排序接口需要。</span><span class="sxs-lookup"><span data-stu-id="a1c59-163">For the DataList and Repeater controls, however, a different sorting interface is needed.</span></span> <span data-ttu-id="a1c59-164">一个通用的排序界面执行的数据 （而不是数据网格中），列表是提供数据可以排序所依据的字段的下拉列表。</span><span class="sxs-lookup"><span data-stu-id="a1c59-164">A common sorting interface for a list of data (as opposed to a grid of data), is a drop-down list that provides the fields by which the data can be sorted.</span></span> <span data-ttu-id="a1c59-165">允许 s 出于本教程中实现此类接口。</span><span class="sxs-lookup"><span data-stu-id="a1c59-165">Let s implement such an interface for this tutorial.</span></span>

<span data-ttu-id="a1c59-166">将上面的 DropDownList Web 控件添加`SortableProducts`中继器并设置其`ID`属性`SortBy`。</span><span class="sxs-lookup"><span data-stu-id="a1c59-166">Add a DropDownList Web control above the `SortableProducts` Repeater and set its `ID` property to `SortBy`.</span></span> <span data-ttu-id="a1c59-167">从属性窗口中，单击省略号以`Items`属性打开 ListItem 集合编辑器。</span><span class="sxs-lookup"><span data-stu-id="a1c59-167">From the Properties window, click the ellipses in the `Items` property to bring up the ListItem Collection Editor.</span></span> <span data-ttu-id="a1c59-168">添加`ListItem`s 的数据进行排序`ProductName`， `CategoryName`，和`SupplierName`字段。</span><span class="sxs-lookup"><span data-stu-id="a1c59-168">Add `ListItem` s to sort the data by the `ProductName`, `CategoryName`, and `SupplierName` fields.</span></span> <span data-ttu-id="a1c59-169">此外添加`ListItem`要按其名称按反向字母顺序排序的产品。</span><span class="sxs-lookup"><span data-stu-id="a1c59-169">Also add a `ListItem` to sort the products by their name in reverse alphabetical order.</span></span>

<span data-ttu-id="a1c59-170">`ListItem` `Text`属性可以设置为任何值 （如名称），但`Value`属性必须设置为 （如 ProductName) 的数据字段的名称。</span><span class="sxs-lookup"><span data-stu-id="a1c59-170">The `ListItem` `Text` properties can be set to any value (such as Name ), but the `Value` properties must be set to the name of the data field (such as ProductName ).</span></span> <span data-ttu-id="a1c59-171">若要按降序对结果进行排序，请将字符串 DESC 追加到 ProductName DESC 类似的数据字段名称。</span><span class="sxs-lookup"><span data-stu-id="a1c59-171">To sort the results in descending order, append the string DESC to the data field name, like ProductName DESC .</span></span>


![为每个可排序数据字段添加 ListItem](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image13.png)

<span data-ttu-id="a1c59-173">**图 5**： 添加`ListItem`为每个可排序数据字段</span><span class="sxs-lookup"><span data-stu-id="a1c59-173">**Figure 5**: Add a `ListItem` for Each of the Sortable Data Fields</span></span>


<span data-ttu-id="a1c59-174">最后，右侧的下拉列表中添加按钮 Web 控件。</span><span class="sxs-lookup"><span data-stu-id="a1c59-174">Finally, add a Button Web control to the right of the DropDownList.</span></span> <span data-ttu-id="a1c59-175">设置其`ID`到`RefreshRepeater`及其`Text`刷新属性。</span><span class="sxs-lookup"><span data-stu-id="a1c59-175">Set its `ID` to `RefreshRepeater` and its `Text` property to Refresh .</span></span>

<span data-ttu-id="a1c59-176">在创建后`ListItem`s 并添加刷新按钮，DropDownList 和按钮 s 声明性语法外观应与以下类似：</span><span class="sxs-lookup"><span data-stu-id="a1c59-176">After creating the `ListItem` s and adding the Refresh button, the DropDownList and Button s declarative syntax should look similar to the following:</span></span>


[!code-aspx[Main](sorting-data-in-a-datalist-or-repeater-control-cs/samples/sample3.aspx)]

<span data-ttu-id="a1c59-177">与完整的排序 DropDownList，我们接下来需要更新 ObjectDataSource s`Selecting`事件处理程序，使其使用所选`SortBy``ListItem`s`Value`而不是硬编码排序表达式的属性。</span><span class="sxs-lookup"><span data-stu-id="a1c59-177">With the sorting DropDownList complete, we next need to update the ObjectDataSource s `Selecting` event handler so that it uses the selected `SortBy``ListItem` s `Value` property as opposed to a hard-coded sort expression.</span></span>


[!code-csharp[Main](sorting-data-in-a-datalist-or-repeater-control-cs/samples/sample4.cs)]

<span data-ttu-id="a1c59-178">在第一次访问页时此点产品将最初按进行排序`ProductName`数据字段，因为它 s `SortBy` `ListItem`默认情况下选择 （请参阅图 6）。</span><span class="sxs-lookup"><span data-stu-id="a1c59-178">At this point when first visiting the page the products will initially be sorted by the `ProductName` data field, as it s the `SortBy` `ListItem` selected by default (see Figure 6).</span></span> <span data-ttu-id="a1c59-179">选择不同的排序如类别的选项和单击刷新将导致回发，并重新对数据进行排序的类别名称，如图 7 所示。</span><span class="sxs-lookup"><span data-stu-id="a1c59-179">Selecting a different sorting option such as Category and clicking Refresh will cause a postback and re-sort the data by the category name, as Figure 7 shows.</span></span>


<span data-ttu-id="a1c59-180">[![产品是最初按其名称排序](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image15.png)](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image14.png)</span><span class="sxs-lookup"><span data-stu-id="a1c59-180">[![The Products are Initially Sorted by their Name](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image15.png)](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image14.png)</span></span>

<span data-ttu-id="a1c59-181">**图 6**: 产品是最初按其名称 ([单击以查看实际尺寸的图像](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image16.png))</span><span class="sxs-lookup"><span data-stu-id="a1c59-181">**Figure 6**: The Products are Initially Sorted by their Name ([Click to view full-size image](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image16.png))</span></span>


<span data-ttu-id="a1c59-182">[![产品是现在按类别进行排序](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image18.png)](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image17.png)</span><span class="sxs-lookup"><span data-stu-id="a1c59-182">[![The Products are Now Sorted by Category](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image18.png)](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image17.png)</span></span>

<span data-ttu-id="a1c59-183">**图 7**: 产品不现在按类别进行排序 ([单击以查看实际尺寸的图像](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image19.png))</span><span class="sxs-lookup"><span data-stu-id="a1c59-183">**Figure 7**: The Products are Now Sorted by Category ([Click to view full-size image](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image19.png))</span></span>


> [!NOTE]
> <span data-ttu-id="a1c59-184">单击刷新按钮会导致自动重新排序，因为需要已禁用的转发器的视图状态，从而导致转发器重新绑定到其上每次回发的数据源的数据。</span><span class="sxs-lookup"><span data-stu-id="a1c59-184">Clicking the Refresh button causes the data to automatically be re-sorted because the Repeater s view state has been disabled, thereby causing the Repeater to rebind to its data source on every postback.</span></span> <span data-ttu-id="a1c59-185">如果你已留更改排序的转发器的视图状态启用，下拉列表获胜 t 排序顺序产生任何影响。</span><span class="sxs-lookup"><span data-stu-id="a1c59-185">If you ve left the Repeater s view state enabled, changing the sorting drop-down list won t have any affect on the sort order.</span></span> <span data-ttu-id="a1c59-186">若要解决此问题，创建的事件处理程序的刷新按钮 s`Click`事件和重新绑定到其数据源中继器 (通过调用中继器的`DataBind()`方法)。</span><span class="sxs-lookup"><span data-stu-id="a1c59-186">To remedy this, create an event handler for the Refresh Button s `Click` event and rebind the Repeater to its data source (by calling the Repeater s `DataBind()` method).</span></span>


## <a name="remembering-the-sort-expression-and-direction"></a><span data-ttu-id="a1c59-187">记住的排序表达式和方向</span><span class="sxs-lookup"><span data-stu-id="a1c59-187">Remembering the Sort Expression and Direction</span></span>

<span data-ttu-id="a1c59-188">在页面上相关联的非排序可能会发生回发，创建可排序 DataList 或转发器时它 s 命令性，跨回发记住的排序表达式和方向。</span><span class="sxs-lookup"><span data-stu-id="a1c59-188">When creating a sortable DataList or Repeater on a page where non-sort related postbacks may occur, it s imperative that the sort expression and direction be remembered across postbacks.</span></span> <span data-ttu-id="a1c59-189">例如，假设我们在本教程以包括与每个产品的删除按钮中更新转发器。</span><span class="sxs-lookup"><span data-stu-id="a1c59-189">For example, imagine that we updated the Repeater in this tutorial to include a Delete button with each product.</span></span> <span data-ttu-id="a1c59-190">当用户单击删除按钮 d 我们运行一些代码以删除所选的产品，然后重新绑定数据到转发器。</span><span class="sxs-lookup"><span data-stu-id="a1c59-190">When the user clicks the Delete button we d run some code to delete the selected product and then rebind the data to the Repeater.</span></span> <span data-ttu-id="a1c59-191">如果回发不会持续排序详细信息，在屏幕上显示的数据将恢复为原始的排序顺序。</span><span class="sxs-lookup"><span data-stu-id="a1c59-191">If the sort details are not persisted across postback, the data displayed on screen will revert to the original sort order.</span></span>

<span data-ttu-id="a1c59-192">对于本教程，DropDownList 隐式将保存排序表达式和方向在其视图状态为我们。</span><span class="sxs-lookup"><span data-stu-id="a1c59-192">For this tutorial, the DropDownList implicitly saves the sort expression and direction in its view state for us.</span></span> <span data-ttu-id="a1c59-193">如果我们已使用不同的排序接口一个，即 LinkButtons 提供各种排序选项 d 我们需要小心之间回发保留排序顺序。</span><span class="sxs-lookup"><span data-stu-id="a1c59-193">If we were using a different sorting interface one with, say, LinkButtons that provided the various sorting options we d need to take care to remember the sort order across postbacks.</span></span> <span data-ttu-id="a1c59-194">这可通过将排序参数存储在页面的视图状态，方法是包括排序参数，在查询字符串，或通过其他状态持久性方法。</span><span class="sxs-lookup"><span data-stu-id="a1c59-194">This could be accomplished by storing the sorting parameters in the page s view state, by including the sort parameter in the querystring, or through some other state persistence technique.</span></span>

<span data-ttu-id="a1c59-195">在本教程将来示例探索如何保留页面的视图状态中的排序详细信息。</span><span class="sxs-lookup"><span data-stu-id="a1c59-195">Future examples in this tutorial explore how to persist the sorting details in the page s view state.</span></span>

## <a name="step-5-adding-sorting-support-to-a-datalist-that-uses-default-paging"></a><span data-ttu-id="a1c59-196">步骤 5： 添加到使用默认分页 DataList 排序支持</span><span class="sxs-lookup"><span data-stu-id="a1c59-196">Step 5: Adding Sorting Support to a DataList that Uses Default Paging</span></span>

<span data-ttu-id="a1c59-197">在[前面教程](paging-report-data-in-a-datalist-or-repeater-control-cs.md)我们学习了如何实现使用 DataList 默认分页。</span><span class="sxs-lookup"><span data-stu-id="a1c59-197">In the [preceding tutorial](paging-report-data-in-a-datalist-or-repeater-control-cs.md) we examined how to implement default paging with a DataList.</span></span> <span data-ttu-id="a1c59-198">让我们来扩展此前面的示例包括分页的数据进行排序的功能。</span><span class="sxs-lookup"><span data-stu-id="a1c59-198">Let s extend this previous example to include the ability to sort the paged data.</span></span> <span data-ttu-id="a1c59-199">首先打开`SortingWithDefaultPaging.aspx`和`Paging.aspx`页`PagingSortingDataListRepeater`文件夹。</span><span class="sxs-lookup"><span data-stu-id="a1c59-199">Start by opening the `SortingWithDefaultPaging.aspx` and `Paging.aspx` pages in the `PagingSortingDataListRepeater` folder.</span></span> <span data-ttu-id="a1c59-200">从`Paging.aspx`页上，单击源按钮以查看页面 s 声明性标记。</span><span class="sxs-lookup"><span data-stu-id="a1c59-200">From the `Paging.aspx` page, click on the Source button to view the page s declarative markup.</span></span> <span data-ttu-id="a1c59-201">复制选定的文本 （请参阅图 8） 将其粘贴到的声明性标记`SortingWithDefaultPaging.aspx`之间`<asp:Content>`标记。</span><span class="sxs-lookup"><span data-stu-id="a1c59-201">Copy the selected text (see Figure 8) and paste it into the declarative markup of `SortingWithDefaultPaging.aspx` between the `<asp:Content>` tags.</span></span>


<span data-ttu-id="a1c59-202">[![复制中的声明性标记&lt;asp： 内容&gt;SortingWithDefaultPaging.aspx 从 Paging.aspx 标记](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image21.png)](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image20.png)</span><span class="sxs-lookup"><span data-stu-id="a1c59-202">[![Replicate the Declarative Markup in the &lt;asp:Content&gt; Tags from Paging.aspx to SortingWithDefaultPaging.aspx](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image21.png)](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image20.png)</span></span>

<span data-ttu-id="a1c59-203">**图 8**： 复制中的声明性标记`<asp:Content>`标记从`Paging.aspx`到`SortingWithDefaultPaging.aspx`([单击以查看实际尺寸的图像](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image22.png))</span><span class="sxs-lookup"><span data-stu-id="a1c59-203">**Figure 8**: Replicate the Declarative Markup in the `<asp:Content>` Tags from `Paging.aspx` to `SortingWithDefaultPaging.aspx` ([Click to view full-size image](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image22.png))</span></span>


<span data-ttu-id="a1c59-204">复制后的声明性的标记，将复制的方法和属性中的`Paging.aspx`页上的代码隐藏类的代码隐藏类`SortingWithDefaultPaging.aspx`。</span><span class="sxs-lookup"><span data-stu-id="a1c59-204">After copying the declarative markup, copy the methods and properties in the `Paging.aspx` page s code-behind class to the code-behind class for `SortingWithDefaultPaging.aspx`.</span></span> <span data-ttu-id="a1c59-205">接下来，花些时间查看`SortingWithDefaultPaging.aspx`在浏览器中的页。</span><span class="sxs-lookup"><span data-stu-id="a1c59-205">Next, take a moment to view the `SortingWithDefaultPaging.aspx` page in a browser.</span></span> <span data-ttu-id="a1c59-206">它应显示相同的功能和外观作为`Paging.aspx`。</span><span class="sxs-lookup"><span data-stu-id="a1c59-206">It should exhibit the same functionality and appearance as `Paging.aspx`.</span></span>

## <a name="enhancing-productsbll-to-include-a-default-paging-and-sorting-method"></a><span data-ttu-id="a1c59-207">增强 ProductsBLL 包括默认分页和排序方法</span><span class="sxs-lookup"><span data-stu-id="a1c59-207">Enhancing ProductsBLL to Include a Default Paging and Sorting Method</span></span>

<span data-ttu-id="a1c59-208">在以前的教程，我们创建了`GetProductsAsPagedDataSource(pageIndex, pageSize)`中的方法`ProductsBLL`类返回`PagedDataSource`对象。</span><span class="sxs-lookup"><span data-stu-id="a1c59-208">In the previous tutorial we created a `GetProductsAsPagedDataSource(pageIndex, pageSize)` method in the `ProductsBLL` class that returned a `PagedDataSource` object.</span></span> <span data-ttu-id="a1c59-209">这`PagedDataSource`对象已填入*所有*的产品 (通过 BLL s`GetProducts()`方法)，但对应于指定的那些记录时绑定到 DataList *pageIndex*和*pageSize*显示输入的参数。</span><span class="sxs-lookup"><span data-stu-id="a1c59-209">This `PagedDataSource` object was populated with *all* of the products (via the BLL s `GetProducts()` method), but when bound to the DataList only those records corresponding to the specified *pageIndex* and *pageSize* input parameters were displayed.</span></span>

<span data-ttu-id="a1c59-210">我们可以在本教程前面来添加通过指定排序表达式从 ObjectDataSource s 排序支持`Selecting`事件处理程序。</span><span class="sxs-lookup"><span data-stu-id="a1c59-210">Earlier in this tutorial we added sorting support by specifying the sort expression from the ObjectDataSource s `Selecting` event handler.</span></span> <span data-ttu-id="a1c59-211">这可以有效地工作 ObjectDataSource 时返回一个对象，可以进行排序，如`ProductsDataTable`返回`GetProducts()`方法。</span><span class="sxs-lookup"><span data-stu-id="a1c59-211">This works well when the ObjectDataSource is returned an object that can be sorted, like the `ProductsDataTable` returned by the `GetProducts()` method.</span></span> <span data-ttu-id="a1c59-212">但是，`PagedDataSource`返回对象`GetProductsAsPagedDataSource`方法不支持其内部数据源的排序。</span><span class="sxs-lookup"><span data-stu-id="a1c59-212">However, the `PagedDataSource` object returned by the `GetProductsAsPagedDataSource` method does not support sorting of its inner data source.</span></span> <span data-ttu-id="a1c59-213">相反，我们需要从返回对结果进行排序`GetProducts()`方法*之前*我们将其放入`PagedDataSource`。</span><span class="sxs-lookup"><span data-stu-id="a1c59-213">Instead, we need to sort the results returned from the `GetProducts()` method *before* we put it in the `PagedDataSource`.</span></span>

<span data-ttu-id="a1c59-214">若要实现此目的，创建中的新方法`ProductsBLL`类， `GetProductsSortedAsPagedDataSource(sortExpression, pageIndex, pageSize)`。</span><span class="sxs-lookup"><span data-stu-id="a1c59-214">To accomplish this, create a new method in the `ProductsBLL` class, `GetProductsSortedAsPagedDataSource(sortExpression, pageIndex, pageSize)`.</span></span> <span data-ttu-id="a1c59-215">若要进行排序`ProductsDataTable`返回`GetProducts()`方法，指定`Sort`其默认属性`DataTableView`:</span><span class="sxs-lookup"><span data-stu-id="a1c59-215">To sort the `ProductsDataTable` returned by the `GetProducts()` method, specify the `Sort` property of its default `DataTableView`:</span></span>


[!code-csharp[Main](sorting-data-in-a-datalist-or-repeater-control-cs/samples/sample5.cs)]

<span data-ttu-id="a1c59-216">`GetProductsSortedAsPagedDataSource`方法只会稍有不同从`GetProductsAsPagedDataSource`在前面的教程中创建的方法。</span><span class="sxs-lookup"><span data-stu-id="a1c59-216">The `GetProductsSortedAsPagedDataSource` method differs only slightly from the `GetProductsAsPagedDataSource` method created in the previous tutorial.</span></span> <span data-ttu-id="a1c59-217">具体而言，`GetProductsSortedAsPagedDataSource`接受其他输入的参数`sortExpression`并将此值赋给`Sort`属性`ProductDataTable`s `DefaultView`。</span><span class="sxs-lookup"><span data-stu-id="a1c59-217">In particular, `GetProductsSortedAsPagedDataSource` accepts an additional input parameter `sortExpression` and assigns this value to the `Sort` property of the `ProductDataTable` s `DefaultView`.</span></span> <span data-ttu-id="a1c59-218">几行代码更高版本，`PagedDataSource`对象 s 数据源分配`ProductDataTable`s `DefaultView`。</span><span class="sxs-lookup"><span data-stu-id="a1c59-218">A few lines of code later, the `PagedDataSource` object s DataSource is assigned the `ProductDataTable` s `DefaultView`.</span></span>

## <a name="calling-the-getproductssortedaspageddatasource-method-and-specifying-the-value-for-the-sortexpression-input-parameter"></a><span data-ttu-id="a1c59-219">调用 GetProductsSortedAsPagedDataSource 方法并指定 SortExpression 输入参数的值</span><span class="sxs-lookup"><span data-stu-id="a1c59-219">Calling the GetProductsSortedAsPagedDataSource Method and Specifying the Value for the SortExpression Input Parameter</span></span>

<span data-ttu-id="a1c59-220">与`GetProductsSortedAsPagedDataSource`方法完成下, 一步是为此参数提供值。</span><span class="sxs-lookup"><span data-stu-id="a1c59-220">With the `GetProductsSortedAsPagedDataSource` method complete, the next step is to provide the value for this parameter.</span></span> <span data-ttu-id="a1c59-221">在 ObjectDataSource`SortingWithDefaultPaging.aspx`当前被配置为调用`GetProductsAsPagedDataSource`方法，并通过其两个的两个输入参数传入`QueryStringParameters`，均`SelectParameters`集合。</span><span class="sxs-lookup"><span data-stu-id="a1c59-221">The ObjectDataSource in `SortingWithDefaultPaging.aspx` is currently configured to call the `GetProductsAsPagedDataSource` method and passes in the two input parameters through its two `QueryStringParameters`, which are specified in the `SelectParameters` collection.</span></span> <span data-ttu-id="a1c59-222">这两个`QueryStringParameters`指示的源`GetProductsAsPagedDataSource`方法 s *pageIndex*和*pageSize*参数来自 querystring 字段`pageIndex`和`pageSize`。</span><span class="sxs-lookup"><span data-stu-id="a1c59-222">These two `QueryStringParameters` indicate that the source for the `GetProductsAsPagedDataSource` method s *pageIndex* and *pageSize* parameters come from the querystring fields `pageIndex` and `pageSize`.</span></span>

<span data-ttu-id="a1c59-223">更新 ObjectDataSource s`SelectMethod`属性，以便它调用新`GetProductsSortedAsPagedDataSource`方法。</span><span class="sxs-lookup"><span data-stu-id="a1c59-223">Update the ObjectDataSource s `SelectMethod` property so that it invokes the new `GetProductsSortedAsPagedDataSource` method.</span></span> <span data-ttu-id="a1c59-224">然后，添加一个新`QueryStringParameter`以便*sortExpression*从 querystring 字段访问输入的参数`sortExpression`。</span><span class="sxs-lookup"><span data-stu-id="a1c59-224">Then, add a new `QueryStringParameter` so that the *sortExpression* input parameter is accessed from the querystring field `sortExpression`.</span></span> <span data-ttu-id="a1c59-225">设置`QueryStringParameter`s`DefaultValue`为产品名称。</span><span class="sxs-lookup"><span data-stu-id="a1c59-225">Set the `QueryStringParameter` s `DefaultValue` to ProductName .</span></span>

<span data-ttu-id="a1c59-226">这些更改后的 ObjectDataSource s 声明性标记应如下所示：</span><span class="sxs-lookup"><span data-stu-id="a1c59-226">After these changes, the ObjectDataSource s declarative markup should look like:</span></span>


[!code-aspx[Main](sorting-data-in-a-datalist-or-repeater-control-cs/samples/sample6.aspx)]

<span data-ttu-id="a1c59-227">此时，`SortingWithDefaultPaging.aspx`页将按字母顺序排序其结果，按产品名称 （请参阅图 9）。</span><span class="sxs-lookup"><span data-stu-id="a1c59-227">At this point, the `SortingWithDefaultPaging.aspx` page will sort its results alphabetically by the product name (see Figure 9).</span></span> <span data-ttu-id="a1c59-228">这是因为，默认情况下，值为产品名称中作为传递`GetProductsSortedAsPagedDataSource`方法 s *sortExpression*参数。</span><span class="sxs-lookup"><span data-stu-id="a1c59-228">This is because, by default, a value of ProductName is passed in as the `GetProductsSortedAsPagedDataSource` method s *sortExpression* parameter.</span></span>


<span data-ttu-id="a1c59-229">[![默认情况下，结果按产品名称排序](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image24.png)](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image23.png)</span><span class="sxs-lookup"><span data-stu-id="a1c59-229">[![By Default, the Results are Sorted by ProductName](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image24.png)](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image23.png)</span></span>

<span data-ttu-id="a1c59-230">**图 9**： 通过默认情况下，对结果进行排序的`ProductName`([单击以查看实际尺寸的图像](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image25.png))</span><span class="sxs-lookup"><span data-stu-id="a1c59-230">**Figure 9**: By Default, the Results are Sorted by `ProductName` ([Click to view full-size image](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image25.png))</span></span>


<span data-ttu-id="a1c59-231">如果你手动添加`sortExpression`querystring 字段，如`SortingWithDefaultPaging.aspx?sortExpression=CategoryName`结果将排序由指定`sortExpression`。</span><span class="sxs-lookup"><span data-stu-id="a1c59-231">If you manually add a `sortExpression` querystring field such as `SortingWithDefaultPaging.aspx?sortExpression=CategoryName` the results will be sorted by the specified `sortExpression`.</span></span> <span data-ttu-id="a1c59-232">但是，这`sortExpression`参数未包含在查询字符串，将移至另一页数据时。</span><span class="sxs-lookup"><span data-stu-id="a1c59-232">However, this `sortExpression` parameter is not included in the querystring when moving to a different page of data.</span></span> <span data-ttu-id="a1c59-233">事实上，在下一步或上一次页上单击按钮的采用我们回`Paging.aspx`！</span><span class="sxs-lookup"><span data-stu-id="a1c59-233">In fact, clicking on the Next or Last page buttons takes us back to `Paging.aspx`!</span></span> <span data-ttu-id="a1c59-234">此外，在该处 s 当前未排序的接口。</span><span class="sxs-lookup"><span data-stu-id="a1c59-234">Furthermore, there s currently no sorting interface.</span></span> <span data-ttu-id="a1c59-235">用户可以更改分页的数据的排序顺序的唯一方法是通过直接操作查询字符串。</span><span class="sxs-lookup"><span data-stu-id="a1c59-235">The only way a user can change the sort order of the paged data is by manipulating the querystring directly.</span></span>

## <a name="creating-the-sorting-interface"></a><span data-ttu-id="a1c59-236">创建排序接口</span><span class="sxs-lookup"><span data-stu-id="a1c59-236">Creating the Sorting Interface</span></span>

<span data-ttu-id="a1c59-237">我们首先需要更新`RedirectUser`方法将向用户发送`SortingWithDefaultPaging.aspx`(而不是`Paging.aspx`)，它包括`sortExpression`中查询字符串值。</span><span class="sxs-lookup"><span data-stu-id="a1c59-237">We first need to update the `RedirectUser` method to send the user to `SortingWithDefaultPaging.aspx` (instead of `Paging.aspx`) and to include the `sortExpression` value in the querystring.</span></span> <span data-ttu-id="a1c59-238">我们还应添加只读的页级名为`SortExpression`属性。</span><span class="sxs-lookup"><span data-stu-id="a1c59-238">We should also add a read-only, page-level named `SortExpression` property.</span></span> <span data-ttu-id="a1c59-239">此属性，类似于`PageIndex`和`PageSize`在前面的教程中, 创建的属性返回的值`sortExpression`querystring 字段如果它存在，并且默认值 （产品名称)，否则。</span><span class="sxs-lookup"><span data-stu-id="a1c59-239">This property, similar to the `PageIndex` and `PageSize` properties created in the previous tutorial, returns the value of the `sortExpression` querystring field if it exists, and the default value ( ProductName ) otherwise.</span></span>

<span data-ttu-id="a1c59-240">当前`RedirectUser`方法接受仅单个输入的参数，显示的页的索引。</span><span class="sxs-lookup"><span data-stu-id="a1c59-240">Currently the `RedirectUser` method accepts only a single input parameter the index of the page to display.</span></span> <span data-ttu-id="a1c59-241">但是，可能有的时候我们想要将用户重定向到特定页使用查询字符串中指定的新增功能以外的排序表达式的数据。</span><span class="sxs-lookup"><span data-stu-id="a1c59-241">However, there may be times when we want to redirect the user to a particular page of data using a sort expression other than what s specified in the querystring.</span></span> <span data-ttu-id="a1c59-242">在稍后我们将创建此页上，将包括一系列按钮 Web 控件的数据进行排序的指定列的排序接口。</span><span class="sxs-lookup"><span data-stu-id="a1c59-242">In a moment we'll create the sorting interface for this page, which will include a series of Button Web controls for sorting the data by a specified column.</span></span> <span data-ttu-id="a1c59-243">单击这些按钮之一时，我们想要传递相应的排序表达式值中将用户重定向。</span><span class="sxs-lookup"><span data-stu-id="a1c59-243">When one of those Buttons is clicked, we want to redirect the user passing in the appropriate sort expression value.</span></span> <span data-ttu-id="a1c59-244">若要提供此功能，创建两个版本的`RedirectUser`方法。</span><span class="sxs-lookup"><span data-stu-id="a1c59-244">To provide this functionality, create two versions of the `RedirectUser` method.</span></span> <span data-ttu-id="a1c59-245">第一个应接受只页索引显示，而第二个接受的页索引和排序表达式。</span><span class="sxs-lookup"><span data-stu-id="a1c59-245">The first one should accept just the page index to display, while the second one accepts the page index and sort expression.</span></span>


[!code-csharp[Main](sorting-data-in-a-datalist-or-repeater-control-cs/samples/sample7.cs)]

<span data-ttu-id="a1c59-246">在本教程中的第一个示例，我们创建使用 DropDownList 排序接口。</span><span class="sxs-lookup"><span data-stu-id="a1c59-246">In the first example in this tutorial, we created a sorting interface using a DropDownList.</span></span> <span data-ttu-id="a1c59-247">对于此示例中，让 s 使用位于上方 DataList 一个排序的三个按钮 Web 控件`ProductName`、 一个为`CategoryName`，和一个用于`SupplierName`。</span><span class="sxs-lookup"><span data-stu-id="a1c59-247">For this example, let s use three Button Web controls positioned above the DataList one for sorting by `ProductName`, one for `CategoryName`, and one for `SupplierName`.</span></span> <span data-ttu-id="a1c59-248">添加三个按钮 Web 控件，设置其`ID`和`Text`属性相应地：</span><span class="sxs-lookup"><span data-stu-id="a1c59-248">Add the three Button Web controls, setting their `ID` and `Text` properties appropriately:</span></span>


[!code-aspx[Main](sorting-data-in-a-datalist-or-repeater-control-cs/samples/sample8.aspx)]

<span data-ttu-id="a1c59-249">接下来，创建`Click`每个事件处理程序。</span><span class="sxs-lookup"><span data-stu-id="a1c59-249">Next, create a `Click` event handler for each.</span></span> <span data-ttu-id="a1c59-250">事件处理程序应调用`RedirectUser`方法，将用户返回到使用适当的排序表达式的第一页。</span><span class="sxs-lookup"><span data-stu-id="a1c59-250">The event handlers should call the `RedirectUser` method, returning the user to the first page using the appropriate sort expression.</span></span>


[!code-csharp[Main](sorting-data-in-a-datalist-or-repeater-control-cs/samples/sample9.cs)]

<span data-ttu-id="a1c59-251">当第一次访问该页面，对数据进行排序按产品名称按字母顺序 （回头参考图 9 中）。</span><span class="sxs-lookup"><span data-stu-id="a1c59-251">When first visiting the page, the data is sorted by the product name alphabetically (refer back to Figure 9).</span></span> <span data-ttu-id="a1c59-252">单击下一步按钮以前进到数据的第二个页面，然后单击类别按钮的排序。</span><span class="sxs-lookup"><span data-stu-id="a1c59-252">Click the Next button to advance to the second page of data and then click the Sort by Category button.</span></span> <span data-ttu-id="a1c59-253">这将我们返回到按类别名称排序的数据的第一页 （请参阅图 10）。</span><span class="sxs-lookup"><span data-stu-id="a1c59-253">This returns us to the first page of data, sorted by category name (see Figure 10).</span></span> <span data-ttu-id="a1c59-254">同样，供应商按钮单击排序对从数据的第一页开始的供应商的数据进行排序。</span><span class="sxs-lookup"><span data-stu-id="a1c59-254">Likewise, clicking the Sort by Supplier button sorts the data by supplier starting from the first page of data.</span></span> <span data-ttu-id="a1c59-255">因为通过分页的数据，将记住排序选项。</span><span class="sxs-lookup"><span data-stu-id="a1c59-255">The sort choice is remembered as the data is paged through.</span></span> <span data-ttu-id="a1c59-256">图 11 显示后按类别排序，然后然后转到数据的第 13 个页的页。</span><span class="sxs-lookup"><span data-stu-id="a1c59-256">Figure 11 shows the page after sorting by category and then advancing to the thirteenth page of data.</span></span>


<span data-ttu-id="a1c59-257">[![按类别排序的产品](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image27.png)](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image26.png)</span><span class="sxs-lookup"><span data-stu-id="a1c59-257">[![The Products are Sorted by Category](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image27.png)](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image26.png)</span></span>

<span data-ttu-id="a1c59-258">**图 10**： 按类别排序的产品 ([单击以查看实际尺寸的图像](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image28.png))</span><span class="sxs-lookup"><span data-stu-id="a1c59-258">**Figure 10**: The Products are Sorted by Category ([Click to view full-size image](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image28.png))</span></span>


<span data-ttu-id="a1c59-259">[![排序表达式是记住分页通过数据时](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image30.png)](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image29.png)</span><span class="sxs-lookup"><span data-stu-id="a1c59-259">[![The Sort Expression is Remembered When Paging Through the Data](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image30.png)](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image29.png)</span></span>

<span data-ttu-id="a1c59-260">**图 11**: 排序表达式是记住分页通过数据时 ([单击以查看实际尺寸的图像](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image31.png))</span><span class="sxs-lookup"><span data-stu-id="a1c59-260">**Figure 11**: The Sort Expression is Remembered When Paging Through the Data ([Click to view full-size image](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image31.png))</span></span>


## <a name="step-6-custom-paging-through-records-in-a-repeater"></a><span data-ttu-id="a1c59-261">步骤 6： 通过中继器中记录的自定义分页</span><span class="sxs-lookup"><span data-stu-id="a1c59-261">Step 6: Custom Paging Through Records in a Repeater</span></span>

<span data-ttu-id="a1c59-262">DataList 示例检查在步骤中，通过使用效率低下的默认分页技术其数据的 5 个页面。</span><span class="sxs-lookup"><span data-stu-id="a1c59-262">The DataList example examined in step 5 pages through its data using the inefficient default paging technique.</span></span> <span data-ttu-id="a1c59-263">当足够大，大量数据进行分页时, 是命令性，使用自定义分页。</span><span class="sxs-lookup"><span data-stu-id="a1c59-263">When paging through sufficiently large amounts of data, it is imperative that custom paging be used.</span></span> <span data-ttu-id="a1c59-264">返回[高效地分页通过大型金额的数据](../paging-and-sorting/efficiently-paging-through-large-amounts-of-data-cs.md)和[排序自定义分页数据](../paging-and-sorting/sorting-custom-paged-data-cs.md)教程，我们将检查中为 BLL 默认和自定义分页和创建的方法的区别利用自定义分页和排序自定义分页的数据。</span><span class="sxs-lookup"><span data-stu-id="a1c59-264">Back in the [Efficiently Paging Through Large Amounts of Data](../paging-and-sorting/efficiently-paging-through-large-amounts-of-data-cs.md) and [Sorting Custom Paged Data](../paging-and-sorting/sorting-custom-paged-data-cs.md) tutorials, we examined the differences between default and custom paging and created methods in the BLL for utilizing custom paging and sorting custom paged data.</span></span> <span data-ttu-id="a1c59-265">具体而言，在这些两个前面的教程，我们添加到以下三种方法`ProductsBLL`类：</span><span class="sxs-lookup"><span data-stu-id="a1c59-265">In particular, in these two previous tutorials we added the following three methods to the `ProductsBLL` class:</span></span>

- <span data-ttu-id="a1c59-266">`GetProductsPaged(startRowIndex, maximumRows)`返回开始记录的特定子集*值*和不超过*值*。</span><span class="sxs-lookup"><span data-stu-id="a1c59-266">`GetProductsPaged(startRowIndex, maximumRows)` returns a particular subset of records starting at *startRowIndex* and not exceeding *maximumRows*.</span></span>
- <span data-ttu-id="a1c59-267">`GetProductsPagedAndSorted(sortExpression, startRowIndex, maximumRows)`返回按指定的记录的特定子集*sortExpression*输入的参数。</span><span class="sxs-lookup"><span data-stu-id="a1c59-267">`GetProductsPagedAndSorted(sortExpression, startRowIndex, maximumRows)` returns a particular subset of records sorted by the specified *sortExpression* input parameter.</span></span>
- <span data-ttu-id="a1c59-268">`TotalNumberOfProducts()`提供了中的记录的总数`Products`数据库表。</span><span class="sxs-lookup"><span data-stu-id="a1c59-268">`TotalNumberOfProducts()` provides the total number of records in the `Products` database table.</span></span>

<span data-ttu-id="a1c59-269">这些方法可以用于有效地页和排序通过使用 DataList 或转发器控件的数据。</span><span class="sxs-lookup"><span data-stu-id="a1c59-269">These methods can be used to efficiently page and sort through data using a DataList or Repeater control.</span></span> <span data-ttu-id="a1c59-270">为了说明这一点，让我们来开始通过使用自定义分页支持; 创建重复器控件然后，我们将添加排序功能。</span><span class="sxs-lookup"><span data-stu-id="a1c59-270">To illustrate this, let s start by creating a Repeater control with custom paging support; we'll then add sorting capabilities.</span></span>

<span data-ttu-id="a1c59-271">打开`SortingWithCustomPaging.aspx`页面`PagingSortingDataListRepeater`文件夹并将转发器添加到页上，设置其`ID`属性`Products`。</span><span class="sxs-lookup"><span data-stu-id="a1c59-271">Open the `SortingWithCustomPaging.aspx` page in the `PagingSortingDataListRepeater` folder and add a Repeater to the page, setting its `ID` property to `Products`.</span></span> <span data-ttu-id="a1c59-272">从转发器 s 智能标记，创建名为新 ObjectDataSource `ProductsDataSource`。</span><span class="sxs-lookup"><span data-stu-id="a1c59-272">From the Repeater s smart tag, create a new ObjectDataSource named `ProductsDataSource`.</span></span> <span data-ttu-id="a1c59-273">将其配置为选择从其数据`ProductsBLL`类的`GetProductsPaged`方法。</span><span class="sxs-lookup"><span data-stu-id="a1c59-273">Configure it to select its data from the `ProductsBLL` class s `GetProductsPaged` method.</span></span>


<span data-ttu-id="a1c59-274">[![配置对象数据源以使用 ProductsBLL 类的 GetProductsPaged 方法](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image33.png)](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image32.png)</span><span class="sxs-lookup"><span data-stu-id="a1c59-274">[![Configure the ObjectDataSource to Use the ProductsBLL Class s GetProductsPaged Method](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image33.png)](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image32.png)</span></span>

<span data-ttu-id="a1c59-275">**图 12**： 配置使用 ObjectDataSource`ProductsBLL`类 s`GetProductsPaged`方法 ([单击以查看实际尺寸的图像](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image34.png))</span><span class="sxs-lookup"><span data-stu-id="a1c59-275">**Figure 12**: Configure the ObjectDataSource to Use the `ProductsBLL` Class s `GetProductsPaged` Method ([Click to view full-size image](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image34.png))</span></span>


<span data-ttu-id="a1c59-276">在更新中，INSERT、 设置的下拉列表并删除选项卡添加到 （无），然后单击下一步按钮。</span><span class="sxs-lookup"><span data-stu-id="a1c59-276">Set the drop-down lists in the UPDATE, INSERT, and DELETE tabs to (None) and then click the Next button.</span></span> <span data-ttu-id="a1c59-277">配置数据源向导现在将提示提供的源`GetProductsPaged`方法 s*值*和*值*输入参数。</span><span class="sxs-lookup"><span data-stu-id="a1c59-277">The Configure Data Source wizard now prompts for the sources of the `GetProductsPaged` method s *startRowIndex* and *maximumRows* input parameters.</span></span> <span data-ttu-id="a1c59-278">在现实中，将忽略这些输入的参数。</span><span class="sxs-lookup"><span data-stu-id="a1c59-278">In actuality, these input parameters are ignored.</span></span> <span data-ttu-id="a1c59-279">相反，*值*和*值*值将通过传递在`Arguments`中 ObjectDataSource 的属性`Selecting`事件处理程序，就像我们指定的方式*sortExpression*在此教程 s 第一个演示。</span><span class="sxs-lookup"><span data-stu-id="a1c59-279">Instead, the *startRowIndex* and *maximumRows* values will be passed in through the `Arguments` property in the ObjectDataSource s `Selecting` event handler, just like how we specified the *sortExpression* in this tutorial s first demo.</span></span> <span data-ttu-id="a1c59-280">因此，将参数源保留在无设置向导中的下拉列表。</span><span class="sxs-lookup"><span data-stu-id="a1c59-280">Therefore, leave the parameter source drop-down lists in the wizard set at None .</span></span>


<span data-ttu-id="a1c59-281">[![将参数源设置保留为无](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image36.png)](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image35.png)</span><span class="sxs-lookup"><span data-stu-id="a1c59-281">[![Leave the Parameter Sources Set to None](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image36.png)](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image35.png)</span></span>

<span data-ttu-id="a1c59-282">**图 13**： 将保留为无参数的源设置 ([单击以查看实际尺寸的图像](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image37.png))</span><span class="sxs-lookup"><span data-stu-id="a1c59-282">**Figure 13**: Leave the Parameter Sources Set to None ([Click to view full-size image](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image37.png))</span></span>


> [!NOTE]
> <span data-ttu-id="a1c59-283">执行*不*设置 ObjectDataSource s`EnablePaging`属性`true`。</span><span class="sxs-lookup"><span data-stu-id="a1c59-283">Do *not* set the ObjectDataSource s `EnablePaging` property to `true`.</span></span> <span data-ttu-id="a1c59-284">这将导致对象数据源，将自动包含其自己*值*和*值*参数`SelectMethod`s 现有参数列表。</span><span class="sxs-lookup"><span data-stu-id="a1c59-284">This will cause the ObjectDataSource to automatically include its own *startRowIndex* and *maximumRows* parameters to the `SelectMethod` s existing parameter list.</span></span> <span data-ttu-id="a1c59-285">`EnablePaging`绑定自定义分页到 GridView，说明如何或 FormView 控件的数据，因为这些控件需要从 ObjectDataSource s 某些行为时有用属性只能在`EnablePaging`属性是`true`。</span><span class="sxs-lookup"><span data-stu-id="a1c59-285">The `EnablePaging` property is useful when binding custom paged data to a GridView, DetailsView, or FormView control because these controls expect certain behavior from the ObjectDataSource that s only available when `EnablePaging` property is `true`.</span></span> <span data-ttu-id="a1c59-286">由于我们必须手动添加对 DataList 和转发器的分页支持，使此属性设置为`false`（默认值），因为我们将在所需的功能直接在我们的 ASP.NET 页面内烘烤糕点。</span><span class="sxs-lookup"><span data-stu-id="a1c59-286">Since we have to manually add the paging support for the DataList and Repeater, leave this property set to `false` (the default), as we'll bake in the needed functionality directly within our ASP.NET page.</span></span>


<span data-ttu-id="a1c59-287">最后，可以定义中继器的`ItemTemplate`以便显示产品的名称、 类别和供应商。</span><span class="sxs-lookup"><span data-stu-id="a1c59-287">Finally, define the Repeater s `ItemTemplate` so that the product s name, category, and supplier are shown.</span></span> <span data-ttu-id="a1c59-288">这些更改后的转发器和 ObjectDataSource s 声明性语法应看起来类似以下：</span><span class="sxs-lookup"><span data-stu-id="a1c59-288">After these changes, the Repeater and ObjectDataSource s declarative syntax should look similar to the following:</span></span>


[!code-aspx[Main](sorting-data-in-a-datalist-or-repeater-control-cs/samples/sample10.aspx)]

<span data-ttu-id="a1c59-289">花一些时间，请访问通过浏览器页面，并记下会返回任何记录。</span><span class="sxs-lookup"><span data-stu-id="a1c59-289">Take a moment to visit the page through a browser and note that no records are returned.</span></span> <span data-ttu-id="a1c59-290">这是因为我们已有待指定*值*和*值*参数值; 因此，为 0 的值正在传递两个。</span><span class="sxs-lookup"><span data-stu-id="a1c59-290">This is because we ve yet to specify the *startRowIndex* and *maximumRows* parameter values; therefore, values of 0 are being passed in for both.</span></span> <span data-ttu-id="a1c59-291">若要指定这些值，请创建一个事件处理程序 ObjectDataSource 的`Selecting`事件和设置这些参数值以编程方式为硬编码值为 0，5，分别：</span><span class="sxs-lookup"><span data-stu-id="a1c59-291">To specify these values, create an event handler for the ObjectDataSource s `Selecting` event and set these parameters values programmatically to hard-coded values of 0 and 5, respectively:</span></span>


[!code-csharp[Main](sorting-data-in-a-datalist-or-repeater-control-cs/samples/sample11.cs)]

<span data-ttu-id="a1c59-292">进行此更改后，该页面，通过浏览器，查看时显示的前五个产品。</span><span class="sxs-lookup"><span data-stu-id="a1c59-292">With this change, the page, when viewed through a browser, shows the first five products.</span></span>


<span data-ttu-id="a1c59-293">[![显示第一个 5 个记录](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image39.png)](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image38.png)</span><span class="sxs-lookup"><span data-stu-id="a1c59-293">[![The First Five Records are Displayed](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image39.png)](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image38.png)</span></span>

<span data-ttu-id="a1c59-294">**图 14**： 显示第一个 5 个记录 ([单击以查看实际尺寸的图像](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image40.png))</span><span class="sxs-lookup"><span data-stu-id="a1c59-294">**Figure 14**: The First Five Records are Displayed ([Click to view full-size image](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image40.png))</span></span>


> [!NOTE]
> <span data-ttu-id="a1c59-295">图 14 中列出的产品发生这种情况要按产品名称排序，因为`GetProductsPaged`执行高效的自定义分页查询的存储的过程通过对结果进行排序`ProductName`。</span><span class="sxs-lookup"><span data-stu-id="a1c59-295">The products listed in Figure 14 happen to be sorted by product name because the `GetProductsPaged` stored procedure that performs the efficient custom paging query orders the results by `ProductName`.</span></span>


<span data-ttu-id="a1c59-296">为了允许用户浏览所有页面，我们需要跟踪开始的行索引和最大行数的并跨回发记住这些值。</span><span class="sxs-lookup"><span data-stu-id="a1c59-296">In order to allow the user to step through the pages, we need to keep track of the start row index and maximum rows and remember these values across postbacks.</span></span> <span data-ttu-id="a1c59-297">在默认的分页示例中我们使用，用于查询字符串字段保留这些值;对于本演示，让我们来将此页面的视图状态信息保留。</span><span class="sxs-lookup"><span data-stu-id="a1c59-297">In the default paging example we used querystring fields to persist these values; for this demo, let s persist this information in the page s view state.</span></span> <span data-ttu-id="a1c59-298">创建以下两个属性：</span><span class="sxs-lookup"><span data-stu-id="a1c59-298">Create the following two properties:</span></span>


[!code-csharp[Main](sorting-data-in-a-datalist-or-repeater-control-cs/samples/sample12.cs)]

<span data-ttu-id="a1c59-299">接下来，更新选择事件处理程序中的代码，以便它使用`StartRowIndex`和`MaximumRows`而不是 0 和 5 的硬编码值的属性：</span><span class="sxs-lookup"><span data-stu-id="a1c59-299">Next, update the code in the Selecting event handler so that it uses the `StartRowIndex` and `MaximumRows` properties instead of the hard-coded values of 0 and 5:</span></span>


[!code-csharp[Main](sorting-data-in-a-datalist-or-repeater-control-cs/samples/sample13.cs)]

<span data-ttu-id="a1c59-300">此时我们的页面仍将显示的前五个记录为止。</span><span class="sxs-lookup"><span data-stu-id="a1c59-300">At this point our page still shows just the first five records.</span></span> <span data-ttu-id="a1c59-301">但是，对于就地情况下，这些属性，我们重新已准备好创建我们分页的接口。</span><span class="sxs-lookup"><span data-stu-id="a1c59-301">However, with these properties in place, we re ready to create our paging interface.</span></span>

## <a name="adding-the-paging-interface"></a><span data-ttu-id="a1c59-302">添加分页接口</span><span class="sxs-lookup"><span data-stu-id="a1c59-302">Adding the Paging Interface</span></span>

<span data-ttu-id="a1c59-303">让的 s 使用相同的第一个、 上一步、 下一步，上次分页接口用于默认分页示例，包括在查看显示哪些页数据的控件标签 Web 和存在多少总页数。</span><span class="sxs-lookup"><span data-stu-id="a1c59-303">Let s use the same First, Previous, Next, Last paging interface used in the default paging example, including the Label Web control that displays what page of data is being viewed and how many total pages exist.</span></span> <span data-ttu-id="a1c59-304">添加四个按钮 Web 控件和转发器下方的标签。</span><span class="sxs-lookup"><span data-stu-id="a1c59-304">Add the four Button Web controls and Label below the Repeater.</span></span>


[!code-aspx[Main](sorting-data-in-a-datalist-or-repeater-control-cs/samples/sample14.aspx)]

<span data-ttu-id="a1c59-305">接下来，创建`Click`的四个按钮的事件处理程序。</span><span class="sxs-lookup"><span data-stu-id="a1c59-305">Next, create `Click` event handlers for the four Buttons.</span></span> <span data-ttu-id="a1c59-306">单击这些按钮之一时，我们需要更新`StartRowIndex`和重新绑定数据到转发器。</span><span class="sxs-lookup"><span data-stu-id="a1c59-306">When one of these Buttons is clicked, we need to update the `StartRowIndex` and rebind the data to the Repeater.</span></span> <span data-ttu-id="a1c59-307">第一个、 上一步，和下一步按钮的代码非常简单，但对于最后一个按钮如何执行我们确定数据的最后一页的起始行索引？</span><span class="sxs-lookup"><span data-stu-id="a1c59-307">The code for the First, Previous, and Next buttons is simple enough, but for the Last button how do we determine the start row index for the last page of data?</span></span> <span data-ttu-id="a1c59-308">若要计算此索引以及能够确定是否应启用下一步和最后一个按钮我们需要了解总共多少条记录通过正在通过寻呼发送。</span><span class="sxs-lookup"><span data-stu-id="a1c59-308">To compute this index as well as being able to determine whether the Next and Last buttons should be enabled we need to know how many records in total are being paged through.</span></span> <span data-ttu-id="a1c59-309">我们可以通过调用确定`ProductsBLL`类的`TotalNumberOfProducts()`方法。</span><span class="sxs-lookup"><span data-stu-id="a1c59-309">We can determine this by calling the `ProductsBLL` class s `TotalNumberOfProducts()` method.</span></span> <span data-ttu-id="a1c59-310">允许 s 创建名为的只读的、 页级属性`TotalRowCount`返回的结果`TotalNumberOfProducts()`方法：</span><span class="sxs-lookup"><span data-stu-id="a1c59-310">Let s create a read-only, page-level property named `TotalRowCount` that returns the results of the `TotalNumberOfProducts()` method:</span></span>


[!code-csharp[Main](sorting-data-in-a-datalist-or-repeater-control-cs/samples/sample15.cs)]

<span data-ttu-id="a1c59-311">使用此属性，我们现在可以确定最后一个页面的开始行索引。</span><span class="sxs-lookup"><span data-stu-id="a1c59-311">With this property we can now determine the last page s start row index.</span></span> <span data-ttu-id="a1c59-312">具体而言，它 s 的整数结果的`TotalRowCount`减 1 除以`MaximumRows`，再乘以`MaximumRows`。</span><span class="sxs-lookup"><span data-stu-id="a1c59-312">Specifically, it s the integer result of the `TotalRowCount` minus 1 divided by `MaximumRows`, multiplied by `MaximumRows`.</span></span> <span data-ttu-id="a1c59-313">现在，我们可以编写`Click`四个分页接口按钮的事件处理程序：</span><span class="sxs-lookup"><span data-stu-id="a1c59-313">We can now write the `Click` event handlers for the four paging interface buttons:</span></span>


[!code-csharp[Main](sorting-data-in-a-datalist-or-repeater-control-cs/samples/sample16.cs)]

<span data-ttu-id="a1c59-314">最后，我们需要查看的最后一页时查看数据和下一步和最后一个按钮的第一页时禁用分页接口中的第一个和上一步按钮。</span><span class="sxs-lookup"><span data-stu-id="a1c59-314">Finally, we need to disable the First and Previous buttons in the paging interface when viewing the first page of data and the Next and Last buttons when viewing the last page.</span></span> <span data-ttu-id="a1c59-315">若要完成此操作，请将以下代码添加到 ObjectDataSource 的`Selecting`事件处理程序：</span><span class="sxs-lookup"><span data-stu-id="a1c59-315">To accomplish this, add the following code to the ObjectDataSource s `Selecting` event handler:</span></span>


[!code-csharp[Main](sorting-data-in-a-datalist-or-repeater-control-cs/samples/sample17.cs)]

<span data-ttu-id="a1c59-316">添加这些后`Click`事件处理程序和代码以启用或禁用基于当前的起始行索引，分页界面元素在浏览器中测试页面。</span><span class="sxs-lookup"><span data-stu-id="a1c59-316">After adding these `Click` event handlers and the code to enable or disable the paging interface elements based on the current start row index, test the page in a browser.</span></span> <span data-ttu-id="a1c59-317">图 15 所示，在第一次访问页第一个时以及上一步按钮将处于禁用状态。</span><span class="sxs-lookup"><span data-stu-id="a1c59-317">As Figure 15 illustrates, when first visiting the page the First and Previous buttons will are disabled.</span></span> <span data-ttu-id="a1c59-318">单击下一步显示的数据，第二页，而单击上一次显示的最后一页 （请参阅图 16 和 17）。</span><span class="sxs-lookup"><span data-stu-id="a1c59-318">Clicking Next shows the second page of data, while clicking Last displays the final page (see Figures 16 and 17).</span></span> <span data-ttu-id="a1c59-319">查看数据的最后一页时的下一步和最后一个按钮被禁用。</span><span class="sxs-lookup"><span data-stu-id="a1c59-319">When viewing the last page of data both the Next and Last buttons are disabled.</span></span>


<span data-ttu-id="a1c59-320">[![当查看第一个产品页时，会禁用上一步和最后一个按钮](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image42.png)](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image41.png)</span><span class="sxs-lookup"><span data-stu-id="a1c59-320">[![The Previous and Last Buttons are Disabled When Viewing the First Page of Products](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image42.png)](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image41.png)</span></span>

<span data-ttu-id="a1c59-321">**图 15**： 查看第一个产品页时，将禁用 Previous 和最后一个按钮 ([单击以查看实际尺寸的图像](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image43.png))</span><span class="sxs-lookup"><span data-stu-id="a1c59-321">**Figure 15**: The Previous and Last Buttons are Disabled When Viewing the First Page of Products ([Click to view full-size image](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image43.png))</span></span>


<span data-ttu-id="a1c59-322">[![第二个产品页是全都](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image45.png)](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image44.png)</span><span class="sxs-lookup"><span data-stu-id="a1c59-322">[![The Second Page of Products are Dispalyed](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image45.png)](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image44.png)</span></span>

<span data-ttu-id="a1c59-323">**图 16**： 产品第二个页是全都 ([单击以查看实际尺寸的图像](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image46.png))</span><span class="sxs-lookup"><span data-stu-id="a1c59-323">**Figure 16**: The Second Page of Products are Dispalyed ([Click to view full-size image](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image46.png))</span></span>


<span data-ttu-id="a1c59-324">[![单击最后一个显示的数据的最后一页](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image48.png)](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image47.png)</span><span class="sxs-lookup"><span data-stu-id="a1c59-324">[![Clicking Last Displays the Final Page of Data](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image48.png)](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image47.png)</span></span>

<span data-ttu-id="a1c59-325">**图 17**： 单击上一次显示的最后一个数据页 ([单击以查看实际尺寸的图像](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image49.png))</span><span class="sxs-lookup"><span data-stu-id="a1c59-325">**Figure 17**: Clicking Last Displays the Final Page of Data ([Click to view full-size image](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image49.png))</span></span>


## <a name="step-7-including-sorting-support-with-the-custom-paged-repeater"></a><span data-ttu-id="a1c59-326">步骤 7： 包括排序使用的自定义支持分页转发器</span><span class="sxs-lookup"><span data-stu-id="a1c59-326">Step 7: Including Sorting Support with the Custom Paged Repeater</span></span>

<span data-ttu-id="a1c59-327">现在，已实现自定义分页，我们已准备好包括排序重新支持。</span><span class="sxs-lookup"><span data-stu-id="a1c59-327">Now that custom paging has been implemented, we re ready to include sorting support.</span></span> <span data-ttu-id="a1c59-328">`ProductsBLL`类 s`GetProductsPagedAndSorted`方法具有相同*值*和*值*输入参数作为`GetProductsPaged`，但它允许其他*sortExpression*输入的参数。</span><span class="sxs-lookup"><span data-stu-id="a1c59-328">The `ProductsBLL` class s `GetProductsPagedAndSorted` method has the same *startRowIndex* and *maximumRows* input parameters as `GetProductsPaged`, but permits an additional *sortExpression* input parameter.</span></span> <span data-ttu-id="a1c59-329">若要使用`GetProductsPagedAndSorted`方法从`SortingWithCustomPaging.aspx`，我们需要执行以下步骤：</span><span class="sxs-lookup"><span data-stu-id="a1c59-329">To use the `GetProductsPagedAndSorted` method from `SortingWithCustomPaging.aspx`, we need to perform the following steps:</span></span>

1. <span data-ttu-id="a1c59-330">更改 ObjectDataSource s`SelectMethod`属性从`GetProductsPaged`到`GetProductsPagedAndSorted`。</span><span class="sxs-lookup"><span data-stu-id="a1c59-330">Change the ObjectDataSource s `SelectMethod` property from `GetProductsPaged` to `GetProductsPagedAndSorted`.</span></span>
2. <span data-ttu-id="a1c59-331">添加*sortExpression* `Parameter`对象到 ObjectDataSource 的`SelectParameters`集合。</span><span class="sxs-lookup"><span data-stu-id="a1c59-331">Add a *sortExpression* `Parameter` object to the ObjectDataSource s `SelectParameters` collection.</span></span>
3. <span data-ttu-id="a1c59-332">创建专用的页级别`SortExpression`属性保留其值在回发期间通过页面的视图状态。</span><span class="sxs-lookup"><span data-stu-id="a1c59-332">Create a private, page-level `SortExpression` property that persists its value across postbacks through the page s view state.</span></span>
4. <span data-ttu-id="a1c59-333">更新 ObjectDataSource s`Selecting`事件处理程序来分配 ObjectDataSource s *sortExpression*参数页级别的值`SortExpression`属性。</span><span class="sxs-lookup"><span data-stu-id="a1c59-333">Update the ObjectDataSource s `Selecting` event handler to assign the ObjectDataSource s *sortExpression* parameter the value of the page-level `SortExpression` property.</span></span>
5. <span data-ttu-id="a1c59-334">创建排序的接口。</span><span class="sxs-lookup"><span data-stu-id="a1c59-334">Create the sorting interface.</span></span>

<span data-ttu-id="a1c59-335">通过更新 ObjectDataSource s 启动`SelectMethod`属性并添加*sortExpression* `Parameter`。</span><span class="sxs-lookup"><span data-stu-id="a1c59-335">Start by updating the ObjectDataSource s `SelectMethod` property and adding a *sortExpression* `Parameter`.</span></span> <span data-ttu-id="a1c59-336">请确保*sortExpression* `Parameter` s`Type`属性设置为`String`。</span><span class="sxs-lookup"><span data-stu-id="a1c59-336">Make sure that the *sortExpression* `Parameter` s `Type` property is set to `String`.</span></span> <span data-ttu-id="a1c59-337">完成这些前两个任务之后，ObjectDataSource s 声明性标记应如下所示：</span><span class="sxs-lookup"><span data-stu-id="a1c59-337">After completing these first two tasks, the ObjectDataSource s declarative markup should look like the following:</span></span>


[!code-aspx[Main](sorting-data-in-a-datalist-or-repeater-control-cs/samples/sample18.aspx)]

<span data-ttu-id="a1c59-338">接下来，我们需要页级`SortExpression`其值序列化为视图状态的属性。</span><span class="sxs-lookup"><span data-stu-id="a1c59-338">Next, we need a page-level `SortExpression` property whose value is serialized to view state.</span></span> <span data-ttu-id="a1c59-339">如果未不设置任何排序表达式值，将 ProductName 用作默认值：</span><span class="sxs-lookup"><span data-stu-id="a1c59-339">If no sort expression value has been set, use ProductName as the default:</span></span>


[!code-csharp[Main](sorting-data-in-a-datalist-or-repeater-control-cs/samples/sample19.cs)]

<span data-ttu-id="a1c59-340">ObjectDataSource 调用之前`GetProductsPagedAndSorted`方法我们需要将设置*sortExpression* `Parameter`为的值`SortExpression`属性。</span><span class="sxs-lookup"><span data-stu-id="a1c59-340">Before the ObjectDataSource invokes the `GetProductsPagedAndSorted` method we need to set the *sortExpression* `Parameter` to the value of the `SortExpression` property.</span></span> <span data-ttu-id="a1c59-341">在`Selecting`事件处理程序中，添加以下代码行：</span><span class="sxs-lookup"><span data-stu-id="a1c59-341">In the `Selecting` event handler, add the following line of code:</span></span>


[!code-csharp[Main](sorting-data-in-a-datalist-or-repeater-control-cs/samples/sample20.cs)]

<span data-ttu-id="a1c59-342">所有这些剩下是实现排序接口。</span><span class="sxs-lookup"><span data-stu-id="a1c59-342">All that remains is to implement the sorting interface.</span></span> <span data-ttu-id="a1c59-343">正如我们做最后一个示例中，可让具有排序接口使用允许用户对结果进行排序的三个按钮 Web 控件实现按产品名称、 类别或供应商的 s。</span><span class="sxs-lookup"><span data-stu-id="a1c59-343">As we did in the last example, let s have the sorting interface implemented using three Button Web controls that allow the user to sort the results by product name, category, or supplier.</span></span>


[!code-aspx[Main](sorting-data-in-a-datalist-or-repeater-control-cs/samples/sample21.aspx)]

<span data-ttu-id="a1c59-344">创建`Click`这三个按钮控件的事件处理程序。</span><span class="sxs-lookup"><span data-stu-id="a1c59-344">Create `Click` event handlers for these three Button controls.</span></span> <span data-ttu-id="a1c59-345">在事件处理程序中，重置`StartRowIndex`为 0，设置`SortExpression`到适当的值，并重新绑定到转发器的数据：</span><span class="sxs-lookup"><span data-stu-id="a1c59-345">In the event handler, reset the `StartRowIndex` to 0, set the `SortExpression` to the appropriate value, and rebind the data to the Repeater:</span></span>


[!code-csharp[Main](sorting-data-in-a-datalist-or-repeater-control-cs/samples/sample22.cs)]

<span data-ttu-id="a1c59-346">该 s 就是它 ！</span><span class="sxs-lookup"><span data-stu-id="a1c59-346">That s all there is to it!</span></span> <span data-ttu-id="a1c59-347">时有多个步骤，若要获取自定义分页和排序实现，已针对那些需要默认分页非常相似的步骤。</span><span class="sxs-lookup"><span data-stu-id="a1c59-347">While there were a number of steps to get custom paging and sorting implemented, the steps were very similar to those needed for default paging.</span></span> <span data-ttu-id="a1c59-348">查看数据时按类别排序的最后一页时，图 18 显示产品。</span><span class="sxs-lookup"><span data-stu-id="a1c59-348">Figure 18 shows the products when viewing the last page of data when sorted by category.</span></span>


<span data-ttu-id="a1c59-349">[![已显示最后一个数据页、 按类别、 Sorted](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image51.png)](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image50.png)</span><span class="sxs-lookup"><span data-stu-id="a1c59-349">[![The Last Page of Data, Sorted by Category, is Displayed](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image51.png)](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image50.png)</span></span>

<span data-ttu-id="a1c59-350">**图 18**： 已显示最后一页数据的、 按类别、 Sorted ([单击以查看实际尺寸的图像](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image52.png))</span><span class="sxs-lookup"><span data-stu-id="a1c59-350">**Figure 18**: The Last Page of Data, Sorted by Category, is Displayed ([Click to view full-size image](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image52.png))</span></span>


> [!NOTE]
> <span data-ttu-id="a1c59-351">在上一示例中，供应商供应商名称用作排序表达式排序时。</span><span class="sxs-lookup"><span data-stu-id="a1c59-351">In previous examples, when sorting by the supplier SupplierName was used as the sort expression.</span></span> <span data-ttu-id="a1c59-352">但是，对于自定义分页实现中，我们需要使用 CompanyName。</span><span class="sxs-lookup"><span data-stu-id="a1c59-352">However, for the custom paging implementation, we need to use CompanyName.</span></span> <span data-ttu-id="a1c59-353">这是因为存储的过程负责实现自定义分页`GetProductsPagedAndSorted`将传递到排序表达式`ROW_NUMBER()`关键字，`ROW_NUMBER()`关键字需要为实际列名，而不是别名。</span><span class="sxs-lookup"><span data-stu-id="a1c59-353">This is because the stored procedure responsible for implementing custom paging `GetProductsPagedAndSorted` passes the sort expression into the `ROW_NUMBER()` keyword, The `ROW_NUMBER()` keyword requires the actual column name rather than an alias.</span></span> <span data-ttu-id="a1c59-354">因此，我们必须使用`CompanyName`(中的列的名称`Suppliers`表) 而不是中使用的别名`SELECT`查询 (`SupplierName`) 的排序表达式。</span><span class="sxs-lookup"><span data-stu-id="a1c59-354">Therefore, we must use `CompanyName` (the name of the column in the `Suppliers` table) rather than the alias used in the `SELECT` query (`SupplierName`) for the sort expression.</span></span>


## <a name="summary"></a><span data-ttu-id="a1c59-355">摘要</span><span class="sxs-lookup"><span data-stu-id="a1c59-355">Summary</span></span>

<span data-ttu-id="a1c59-356">既不是 DataList 还是中继器提供排序的内置支持，但可以进行少量的代码和自定义排序界面，添加这样的功能。</span><span class="sxs-lookup"><span data-stu-id="a1c59-356">Neither the DataList nor Repeater offer built-in sorting support, but with a bit of code and a custom sorting interface, such functionality can be added.</span></span> <span data-ttu-id="a1c59-357">在实现排序，但不是分页时，可通过指定的排序表达式`DataSourceSelectArguments`对象传递给 ObjectDataSource 的`Select`方法。</span><span class="sxs-lookup"><span data-stu-id="a1c59-357">When implementing sorting, but not paging, the sort expression can be specified through the `DataSourceSelectArguments` object passed into the ObjectDataSource s `Select` method.</span></span> <span data-ttu-id="a1c59-358">这`DataSourceSelectArguments`对象 s`SortExpression`属性可以分配中 ObjectDataSource 的`Selecting`事件处理程序。</span><span class="sxs-lookup"><span data-stu-id="a1c59-358">This `DataSourceSelectArguments` object s `SortExpression` property can be assigned in the ObjectDataSource s `Selecting` event handler.</span></span>

<span data-ttu-id="a1c59-359">若要将排序功能添加到 DataList 或转发器已提供分页支持，最简单的方法是自定义业务逻辑层，以囊括接受排序表达式的方法。</span><span class="sxs-lookup"><span data-stu-id="a1c59-359">To add sorting capabilities to a DataList or Repeater that already provides paging support, the easiest approach is to customize the Business Logic Layer to include a method that accepts a sort expression.</span></span> <span data-ttu-id="a1c59-360">此信息然后中通过 ObjectDataSource s 中的参数传递`SelectParameters`。</span><span class="sxs-lookup"><span data-stu-id="a1c59-360">This information can then be passed in through a parameter in the ObjectDataSource s `SelectParameters`.</span></span>

<span data-ttu-id="a1c59-361">本教程中完成分页和排序 DataList 和转发器控件与我们的检查。</span><span class="sxs-lookup"><span data-stu-id="a1c59-361">This tutorial completes our examination of paging and sorting with the DataList and Repeater controls.</span></span> <span data-ttu-id="a1c59-362">我们的下一步和最后一个教程将说明如何将按钮 Web 控件添加到 DataList 和转发器的 s 模板，以便在每个项基础上提供自定义、 用户启动功能。</span><span class="sxs-lookup"><span data-stu-id="a1c59-362">Our next and final tutorial will examine how to add Button Web controls to the DataList and Repeater s templates in order to provide some custom, user-initiated functionality on a per-item basis.</span></span>

<span data-ttu-id="a1c59-363">尽情享受编程 ！</span><span class="sxs-lookup"><span data-stu-id="a1c59-363">Happy Programming!</span></span>

## <a name="about-the-author"></a><span data-ttu-id="a1c59-364">关于作者</span><span class="sxs-lookup"><span data-stu-id="a1c59-364">About the Author</span></span>

<span data-ttu-id="a1c59-365">[Scott Mitchell](http://www.4guysfromrolla.com/ScottMitchell.shtml)，作者的七个 ASP/ASP.NET 书籍和的创始人[4GuysFromRolla.com](http://www.4guysfromrolla.com)，自 1998 年使用与 Microsoft Web 技术。</span><span class="sxs-lookup"><span data-stu-id="a1c59-365">[Scott Mitchell](http://www.4guysfromrolla.com/ScottMitchell.shtml), author of seven ASP/ASP.NET books and founder of [4GuysFromRolla.com](http://www.4guysfromrolla.com), has been working with Microsoft Web technologies since 1998.</span></span> <span data-ttu-id="a1c59-366">Scott 的作用是作为独立的顾问、 培训师和编写器。</span><span class="sxs-lookup"><span data-stu-id="a1c59-366">Scott works as an independent consultant, trainer, and writer.</span></span> <span data-ttu-id="a1c59-367">最新书籍是[ *Sam 教授自己 ASP.NET 2.0 24 小时内*](https://www.amazon.com/exec/obidos/ASIN/0672327384/4guysfromrollaco)。</span><span class="sxs-lookup"><span data-stu-id="a1c59-367">His latest book is [*Sams Teach Yourself ASP.NET 2.0 in 24 Hours*](https://www.amazon.com/exec/obidos/ASIN/0672327384/4guysfromrollaco).</span></span> <span data-ttu-id="a1c59-368">他可以达到在[ mitchell@4GuysFromRolla.com。](mailto:mitchell@4GuysFromRolla.com)或通过他的博客，其中可以找到在[http://ScottOnWriting.NET](http://ScottOnWriting.NET)。</span><span class="sxs-lookup"><span data-stu-id="a1c59-368">He can be reached at [mitchell@4GuysFromRolla.com.](mailto:mitchell@4GuysFromRolla.com) or via his blog, which can be found at [http://ScottOnWriting.NET](http://ScottOnWriting.NET).</span></span>

## <a name="special-thanks-to"></a><span data-ttu-id="a1c59-369">特别感谢</span><span class="sxs-lookup"><span data-stu-id="a1c59-369">Special Thanks To</span></span>

<span data-ttu-id="a1c59-370">本教程系列已由许多有用的审阅者评审。</span><span class="sxs-lookup"><span data-stu-id="a1c59-370">This tutorial series was reviewed by many helpful reviewers.</span></span> <span data-ttu-id="a1c59-371">本教程中的前导审阅者已 David Suru。</span><span class="sxs-lookup"><span data-stu-id="a1c59-371">Lead reviewer for this tutorial was David Suru.</span></span> <span data-ttu-id="a1c59-372">对感兴趣查看我即将到来的 MSDN 文章？</span><span class="sxs-lookup"><span data-stu-id="a1c59-372">Interested in reviewing my upcoming MSDN articles?</span></span> <span data-ttu-id="a1c59-373">如果是这样，删除我一行[ mitchell@4GuysFromRolla.com。](mailto:mitchell@4GuysFromRolla.com)</span><span class="sxs-lookup"><span data-stu-id="a1c59-373">If so, drop me a line at [mitchell@4GuysFromRolla.com.](mailto:mitchell@4GuysFromRolla.com)</span></span>

>[!div class="step-by-step"]
<span data-ttu-id="a1c59-374">[上一页](paging-report-data-in-a-datalist-or-repeater-control-cs.md)
[下一页](paging-report-data-in-a-datalist-or-repeater-control-vb.md)</span><span class="sxs-lookup"><span data-stu-id="a1c59-374">[Previous](paging-report-data-in-a-datalist-or-repeater-control-cs.md)
[Next](paging-report-data-in-a-datalist-or-repeater-control-vb.md)</span></span>
