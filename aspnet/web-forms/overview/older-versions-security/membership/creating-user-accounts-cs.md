---
uid: web-forms/overview/older-versions-security/membership/creating-user-accounts-cs
title: "创建用户帐户 (C#) |Microsoft 文档"
author: rick-anderson
description: "在本教程中我们将探讨使用成员资格框架 （通过 SqlMembershipProvider) 来创建新用户帐户。 我们将了解如何创建新我们..."
ms.author: aspnetcontent
manager: wpickett
ms.date: 01/18/2008
ms.topic: article
ms.assetid: f175278c-6079-4d91-b9b4-2493ed43d9ec
ms.technology: dotnet-webforms
ms.prod: .net-framework
msc.legacyurl: /web-forms/overview/older-versions-security/membership/creating-user-accounts-cs
msc.type: authoredcontent
ms.openlocfilehash: ce206eae47c2fa718d4fca1f88b2c48441fedff2
ms.sourcegitcommit: 9a9483aceb34591c97451997036a9120c3fe2baf
ms.translationtype: MT
ms.contentlocale: zh-CN
ms.lasthandoff: 11/10/2017
---
<a name="creating-user-accounts-c"></a><span data-ttu-id="3227e-104">创建用户帐户 (C#)</span><span class="sxs-lookup"><span data-stu-id="3227e-104">Creating User Accounts (C#)</span></span>
====================
<span data-ttu-id="3227e-105">通过[Scott Mitchell](https://twitter.com/ScottOnWriting)</span><span class="sxs-lookup"><span data-stu-id="3227e-105">by [Scott Mitchell](https://twitter.com/ScottOnWriting)</span></span>

<span data-ttu-id="3227e-106">[下载代码](http://download.microsoft.com/download/3/f/5/3f5a8605-c526-4b34-b3fd-a34167117633/ASPNET_Security_Tutorial_05_CS.zip)或[下载 PDF](http://download.microsoft.com/download/3/f/5/3f5a8605-c526-4b34-b3fd-a34167117633/aspnet_tutorial05_CreatingUsers_cs.pdf)</span><span class="sxs-lookup"><span data-stu-id="3227e-106">[Download Code](http://download.microsoft.com/download/3/f/5/3f5a8605-c526-4b34-b3fd-a34167117633/ASPNET_Security_Tutorial_05_CS.zip) or [Download PDF](http://download.microsoft.com/download/3/f/5/3f5a8605-c526-4b34-b3fd-a34167117633/aspnet_tutorial05_CreatingUsers_cs.pdf)</span></span>

> <span data-ttu-id="3227e-107">在本教程中我们将探讨使用成员资格框架 （通过 SqlMembershipProvider) 来创建新用户帐户。</span><span class="sxs-lookup"><span data-stu-id="3227e-107">In this tutorial we will explore using the Membership framework (via the SqlMembershipProvider) to create new user accounts.</span></span> <span data-ttu-id="3227e-108">我们将了解如何以编程方式和通过 ASP 创建新用户。NET 的内置通过。</span><span class="sxs-lookup"><span data-stu-id="3227e-108">We will see how to create new users programmatically and through ASP.NET's built-in CreateUserWizard control.</span></span>


## <a name="introduction"></a><span data-ttu-id="3227e-109">介绍</span><span class="sxs-lookup"><span data-stu-id="3227e-109">Introduction</span></span>

<span data-ttu-id="3227e-110">在<a id="_msoanchor_1"> </a>[前面教程](creating-the-membership-schema-in-sql-server-cs.md)我们在数据库中，也不能添加表、 视图、 存储过程所需的安装应用程序服务架构`SqlMembershipProvider`和`SqlRoleProvider`。</span><span class="sxs-lookup"><span data-stu-id="3227e-110">In the <a id="_msoanchor_1"></a>[preceding tutorial](creating-the-membership-schema-in-sql-server-cs.md) we installed the application services schema in a database, which added the tables, views, and stored procedures needed by the `SqlMembershipProvider` and `SqlRoleProvider`.</span></span> <span data-ttu-id="3227e-111">这将创建我们将需要这一系列中的教程的其余部分的基础结构。</span><span class="sxs-lookup"><span data-stu-id="3227e-111">This created the infrastructure we will need for the remainder of the tutorials in this series.</span></span> <span data-ttu-id="3227e-112">在本教程中我们将探讨使用成员资格框架 (通过`SqlMembershipProvider`) 来创建新用户帐户。</span><span class="sxs-lookup"><span data-stu-id="3227e-112">In this tutorial we will explore using the Membership framework (via the `SqlMembershipProvider`) to create new user accounts.</span></span> <span data-ttu-id="3227e-113">我们将了解如何以编程方式和通过 ASP 创建新用户。NET 的内置通过。</span><span class="sxs-lookup"><span data-stu-id="3227e-113">We will see how to create new users programmatically and through ASP.NET's built-in CreateUserWizard control.</span></span>

<span data-ttu-id="3227e-114">除了学习如何创建新的用户帐户，我们将还需要更新我们首先创建中的演示网站 *<a id="_msoanchor_2"> </a>[概述窗体身份验证的](../introduction/an-overview-of-forms-authentication-cs.md)*教程，然后中增强 *<a id="https://www.asp.net/learn/security/tutorial-03-cs.aspx"> </a>窗体身份验证配置和高级主题*教程。</span><span class="sxs-lookup"><span data-stu-id="3227e-114">In addition to learning how to create new user accounts, we will also need to update the demo website we first created in the *<a id="_msoanchor_2"></a>[An Overview of Forms Authentication](../introduction/an-overview-of-forms-authentication-cs.md)* tutorial and then enhanced in the *<a id="https://www.asp.net/learn/security/tutorial-03-cs.aspx"></a> Forms Authentication Configuration and Advanced Topics* tutorial.</span></span> <span data-ttu-id="3227e-115">我们演示 web 应用程序登录页，用于验证针对硬编码的用户名/密码对用户的凭据。</span><span class="sxs-lookup"><span data-stu-id="3227e-115">Our demo web application has a login page that validates users' credentials against hard-coded username/password pairs.</span></span> <span data-ttu-id="3227e-116">此外，`Global.asax`包括创建自定义代码`IPrincipal`和`IIdentity`为经过身份验证的用户的对象。</span><span class="sxs-lookup"><span data-stu-id="3227e-116">Moreover, `Global.asax` includes code that creates custom `IPrincipal` and `IIdentity` objects for authenticated users.</span></span> <span data-ttu-id="3227e-117">我们将更新登录页后，可以验证用户的凭据针对成员资格框架和删除的自定义的主体和标识逻辑。</span><span class="sxs-lookup"><span data-stu-id="3227e-117">We will update the login page to validate users' credentials against the Membership framework and remove the custom principal and identity logic.</span></span>

<span data-ttu-id="3227e-118">让我们进入正题！</span><span class="sxs-lookup"><span data-stu-id="3227e-118">Let's get started!</span></span>

## <a name="the-forms-authentication-and-membership-checklist"></a><span data-ttu-id="3227e-119">窗体身份验证和成员身份清单</span><span class="sxs-lookup"><span data-stu-id="3227e-119">The Forms Authentication and Membership Checklist</span></span>

<span data-ttu-id="3227e-120">我们开始使用成员资格 framework 之前，让我们花些时间回顾我们采取了来达到此点的重要步骤。</span><span class="sxs-lookup"><span data-stu-id="3227e-120">Before we begin working with the Membership framework, let's take a moment to review the important steps we have taken to reach this point.</span></span> <span data-ttu-id="3227e-121">使用的成员资格 framework 时`SqlMembershipProvider`需要在基于窗体的身份验证方案中，在 web 应用程序中实现成员资格功能之前执行以下步骤：</span><span class="sxs-lookup"><span data-stu-id="3227e-121">When using the Membership framework with the `SqlMembershipProvider` in a forms-based authentication scenario, the following steps need to be performed prior to implementing Membership functionality in your web application:</span></span>

1. <span data-ttu-id="3227e-122">**启用基于窗体的身份验证。**</span><span class="sxs-lookup"><span data-stu-id="3227e-122">**Enable forms-based authentication.**</span></span> <span data-ttu-id="3227e-123">如我们所述 *<a id="_msoanchor_4"> </a>[概述窗体身份验证的](../introduction/an-overview-of-forms-authentication-cs.md)*，窗体身份验证通过编辑`Web.config`和设置`<authentication>`元素的`mode`属性设为`Forms`。</span><span class="sxs-lookup"><span data-stu-id="3227e-123">As we discussed in *<a id="_msoanchor_4"></a>[An Overview of Forms Authentication](../introduction/an-overview-of-forms-authentication-cs.md)*, forms authentication is enabled by editing `Web.config` and setting the `<authentication>` element's `mode` attribute to `Forms`.</span></span> <span data-ttu-id="3227e-124">通过启用 forms 身份验证，每个传入请求检查，以确定*窗体身份验证票证*，它，如果存在，标识请求者。</span><span class="sxs-lookup"><span data-stu-id="3227e-124">With forms authentication enabled, each incoming request is examined for a *forms authentication ticket*, which, if present, identifies the requestor.</span></span>
2. <span data-ttu-id="3227e-125">**将应用程序服务架构添加到相应的数据库。**</span><span class="sxs-lookup"><span data-stu-id="3227e-125">**Add the application services schema to the appropriate database.**</span></span> <span data-ttu-id="3227e-126">使用时`SqlMembershipProvider`我们需要先安装到数据库的应用程序服务架构。</span><span class="sxs-lookup"><span data-stu-id="3227e-126">When using the `SqlMembershipProvider` we need to install the application services schema to a database.</span></span> <span data-ttu-id="3227e-127">通常将此架构添加到同一个数据库包含应用程序的数据模型。</span><span class="sxs-lookup"><span data-stu-id="3227e-127">Usually this schema is added to the same database that holds the application's data model.</span></span> <span data-ttu-id="3227e-128"> *<a id="_msoanchor_5"> </a>[在 SQL Server 中创建成员身份架构](creating-the-membership-schema-in-sql-server-cs.md)*教程了解了使用`aspnet_regsql.exe`工具来实现此目的。</span><span class="sxs-lookup"><span data-stu-id="3227e-128">The *<a id="_msoanchor_5"></a>[Creating the Membership Schema in SQL Server](creating-the-membership-schema-in-sql-server-cs.md)* tutorial looked at using the `aspnet_regsql.exe` tool to accomplish this.</span></span>
3. <span data-ttu-id="3227e-129">**自定义 Web 应用程序的设置以从步骤 2 中引用该数据库。**</span><span class="sxs-lookup"><span data-stu-id="3227e-129">**Customize the Web Application's Settings to reference the database from step 2.**</span></span> <span data-ttu-id="3227e-130">*在 SQL Server 中创建成员身份架构*教程介绍了两种方法可以配置 web 应用程序，以便`SqlMembershipProvider`将使用在步骤 2 中所选的数据库： 通过修改`LocalSqlServer`连接字符串名称;或通过将新的已注册提供程序添加到成员资格 framework 提供程序的列表和自定义该新的提供程序，用于将数据库从步骤 2。</span><span class="sxs-lookup"><span data-stu-id="3227e-130">The *Creating the Membership Schema in SQL Server* tutorial showed two ways to configure the web application so that the `SqlMembershipProvider` would use the database selected in step 2: by modifying the `LocalSqlServer` connection string name; or by adding a new registered provider to the list of Membership framework providers and customizing that new provider to use the database from step 2.</span></span>

<span data-ttu-id="3227e-131">当生成 web 应用程序，该使用`SqlMembershipProvider`和基于窗体的身份验证，你将需要使用之前执行以下三个步骤`Membership`类或 ASP.NET 登录 Web 控件。</span><span class="sxs-lookup"><span data-stu-id="3227e-131">When building a web application that uses the `SqlMembershipProvider` and forms-based authentication, you will need to perform these three steps before using the `Membership` class or the ASP.NET Login Web controls.</span></span> <span data-ttu-id="3227e-132">由于我们已在前面的教程中执行这些步骤，我们已准备好开始使用成员资格 framework ！</span><span class="sxs-lookup"><span data-stu-id="3227e-132">Since we already performed these steps in previous tutorials, we are ready to start using the Membership framework!</span></span>

## <a name="step-1-adding-new-aspnet-pages"></a><span data-ttu-id="3227e-133">步骤 1： 添加新的 ASP.NET 页</span><span class="sxs-lookup"><span data-stu-id="3227e-133">Step 1: Adding New ASP.NET Pages</span></span>

<span data-ttu-id="3227e-134">我们将在本教程和下一步的三个检查各种与成员资格相关的函数和功能。</span><span class="sxs-lookup"><span data-stu-id="3227e-134">In this tutorial and the next three we will be examining various Membership-related functions and capabilities.</span></span> <span data-ttu-id="3227e-135">我们将需要一系列的 ASP.NET 网页来实现检查整个这些教程的主题。</span><span class="sxs-lookup"><span data-stu-id="3227e-135">We will need a series of ASP.NET pages to implement the topics examined throughout these tutorials.</span></span> <span data-ttu-id="3227e-136">让我们来创建这些页面，然后站点映射文件`(Web.sitemap)`。</span><span class="sxs-lookup"><span data-stu-id="3227e-136">Let's create those pages and then a site map file `(Web.sitemap)`.</span></span>

<span data-ttu-id="3227e-137">首先创建一个新文件夹中名为的项目`Membership`。</span><span class="sxs-lookup"><span data-stu-id="3227e-137">Start by creating a new folder in the project named `Membership`.</span></span> <span data-ttu-id="3227e-138">接下来，添加到五个新的 ASP.NET 页`Membership`文件夹中，链接与每个页面`Site.master`母版页。</span><span class="sxs-lookup"><span data-stu-id="3227e-138">Next, add five new ASP.NET pages to the `Membership` folder, linking each page with the `Site.master` master page.</span></span> <span data-ttu-id="3227e-139">命名页：</span><span class="sxs-lookup"><span data-stu-id="3227e-139">Name the pages:</span></span>

- `CreatingUserAccounts.aspx`
- `UserBasedAuthorization.aspx`
- `EnhancedCreateUserWizard.aspx`
- `AdditionalUserInfo.aspx`
- `Guestbook.aspx`

<span data-ttu-id="3227e-140">此时你的项目的解决方案资源管理器应类似于的屏幕快照中图 1 所示。</span><span class="sxs-lookup"><span data-stu-id="3227e-140">At this point your project's Solution Explorer should look similar to the screen shot shown in Figure 1.</span></span>


<span data-ttu-id="3227e-141">[![新的 5 个页面已添加到成员资格文件夹](creating-user-accounts-cs/_static/image2.png)](creating-user-accounts-cs/_static/image1.png)</span><span class="sxs-lookup"><span data-stu-id="3227e-141">[![Five New Pages Have Been Added to the Membership Folder](creating-user-accounts-cs/_static/image2.png)](creating-user-accounts-cs/_static/image1.png)</span></span>

<span data-ttu-id="3227e-142">**图 1**： 五个新页已添加到`Membership`文件夹 ([单击以查看实际尺寸的图像](creating-user-accounts-cs/_static/image3.png))</span><span class="sxs-lookup"><span data-stu-id="3227e-142">**Figure 1**: Five New Pages Have Been Added to the `Membership` Folder  ([Click to view full-size image](creating-user-accounts-cs/_static/image3.png))</span></span>


<span data-ttu-id="3227e-143">每一页后，应该在此情况下，有两个内容控件，每个母版页的 ContentPlaceHolders:`MainContent`和`LoginContent`。</span><span class="sxs-lookup"><span data-stu-id="3227e-143">Each page should, at this point, have the two Content controls, one for each of the master page's ContentPlaceHolders: `MainContent` and `LoginContent`.</span></span>

[!code-aspx[Main](creating-user-accounts-cs/samples/sample1.aspx)]

<span data-ttu-id="3227e-144">回想一下， `LoginContent` ContentPlaceHolder 的默认标记显示在登录或注销的站点，具体取决于是否对用户进行身份验证的链接。</span><span class="sxs-lookup"><span data-stu-id="3227e-144">Recall that the `LoginContent` ContentPlaceHolder's default markup displays a link to log on or log off the site, depending on whether the user is authenticated.</span></span> <span data-ttu-id="3227e-145">是否存在`Content2`内容控件中，但是，将覆盖主页面的默认标记。</span><span class="sxs-lookup"><span data-stu-id="3227e-145">The presence of the `Content2` Content control, however, overrides the master page's default markup.</span></span> <span data-ttu-id="3227e-146">如我们所述 *<a id="_msoanchor_6"> </a>[概述窗体身份验证的](../introduction/an-overview-of-forms-authentication-cs.md)*教程中，这可在页中，我们不希望左侧列中显示与登录相关的选项。</span><span class="sxs-lookup"><span data-stu-id="3227e-146">As we discussed in *<a id="_msoanchor_6"></a>[An Overview of Forms Authentication](../introduction/an-overview-of-forms-authentication-cs.md)* tutorial, this is useful in pages where we do not want to display login-related options in the left column.</span></span>

<span data-ttu-id="3227e-147">有关这些的 5 个页面，但是，我们希望能够显示主控页的默认标记`LoginContent`ContentPlaceHolder。</span><span class="sxs-lookup"><span data-stu-id="3227e-147">For these five pages, however, we want to show the master page's default markup for the `LoginContent` ContentPlaceHolder.</span></span> <span data-ttu-id="3227e-148">因此，删除的声明性标记`Content2`内容控件。</span><span class="sxs-lookup"><span data-stu-id="3227e-148">Therefore, remove the declarative markup for the `Content2` Content control.</span></span> <span data-ttu-id="3227e-149">这么做，每个五个页面的标记应包含几个内容控件。</span><span class="sxs-lookup"><span data-stu-id="3227e-149">After doing so, each of the five page's markup should contain just one Content control.</span></span>

## <a name="step-2-creating-the-site-map"></a><span data-ttu-id="3227e-150">步骤 2： 创建站点图</span><span class="sxs-lookup"><span data-stu-id="3227e-150">Step 2: Creating the Site Map</span></span>

<span data-ttu-id="3227e-151">除了最不重要的网站的所有需要实施某种形式的导航用户界面。</span><span class="sxs-lookup"><span data-stu-id="3227e-151">All but the most trivial websites need to implement some form of a navigational user interface.</span></span> <span data-ttu-id="3227e-152">导航用户界面可能指向站点的各个部分的简单列表。</span><span class="sxs-lookup"><span data-stu-id="3227e-152">The navigation user interface may be a simple list of links to the various sections of the site.</span></span> <span data-ttu-id="3227e-153">或者，这些链接可能安排到菜单或树视图。</span><span class="sxs-lookup"><span data-stu-id="3227e-153">Alternatively, these links may be arranged into menus or tree views.</span></span> <span data-ttu-id="3227e-154">页开发人员创建导航用户界面是仅有一半情景。</span><span class="sxs-lookup"><span data-stu-id="3227e-154">As page developers, creating the navigational user interface is only half of the story.</span></span> <span data-ttu-id="3227e-155">我们还需要一些方法来定义可维护性和可更新的方式的站点的逻辑结构。</span><span class="sxs-lookup"><span data-stu-id="3227e-155">We also need some means to define the site's logical structure in a maintainable and updateable fashion.</span></span> <span data-ttu-id="3227e-156">在新页面添加或删除现有的页时，我们想要能够更新单个源 – 站点图 – 并这些修改反映跨站点的导航用户界面。</span><span class="sxs-lookup"><span data-stu-id="3227e-156">As new pages are added or existing pages removed, we want to be able to update a single source – the site map – and have those modifications reflected across the site's navigational user interface.</span></span>

<span data-ttu-id="3227e-157">– 定义站点图和实现导航用户界面基于站点图 – 这两个任务可轻松地完成站点图 framework 感谢和导航 Web 控件在 ASP.NET 2.0 版中添加。</span><span class="sxs-lookup"><span data-stu-id="3227e-157">These two tasks – defining the site map and implementing a navigational user interface based on the site map – are easy to accomplish thanks to the Site Map framework and the Navigation Web controls added in ASP.NET version 2.0.</span></span> <span data-ttu-id="3227e-158">站点图框架允许开发人员用来定义站点图，然后通过编程 API 访问它 ( [ `SiteMap`类](https://msdn.microsoft.com/en-us/library/system.web.sitemap.aspx))。</span><span class="sxs-lookup"><span data-stu-id="3227e-158">The Site Map framework allows for a developer to define a site map and then to access it through a programmatic API (the [`SiteMap` class](https://msdn.microsoft.com/en-us/library/system.web.sitemap.aspx)).</span></span> <span data-ttu-id="3227e-159">导航 Web 控件的内置包括[菜单控件](https://msdn.microsoft.com/en-us/library/bz09dy46.aspx)、 [TreeView 控件](https://msdn.microsoft.com/en-us/library/3eafky27.aspx)，和[SiteMapPath 控件](https://msdn.microsoft.com/en-us/library/3eafky27.aspx)。</span><span class="sxs-lookup"><span data-stu-id="3227e-159">The built-in Navigation Web controls include a [Menu control](https://msdn.microsoft.com/en-us/library/bz09dy46.aspx), the [TreeView control](https://msdn.microsoft.com/en-us/library/3eafky27.aspx), and the [SiteMapPath control](https://msdn.microsoft.com/en-us/library/3eafky27.aspx).</span></span>

<span data-ttu-id="3227e-160">成员资格和角色的框架，如站点图 framework 生成之上[提供程序模型](http://aspnet.4guysfromrolla.com/articles/101905-1.aspx)。</span><span class="sxs-lookup"><span data-stu-id="3227e-160">Like the Membership and Roles frameworks, the Site Map framework is built atop the [provider model](http://aspnet.4guysfromrolla.com/articles/101905-1.aspx).</span></span> <span data-ttu-id="3227e-161">站点图提供程序类的作业是生成使用的内存中结构`SiteMap`从永久性数据存储，如 XML 文件或数据库表中的类。</span><span class="sxs-lookup"><span data-stu-id="3227e-161">The job of the Site Map provider class is to generate the in-memory structure used by the `SiteMap` class from a persistent data store, such as an XML file or a database table.</span></span> <span data-ttu-id="3227e-162">.NET Framework 附带的默认站点图提供程序从 XML 文件读取站点地图数据 ([`XmlSiteMapProvider`](https://msdn.microsoft.com/en-us/library/system.web.xmlsitemapprovider.aspx))，并且这是我们将在本教程中使用的提供程序。</span><span class="sxs-lookup"><span data-stu-id="3227e-162">The .NET Framework ships with a default Site Map provider that reads the site map data from an XML file ([`XmlSiteMapProvider`](https://msdn.microsoft.com/en-us/library/system.web.xmlsitemapprovider.aspx)), and this is the provider we will be using in this tutorial.</span></span> <span data-ttu-id="3227e-163">对于某些备用的站点图提供程序实现，请参阅进一步读数部分在本教程末尾。</span><span class="sxs-lookup"><span data-stu-id="3227e-163">For some alternate Site Map provider implementations, refer to the Further Readings section at the end of this tutorial.</span></span>

<span data-ttu-id="3227e-164">默认站点图提供程序所需的格式正确的 XML 文件，名为`Web.sitemap`存在的根目录。</span><span class="sxs-lookup"><span data-stu-id="3227e-164">The default Site Map provider expects a properly-formatted XML file named `Web.sitemap` to exist the root directory.</span></span> <span data-ttu-id="3227e-165">因为我们要使用此默认的提供程序，我们需要添加此类文件和定义站点图结构以正确的 XML 格式。</span><span class="sxs-lookup"><span data-stu-id="3227e-165">Since we are using this default provider, we need to add such a file and define the site map's structure in the appropriate XML format.</span></span> <span data-ttu-id="3227e-166">若要添加文件时，右键单击解决方案资源管理器中的项目名称，并选择添加新项。</span><span class="sxs-lookup"><span data-stu-id="3227e-166">To add the file, right-click on the project name in Solution Explorer and choose Add New Item.</span></span> <span data-ttu-id="3227e-167">从对话框中，选择要添加的类型名为的站点图文件`Web.sitemap`。</span><span class="sxs-lookup"><span data-stu-id="3227e-167">From the dialog box, opt to add a file of type Site Map named `Web.sitemap`.</span></span>


<span data-ttu-id="3227e-168">[![添加名为 Web.sitemap 到项目的根目录的文件](creating-user-accounts-cs/_static/image5.png)](creating-user-accounts-cs/_static/image4.png)</span><span class="sxs-lookup"><span data-stu-id="3227e-168">[![Add a File Named Web.sitemap to the Project's Root Directory](creating-user-accounts-cs/_static/image5.png)](creating-user-accounts-cs/_static/image4.png)</span></span>

<span data-ttu-id="3227e-169">**图 2**： 添加文件命名为`Web.sitemap`到项目的根目录 ([单击以查看实际尺寸的图像](creating-user-accounts-cs/_static/image6.png))</span><span class="sxs-lookup"><span data-stu-id="3227e-169">**Figure 2**: Add a File Named `Web.sitemap` to the Project's Root Directory  ([Click to view full-size image](creating-user-accounts-cs/_static/image6.png))</span></span>


<span data-ttu-id="3227e-170">XML 映射文件定义为层次结构的网站的结构。</span><span class="sxs-lookup"><span data-stu-id="3227e-170">The XML site map file defines the website's structure as a hierarchy.</span></span> <span data-ttu-id="3227e-171">此层次结构关系建模在 XML 文件中的祖先通过`<siteMapNode>`元素。</span><span class="sxs-lookup"><span data-stu-id="3227e-171">This hierarchical relationship is modeled in the XML file via the ancestry of the `<siteMapNode>` elements.</span></span> <span data-ttu-id="3227e-172">`Web.sitemap`必须以开头`<siteMap>`精确有父节点`<siteMapNode>`子。</span><span class="sxs-lookup"><span data-stu-id="3227e-172">The `Web.sitemap` must start with a `<siteMap>` parent node that has precisely one `<siteMapNode>` child.</span></span> <span data-ttu-id="3227e-173">此顶层`<siteMapNode>`元素表示的根的层次结构，并可能包含任意数目的子代节点。</span><span class="sxs-lookup"><span data-stu-id="3227e-173">This top-level `<siteMapNode>` element represents the root of the hierarchy, and may have an arbitrary number of descendent nodes.</span></span> <span data-ttu-id="3227e-174">每个`<siteMapNode>`元素必须包含`title`属性，并可以根据需要包含`url`和`description`属性，以及其他; 每个非空`url`必须是唯一的属性。</span><span class="sxs-lookup"><span data-stu-id="3227e-174">Each `<siteMapNode>` element must include a `title` attribute and may optionally include `url` and `description` attributes, among others; each non-empty `url` attribute must be unique.</span></span>

<span data-ttu-id="3227e-175">输入以下 XML`Web.sitemap`文件：</span><span class="sxs-lookup"><span data-stu-id="3227e-175">Enter the following XML into the `Web.sitemap` file:</span></span>

[!code-xml[Main](creating-user-accounts-cs/samples/sample2.xml)]

<span data-ttu-id="3227e-176">上面的站点地图标记定义图 3 所示的层次结构。</span><span class="sxs-lookup"><span data-stu-id="3227e-176">The above site map markup defines the hierarchy shown in Figure 3.</span></span>


<span data-ttu-id="3227e-177">[![站点图表示分层导航结构](creating-user-accounts-cs/_static/image8.png)](creating-user-accounts-cs/_static/image7.png)</span><span class="sxs-lookup"><span data-stu-id="3227e-177">[![The Site Map Represents a Hierarchical Navigational Structure](creating-user-accounts-cs/_static/image8.png)](creating-user-accounts-cs/_static/image7.png)</span></span>

<span data-ttu-id="3227e-178">**图 3**： 站点图表示分层导航结构 ([单击以查看实际尺寸的图像](creating-user-accounts-cs/_static/image9.png))</span><span class="sxs-lookup"><span data-stu-id="3227e-178">**Figure 3**: The Site Map Represents a Hierarchical Navigational Structure  ([Click to view full-size image](creating-user-accounts-cs/_static/image9.png))</span></span>


## <a name="step-3-updating-the-master-page-to-include-a-navigational-user-interface"></a><span data-ttu-id="3227e-179">步骤 3： 更新 Master 页后，可以包括导航用户界面</span><span class="sxs-lookup"><span data-stu-id="3227e-179">Step 3: Updating the Master Page to Include a Navigational User Interface</span></span>

<span data-ttu-id="3227e-180">ASP.NET 包括大量导航相关器设计用户界面的 Web 控件。</span><span class="sxs-lookup"><span data-stu-id="3227e-180">ASP.NET includes a number of navigation-related Web controls for designing a user interface.</span></span> <span data-ttu-id="3227e-181">其中包括菜单、 树视图和 SiteMapPath 控件。</span><span class="sxs-lookup"><span data-stu-id="3227e-181">These include the Menu, TreeView, and the SiteMapPath controls.</span></span> <span data-ttu-id="3227e-182">菜单和 TreeView 控件呈现菜单或树中，在站点地图结构分别而 SiteMapPath 显示显示当前正在访问以及其祖先节点痕迹导航。</span><span class="sxs-lookup"><span data-stu-id="3227e-182">The Menu and TreeView controls render the site map structure in a menu or a tree, respectively, whereas the SiteMapPath displays a breadcrumb that shows the current node being visited as well as its ancestors.</span></span> <span data-ttu-id="3227e-183">站点地图数据可以绑定到 Web 控件使用 SiteMapDataSource 其他数据，可以通过以编程方式访问`SiteMap`类。</span><span class="sxs-lookup"><span data-stu-id="3227e-183">The site map data can be bound to other data Web controls using the SiteMapDataSource and can be accessed programmatically via the `SiteMap` class.</span></span>

<span data-ttu-id="3227e-184">由于站点图 framework 和导航控件的全面讨论超出了本系列教程的范围，而不是花时间来让我们创建我们自己导航用户界面改为借用在中使用我 *[在 ASP.NET 2.0 中使用数据](../../data-access/index.md)*教程系列，使用转发器控件来显示导航链接的两个深层项目符号列表中图 4 所示。</span><span class="sxs-lookup"><span data-stu-id="3227e-184">Since a thorough discussion of the Site Map framework and the Navigation controls is beyond the scope of this tutorial series, rather than spend time crafting our own navigational user interface let's instead borrow the one used in my *[Working with Data in ASP.NET 2.0](../../data-access/index.md)* tutorial series, which uses a Repeater control to display a two-deep bulleted list of navigation links, as shown in Figure 4.</span></span>

### <a name="adding-a-two-level-list-of-links-in-the-left-column"></a><span data-ttu-id="3227e-185">在左侧列中添加两个级别的链接列表</span><span class="sxs-lookup"><span data-stu-id="3227e-185">Adding a Two-Level List of Links in the Left Column</span></span>

<span data-ttu-id="3227e-186">若要创建此接口，添加到以下声明性标记`Site.master`主控页的左列其中文本"TODO： 菜单将转到此处..."当前位于。</span><span class="sxs-lookup"><span data-stu-id="3227e-186">To create this interface, add the following declarative markup to the `Site.master` master page's left column where the text "TODO: Menu will go here..." currently resides.</span></span>

[!code-aspx[Main](creating-user-accounts-cs/samples/sample3.aspx)]

<span data-ttu-id="3227e-187">上面的标记将名为转发器控件绑定`menu`到 SiteMapDataSource，它返回站点映射层次结构中定义`Web.sitemap`。</span><span class="sxs-lookup"><span data-stu-id="3227e-187">The above markup binds a Repeater control named `menu` to a SiteMapDataSource, which returns the site map hierarchy defined in `Web.sitemap`.</span></span> <span data-ttu-id="3227e-188">由于 SiteMapDataSource 控件的[`ShowStartingNode`属性](https://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.sitemapdatasource.showstartingnode.aspx)设置为 False 启动返回开头的"主页"节点的子代的站点图的层次结构。</span><span class="sxs-lookup"><span data-stu-id="3227e-188">Since the SiteMapDataSource control's [`ShowStartingNode` property](https://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.sitemapdatasource.showstartingnode.aspx) is set to False it starts returning the site map's hierarchy starting with the descendents of the "Home" node.</span></span> <span data-ttu-id="3227e-189">转发器将显示每个这些节点 （当前仅"成员身份"） 中`<li>`元素。</span><span class="sxs-lookup"><span data-stu-id="3227e-189">The Repeater displays each of these nodes (currently just "Membership") in an `<li>` element.</span></span> <span data-ttu-id="3227e-190">另一个内部中继器中将显示当前节点的子级嵌套未经排序的列表。</span><span class="sxs-lookup"><span data-stu-id="3227e-190">Another, inner Repeater then displays the current node's children in a nested unordered list.</span></span>

<span data-ttu-id="3227e-191">图 4 显示上述标记的呈现的输出与我们在步骤 2 中创建站点地图结构。</span><span class="sxs-lookup"><span data-stu-id="3227e-191">Figure 4 shows the above markup's rendered output with the site map structure we created in Step 2.</span></span> <span data-ttu-id="3227e-192">转发器呈现香草未经排序的列表标记;在中定义的级联样式表规则`Styles.css`负责的审美情趣布局。</span><span class="sxs-lookup"><span data-stu-id="3227e-192">The Repeater renders vanilla unordered list markup; the cascading style sheet rules defined in `Styles.css` are responsible for the aesthetically-pleasing layout.</span></span> <span data-ttu-id="3227e-193">有关上述标记的工作原理的更多详细说明，请参阅[母版页和网站的导航](https://asp.net/learn/data-access/tutorial-03-cs.aspx)教程。</span><span class="sxs-lookup"><span data-stu-id="3227e-193">For a more detailed description of how the above markup works, refer to the [Master Pages and Site Navigation](https://asp.net/learn/data-access/tutorial-03-cs.aspx) tutorial.</span></span>


<span data-ttu-id="3227e-194">[![导航用户界面是呈现使用嵌套无序列表](creating-user-accounts-cs/_static/image11.png)](creating-user-accounts-cs/_static/image10.png)</span><span class="sxs-lookup"><span data-stu-id="3227e-194">[![The Navigational User Interface is Rendered Using Nested Unordered Lists](creating-user-accounts-cs/_static/image11.png)](creating-user-accounts-cs/_static/image10.png)</span></span>

<span data-ttu-id="3227e-195">**图 4**: 导航用户界面是呈现使用嵌套无序列出 ([单击以查看实际尺寸的图像](creating-user-accounts-cs/_static/image12.png))</span><span class="sxs-lookup"><span data-stu-id="3227e-195">**Figure 4**: The Navigational User Interface is Rendered Using Nested Unordered Lists  ([Click to view full-size image](creating-user-accounts-cs/_static/image12.png))</span></span>


### <a name="adding-breadcrumb-navigation"></a><span data-ttu-id="3227e-196">添加痕迹导航</span><span class="sxs-lookup"><span data-stu-id="3227e-196">Adding Breadcrumb Navigation</span></span>

<span data-ttu-id="3227e-197">除了左侧列中的链接列表，让我们还具有每个页面显示[痕迹导航](http://en.wikipedia.org/wiki/Breadcrumb_%28navigation%29)。</span><span class="sxs-lookup"><span data-stu-id="3227e-197">In addition to the list of links in the left column, let's also have each page display a [breadcrumb](http://en.wikipedia.org/wiki/Breadcrumb_%28navigation%29).</span></span> <span data-ttu-id="3227e-198">痕迹导航是快速向用户显示其站点层次结构中的当前位置的导航用户界面元素。</span><span class="sxs-lookup"><span data-stu-id="3227e-198">A breadcrumb is a navigational user interface element that quickly shows users their current position within the site hierarchy.</span></span> <span data-ttu-id="3227e-199">说明如何使用站点图 framework 来确定站点图中的当前页的位置，然后显示痕迹基于此信息。</span><span class="sxs-lookup"><span data-stu-id="3227e-199">The SiteMapPath control uses the Site Map framework to determine the current page's location in the site map and then displays a breadcrumb based on this information.</span></span>

<span data-ttu-id="3227e-200">具体而言，添加`<span>`到母版页的标头元素`<div>`元素，并设置新`<span>`元素的`class`属性设为"痕迹导航"。</span><span class="sxs-lookup"><span data-stu-id="3227e-200">Specifically, add a `<span>` element to the master page's header `<div>` element, and set the new `<span>` element's `class` attribute to "breadcrumb".</span></span> <span data-ttu-id="3227e-201">(`Styles.css`类包含用于"痕迹导航"类的规则。)接下来，添加到此新的 SiteMapPath`<span>`元素。</span><span class="sxs-lookup"><span data-stu-id="3227e-201">(The `Styles.css` class contains a rule for a "breadcrumb" class.) Next, add a SiteMapPath to this new `<span>` element.</span></span>

[!code-aspx[Main](creating-user-accounts-cs/samples/sample4.aspx)]

<span data-ttu-id="3227e-202">图 5 显示的 SiteMapPath 输出时访问`~/Membership/CreatingUserAccounts.aspx`。</span><span class="sxs-lookup"><span data-stu-id="3227e-202">Figure 5 shows the output of the SiteMapPath when visiting `~/Membership/CreatingUserAccounts.aspx`.</span></span>


<span data-ttu-id="3227e-203">[![痕迹导航显示当前页，并在站点中的其上级映射](creating-user-accounts-cs/_static/image14.png)](creating-user-accounts-cs/_static/image13.png)</span><span class="sxs-lookup"><span data-stu-id="3227e-203">[![The Breadcrumb Displays the Current Page and its Ancestors in the Site Map](creating-user-accounts-cs/_static/image14.png)](creating-user-accounts-cs/_static/image13.png)</span></span>

<span data-ttu-id="3227e-204">**图 5**： 痕迹导航站点地图中显示当前页和其祖先 ([单击以查看实际尺寸的图像](creating-user-accounts-cs/_static/image15.png))</span><span class="sxs-lookup"><span data-stu-id="3227e-204">**Figure 5**: The Breadcrumb Displays the Current Page and its Ancestors in the Site Map  ([Click to view full-size image](creating-user-accounts-cs/_static/image15.png))</span></span>


## <a name="step-4-removing-the-custom-principal-and-identity-logic"></a><span data-ttu-id="3227e-205">步骤 4： 删除的自定义主体和标识逻辑</span><span class="sxs-lookup"><span data-stu-id="3227e-205">Step 4: Removing the Custom Principal and Identity Logic</span></span>

<span data-ttu-id="3227e-206">在 *<a id="_msoanchor_7"> </a>[窗体身份验证配置和高级主题](../introduction/forms-authentication-configuration-and-advanced-topics-cs.md)*我们已了解如何将向经过身份验证的用户的自定义主体和标识对象关联的教程。</span><span class="sxs-lookup"><span data-stu-id="3227e-206">In the *<a id="_msoanchor_7"></a>[Forms Authentication Configuration and Advanced Topics](../introduction/forms-authentication-configuration-and-advanced-topics-cs.md)* tutorial we saw how to associate custom principal and identity objects to the authenticated user.</span></span> <span data-ttu-id="3227e-207">我们实现了这一点通过创建事件处理程序中的`Global.asax`为应用程序的`PostAuthenticateRequest`后触发的事件`FormsAuthenticationModule`已经身份验证的用户。</span><span class="sxs-lookup"><span data-stu-id="3227e-207">We accomplished this by creating an event handler in `Global.asax` for the application's `PostAuthenticateRequest` event, which fires after the `FormsAuthenticationModule` has authenticated the user.</span></span> <span data-ttu-id="3227e-208">在此事件处理程序中，我们替换`GenericPrincipal`和`FormsIdentity`通过添加对象`FormsAuthenticationModule`与`CustomPrincipal`和`CustomIdentity`对象我们在该教程中创建。</span><span class="sxs-lookup"><span data-stu-id="3227e-208">In this event handler we replaced the `GenericPrincipal` and `FormsIdentity` objects added by the `FormsAuthenticationModule` with the `CustomPrincipal` and `CustomIdentity` objects we created in that tutorial.</span></span>

<span data-ttu-id="3227e-209">而自定义的主体和标识对象是在某些情况下，在大多数情况下有用`GenericPrincipal`和`FormsIdentity`对象已经足够。</span><span class="sxs-lookup"><span data-stu-id="3227e-209">While custom principal and identity objects are useful in certain scenarios, in most cases the `GenericPrincipal` and `FormsIdentity` objects are sufficient.</span></span> <span data-ttu-id="3227e-210">因此，我认为很值得以返回到默认行为。</span><span class="sxs-lookup"><span data-stu-id="3227e-210">Consequently, I think it would be worthwhile to return to the default behavior.</span></span> <span data-ttu-id="3227e-211">通过删除或注释掉进行此更改`PostAuthenticateRequest`事件处理程序或通过删除`Global.asax`完全文件。</span><span class="sxs-lookup"><span data-stu-id="3227e-211">Make this change by either removing or commenting out the `PostAuthenticateRequest` event handler or by deleting the `Global.asax` file entirely.</span></span>

## <a name="step-5-programmatically-creating-a-new-user"></a><span data-ttu-id="3227e-212">步骤 5： 以编程方式创建新用户</span><span class="sxs-lookup"><span data-stu-id="3227e-212">Step 5: Programmatically Creating a New User</span></span>

<span data-ttu-id="3227e-213">若要创建新的用户帐户通过使用的成员资格 framework`Membership`类的[`CreateUser`方法](https://msdn.microsoft.com/En-US/library/system.web.security.membership.createuser.aspx)。</span><span class="sxs-lookup"><span data-stu-id="3227e-213">To create a new user account through the Membership framework use the `Membership` class's [`CreateUser` method](https://msdn.microsoft.com/En-US/library/system.web.security.membership.createuser.aspx).</span></span> <span data-ttu-id="3227e-214">此方法的输入的用户名、 密码和其他与用户相关的字段的参数。</span><span class="sxs-lookup"><span data-stu-id="3227e-214">This method has input parameters for the username, password, and other user-related fields.</span></span> <span data-ttu-id="3227e-215">在调用，它将新的用户帐户创建委托给配置成员资格提供程序，然后返回[`MembershipUser`对象](https://msdn.microsoft.com/en-us/library/system.web.security.membershipuser.aspx)表示刚创建的用户帐户。</span><span class="sxs-lookup"><span data-stu-id="3227e-215">On invocation, it delegates the creation of the new user account to the configured Membership provider and then returns a [`MembershipUser` object](https://msdn.microsoft.com/en-us/library/system.web.security.membershipuser.aspx) representing the just-created user account.</span></span>

<span data-ttu-id="3227e-216">`CreateUser`方法有四个重载，每个文本框接受不同数量的输入参数：</span><span class="sxs-lookup"><span data-stu-id="3227e-216">The `CreateUser` method has four overloads, each accepting a different number of input parameters:</span></span>

- [`CreateUser(username, password)`](https://msdn.microsoft.com/En-US/library/d8t4h2es.aspx)
- [`CreateUser(username, password, email)`](https://msdn.microsoft.com/En-US/library/t8yy6w3h.aspx)
- [`CreateUser(username, password, email, passwordQuestion, passwordAnswer, isApproved, MembershipCreateStatus)`](https://msdn.microsoft.com/En-US/library/82xx2e62.aspx)
- [`CreateUser(username, password, email, passwordQuestion, passwordAnswer, isApproved, providerUserKey, MembershipCreateStatus)`](https://msdn.microsoft.com/En-US/library/ms152012.aspx)

<span data-ttu-id="3227e-217">在收集信息的量上不同这些四个重载。</span><span class="sxs-lookup"><span data-stu-id="3227e-217">These four overloads differ on the amount of information that is collected.</span></span> <span data-ttu-id="3227e-218">第一个重载，例如，需要只是用户名和密码对于新的用户帐户，而第二个还要求用户的电子邮件地址。</span><span class="sxs-lookup"><span data-stu-id="3227e-218">The first overload, for example, requires just the username and password for the new user account, whereas the second one also requires the user's email address.</span></span>

<span data-ttu-id="3227e-219">这些重载存在，因为创建新的用户帐户所需的信息取决于成员资格提供程序的配置设置。</span><span class="sxs-lookup"><span data-stu-id="3227e-219">These overloads exist because the information needed to create a new user account depends on the Membership provider's configuration settings.</span></span> <span data-ttu-id="3227e-220">在 *<a id="_msoanchor_8"> </a>[在 SQL Server 中创建成员身份架构](creating-the-membership-schema-in-sql-server-cs.md)*教程，我们探讨了中的指定成员资格提供程序配置设置`Web.config`。</span><span class="sxs-lookup"><span data-stu-id="3227e-220">In the *<a id="_msoanchor_8"></a>[Creating the Membership Schema in SQL Server](creating-the-membership-schema-in-sql-server-cs.md)* tutorial we examined specifying Membership provider configuration settings in `Web.config`.</span></span> <span data-ttu-id="3227e-221">表 2 包含的配置设置的完整列表。</span><span class="sxs-lookup"><span data-stu-id="3227e-221">Table 2 included a complete list of the configuration settings.</span></span>

<span data-ttu-id="3227e-222">一个此类成员资格提供程序配置设置会影响什么`CreateUser`可能使用重载是`requiresQuestionAndAnswer`设置。</span><span class="sxs-lookup"><span data-stu-id="3227e-222">One such Membership provider configuration setting that impacts what `CreateUser` overloads may be used is the `requiresQuestionAndAnswer` setting.</span></span> <span data-ttu-id="3227e-223">如果`requiresQuestionAndAnswer`设置为`true`（默认值），然后创建新的用户帐户时我们必须指定一个安全提示问题和答案。</span><span class="sxs-lookup"><span data-stu-id="3227e-223">If `requiresQuestionAndAnswer` is set to `true` (the default), then when creating a new user account we must specify a security question and answer.</span></span> <span data-ttu-id="3227e-224">如果用户需要进行重置或更改其密码，更高版本使用此信息。</span><span class="sxs-lookup"><span data-stu-id="3227e-224">This information is later used if the user needs to reset or change their password.</span></span> <span data-ttu-id="3227e-225">具体而言，此时，它们显示安全问题，并且他们必须输入正确答案若要重置或更改其密码。</span><span class="sxs-lookup"><span data-stu-id="3227e-225">Specifically, at that time they are shown the security question and they must enter the correct answer in order to reset or change their password.</span></span> <span data-ttu-id="3227e-226">因此，如果`requiresQuestionAndAnswer`设置为`true`然后调用前两个任一`CreateUser`重载会引发异常，因为安全问题和答案缺失。</span><span class="sxs-lookup"><span data-stu-id="3227e-226">Consequently, if the `requiresQuestionAndAnswer` is set to `true` then calling either of the first two `CreateUser` overloads results in an exception because the security question and answer are missing.</span></span> <span data-ttu-id="3227e-227">由于我们的应用程序当前配置为需要安全问题和答案，我们将需要时以编程方式创建用户的使用后一种两个重载之一。</span><span class="sxs-lookup"><span data-stu-id="3227e-227">Since our application is currently configured to require a security question and answer, we will need to use one of the latter two overloads when creating user's programmatically.</span></span>

<span data-ttu-id="3227e-228">若要演示如何使用`CreateUser`方法，让我们创建我们其中提示用户输入其名称、 密码、 电子邮件、 和到预定义的安全问题的答案的用户界面。</span><span class="sxs-lookup"><span data-stu-id="3227e-228">To illustrate using the `CreateUser` method, let's create a user interface where we prompt the user for their name, password, email, and an answer to a pre-defined security question.</span></span> <span data-ttu-id="3227e-229">打开`CreatingUserAccounts.aspx`页面`Membership`文件夹并将以下 Web 控件添加到内容控件：</span><span class="sxs-lookup"><span data-stu-id="3227e-229">Open the `CreatingUserAccounts.aspx` page in the `Membership` folder and add the following Web controls to the Content control:</span></span>

- <span data-ttu-id="3227e-230">名为文本框中`Username`</span><span class="sxs-lookup"><span data-stu-id="3227e-230">A TextBox named `Username`</span></span>
- <span data-ttu-id="3227e-231">文本框中，名为`Password`、 其`TextMode`属性设置为`Password`</span><span class="sxs-lookup"><span data-stu-id="3227e-231">A TextBox named `Password`, whose `TextMode` property is set to `Password`</span></span>
- <span data-ttu-id="3227e-232">名为文本框中`Email`</span><span class="sxs-lookup"><span data-stu-id="3227e-232">A TextBox named `Email`</span></span>
- <span data-ttu-id="3227e-233">一个名为标签`SecurityQuestion`与其`Text`属性已清除</span><span class="sxs-lookup"><span data-stu-id="3227e-233">A Label named `SecurityQuestion` with its `Text` property cleared out</span></span>
- <span data-ttu-id="3227e-234">名为文本框中`SecurityAnswer`</span><span class="sxs-lookup"><span data-stu-id="3227e-234">A TextBox named `SecurityAnswer`</span></span>
- <span data-ttu-id="3227e-235">名为的按钮`CreateAccountButton`其文本属性设置为"创建用户帐户"</span><span class="sxs-lookup"><span data-stu-id="3227e-235">A Button named `CreateAccountButton` whose Text property is set to "Create the User Account"</span></span>
- <span data-ttu-id="3227e-236">一个名为的标签控件`CreateAccountResults`与其`Text`属性已清除</span><span class="sxs-lookup"><span data-stu-id="3227e-236">A Label control named `CreateAccountResults` with its `Text` property cleared out</span></span>

<span data-ttu-id="3227e-237">此时你的屏幕应类似于的屏幕快照中图 6 所示。</span><span class="sxs-lookup"><span data-stu-id="3227e-237">At this point your screen should look similar to the screen shot shown in Figure 6.</span></span>


<span data-ttu-id="3227e-238">[![将各种 Web 控件添加到 CreatingUserAccounts.aspx 页](creating-user-accounts-cs/_static/image17.png)](creating-user-accounts-cs/_static/image16.png)</span><span class="sxs-lookup"><span data-stu-id="3227e-238">[![Add the Various Web Controls to the CreatingUserAccounts.aspx Page](creating-user-accounts-cs/_static/image17.png)](creating-user-accounts-cs/_static/image16.png)</span></span>

<span data-ttu-id="3227e-239">**图 6**: 各种 Web 将控件添加到`CreatingUserAccounts.aspx`页 ([单击以查看实际尺寸的图像](creating-user-accounts-cs/_static/image18.png))</span><span class="sxs-lookup"><span data-stu-id="3227e-239">**Figure 6**: Add the Various Web Controls to the `CreatingUserAccounts.aspx` Page  ([Click to view full-size image](creating-user-accounts-cs/_static/image18.png))</span></span>


<span data-ttu-id="3227e-240">`SecurityQuestion`标签和`SecurityAnswer`文本框中旨在显示预定义的安全问题并收集用户的答案。</span><span class="sxs-lookup"><span data-stu-id="3227e-240">The `SecurityQuestion` Label and `SecurityAnswer` TextBox are intended to display a pre-defined security question and collect the user's answer.</span></span> <span data-ttu-id="3227e-241">请注意，安全问题和答案存储基于用户的用户，因此很可能允许每个用户定义其自己的安全问题。</span><span class="sxs-lookup"><span data-stu-id="3227e-241">Note that both the security question and answer are stored on a user-by-user basis, so it is possible to allow each user to define their own security question.</span></span> <span data-ttu-id="3227e-242">但是，对于我已决定使用一个通用安全问题，即此示例:"什么是您喜爱的颜色？"</span><span class="sxs-lookup"><span data-stu-id="3227e-242">However, for this example I have decided to use a universal security question, namely: "What is your favorite color?"</span></span>

<span data-ttu-id="3227e-243">若要实现此预定义的安全问题，请将常量添加到页面的代码隐藏类名为`passwordQuestion`，将其分配安全问题。</span><span class="sxs-lookup"><span data-stu-id="3227e-243">To implement this pre-defined security question, add a constant to the page's code-behind class named `passwordQuestion`, assigning it the security question.</span></span> <span data-ttu-id="3227e-244">然后，在`Page_Load`事件处理程序中，分配到此常量`SecurityQuestion`标签的`Text`属性：</span><span class="sxs-lookup"><span data-stu-id="3227e-244">Then, in the `Page_Load` event handler, assign this constant to the `SecurityQuestion` Label's `Text` property:</span></span>

[!code-csharp[Main](creating-user-accounts-cs/samples/sample5.cs)]

<span data-ttu-id="3227e-245">接下来，创建的事件处理程序`CreateAccountButton`的`Click`事件并添加以下代码：</span><span class="sxs-lookup"><span data-stu-id="3227e-245">Next, create an event handler for the `CreateAccountButton`'s `Click` event and add the following code:</span></span>

[!code-csharp[Main](creating-user-accounts-cs/samples/sample6.cs)]

<span data-ttu-id="3227e-246">`Click`事件处理程序启动通过定义一个名为变量`createStatus`类型的[ `MembershipCreateStatus` ](https://msdn.microsoft.com/En-US/library/system.web.security.membershipcreatestatus.aspx)。</span><span class="sxs-lookup"><span data-stu-id="3227e-246">The `Click` event handler starts by defining a variable named `createStatus` of type [`MembershipCreateStatus`](https://msdn.microsoft.com/En-US/library/system.web.security.membershipcreatestatus.aspx).</span></span> <span data-ttu-id="3227e-247">`MembershipCreateStatus`是一个枚举，指示的状态`CreateUser`操作。</span><span class="sxs-lookup"><span data-stu-id="3227e-247">`MembershipCreateStatus` is an enumeration that indicates the status of the `CreateUser` operation.</span></span> <span data-ttu-id="3227e-248">例如，如果用户成功创建帐户后，生成`MembershipCreateStatus`实例将设置为值`Success`; 上的其他另一方面，如果操作失败，因为已存在具有相同的用户名的用户，它将设置为的值`DuplicateUserName`.</span><span class="sxs-lookup"><span data-stu-id="3227e-248">For example, if the user account is created successfully, the resulting `MembershipCreateStatus` instance will be set to a value of `Success`; on the other hand, if the operation fails because there already exists a user with the same username, it will be set to a value of `DuplicateUserName`.</span></span> <span data-ttu-id="3227e-249">在`CreateUser`我们使用的重载，我们需要将`MembershipCreateStatus`到该方法为实例`out`参数。</span><span class="sxs-lookup"><span data-stu-id="3227e-249">In the `CreateUser` overload we use, we need to pass a `MembershipCreateStatus` instance into the method as an `out` parameter.</span></span> <span data-ttu-id="3227e-250">此参数设置为适当的值中`CreateUser`方法，并且我们可以在方法调用，以确定是否已成功创建用户帐户后检查其值。</span><span class="sxs-lookup"><span data-stu-id="3227e-250">This parameter is set to the appropriate value within the `CreateUser` method, and we can examine its value after the method call to determine whether the user account was successfully created.</span></span>

<span data-ttu-id="3227e-251">在调用`CreateUser`，并传入`createStatus`、`switch`语句用于输出赋予的值根据相应的消息`createStatus`。</span><span class="sxs-lookup"><span data-stu-id="3227e-251">After calling `CreateUser`, passing in `createStatus`, a `switch` statement is used to output an appropriate message depending on the value assigned to `createStatus`.</span></span> <span data-ttu-id="3227e-252">已成功创建新用户时，图 7 显示输出。</span><span class="sxs-lookup"><span data-stu-id="3227e-252">Figures 7 shows the output when a new user has successfully been created.</span></span> <span data-ttu-id="3227e-253">未能创建用户帐户时，数字 8 和 9 显示的输出。</span><span class="sxs-lookup"><span data-stu-id="3227e-253">Figures 8 and 9 show the output when the user account is not created.</span></span> <span data-ttu-id="3227e-254">在图 8 中，在距访客输入了不满足密码强度要求拼在成员资格提供程序的配置设置中的五个字母密码。</span><span class="sxs-lookup"><span data-stu-id="3227e-254">In Figure 8, the visitor entered a five-letter password, which does not meet the password strength requirements spelled out in the Membership provider's configuration settings.</span></span> <span data-ttu-id="3227e-255">在图 9 中，在距访客正在尝试使用现有的用户名 （图 7 中创建一个） 创建用户帐户。</span><span class="sxs-lookup"><span data-stu-id="3227e-255">In Figure 9, the visitor is attempting to create a user account with an existing username (the one created in Figure 7).</span></span>


<span data-ttu-id="3227e-256">[![新的用户帐户是已成功创建](creating-user-accounts-cs/_static/image20.png)](creating-user-accounts-cs/_static/image19.png)</span><span class="sxs-lookup"><span data-stu-id="3227e-256">[![A New User Account is Successfully Created](creating-user-accounts-cs/_static/image20.png)](creating-user-accounts-cs/_static/image19.png)</span></span>

<span data-ttu-id="3227e-257">**图 7**: 新用户帐户是已成功创建 ([单击以查看实际尺寸的图像](creating-user-accounts-cs/_static/image21.png))</span><span class="sxs-lookup"><span data-stu-id="3227e-257">**Figure 7**: A New User Account is Successfully Created  ([Click to view full-size image](creating-user-accounts-cs/_static/image21.png))</span></span>


<span data-ttu-id="3227e-258">[![创建不用户帐户，因为提供的密码为太弱](creating-user-accounts-cs/_static/image23.png)](creating-user-accounts-cs/_static/image22.png)</span><span class="sxs-lookup"><span data-stu-id="3227e-258">[![The User Account is Not Created Because the Supplied Password is Too Weak](creating-user-accounts-cs/_static/image23.png)](creating-user-accounts-cs/_static/image22.png)</span></span>

<span data-ttu-id="3227e-259">**图 8**: 提供的密码强度太弱因为未创建用户帐户 ([单击以查看实际尺寸的图像](creating-user-accounts-cs/_static/image24.png))</span><span class="sxs-lookup"><span data-stu-id="3227e-259">**Figure 8**: The User Account is Not Created Because the Supplied Password is Too Weak  ([Click to view full-size image](creating-user-accounts-cs/_static/image24.png))</span></span>


<span data-ttu-id="3227e-260">[![用户帐户是不创建因为用户名已在使用中](creating-user-accounts-cs/_static/image26.png)](creating-user-accounts-cs/_static/image25.png)</span><span class="sxs-lookup"><span data-stu-id="3227e-260">[![The User Account is Not Created Because the Username is Already in Use](creating-user-accounts-cs/_static/image26.png)](creating-user-accounts-cs/_static/image25.png)</span></span>

<span data-ttu-id="3227e-261">**图 9**: 用户帐户是不创建因为用户名已在使用 ([单击以查看实际尺寸的图像](creating-user-accounts-cs/_static/image27.png))</span><span class="sxs-lookup"><span data-stu-id="3227e-261">**Figure 9**: The User Account is Not Created Because the Username is Already in Use  ([Click to view full-size image](creating-user-accounts-cs/_static/image27.png))</span></span>


> [!NOTE]
> <span data-ttu-id="3227e-262">你可能想知道如何确定成功或失败时使用前两个之一`CreateUser`方法重载，两者的它具有的类型参数`MembershipCreateStatus`。</span><span class="sxs-lookup"><span data-stu-id="3227e-262">You may be wondering how to determine success or failure when using one of the first two `CreateUser` method overloads, neither of which has a parameter of type `MembershipCreateStatus`.</span></span> <span data-ttu-id="3227e-263">这些前两个重载会引发[`MembershipCreateUserException`异常](https://msdn.microsoft.com/en-us/library/system.web.security.membershipcreateuserexception.aspx)在发生故障，其中包括[`StatusCode`属性](https://msdn.microsoft.com/en-us/library/system.web.security.membershipcreateuserexception.statuscode.aspx)类型的`MembershipCreateStatus`。</span><span class="sxs-lookup"><span data-stu-id="3227e-263">These first two overloads throw a [`MembershipCreateUserException` exception](https://msdn.microsoft.com/en-us/library/system.web.security.membershipcreateuserexception.aspx) in the face of a failure, which includes a [`StatusCode` property](https://msdn.microsoft.com/en-us/library/system.web.security.membershipcreateuserexception.statuscode.aspx) of type `MembershipCreateStatus`.</span></span>


<span data-ttu-id="3227e-264">在创建后的几个用户帐户，验证是否已通过列出的内容创建了帐户`aspnet_Users`和`aspnet_Membership`中的表`SecurityTutorials.mdf`数据库。</span><span class="sxs-lookup"><span data-stu-id="3227e-264">After creating a few user accounts, verify that the accounts have been created by listing the contents of the `aspnet_Users` and `aspnet_Membership` tables in the `SecurityTutorials.mdf` database.</span></span> <span data-ttu-id="3227e-265">如图 10 显示，但我添加了两个用户通过`CreatingUserAccounts.aspx`页： Tito 和罗斯向她。</span><span class="sxs-lookup"><span data-stu-id="3227e-265">As Figure 10 shows, I have added two users via the `CreatingUserAccounts.aspx` page: Tito and Bruce.</span></span>


<span data-ttu-id="3227e-266">[![在成员资格用户存储区中有两个用户： Tito 和罗斯向她](creating-user-accounts-cs/_static/image29.png)](creating-user-accounts-cs/_static/image28.png)</span><span class="sxs-lookup"><span data-stu-id="3227e-266">[![There are Two Users in the Membership User Store: Tito and Bruce](creating-user-accounts-cs/_static/image29.png)](creating-user-accounts-cs/_static/image28.png)</span></span>

<span data-ttu-id="3227e-267">**图 10**： 在成员资格用户存储区中有两个用户： Tito 和罗斯向她 ([单击以查看实际尺寸的图像](creating-user-accounts-cs/_static/image30.png))</span><span class="sxs-lookup"><span data-stu-id="3227e-267">**Figure 10**: There are Two Users in the Membership User Store: Tito and Bruce  ([Click to view full-size image](creating-user-accounts-cs/_static/image30.png))</span></span>


<span data-ttu-id="3227e-268">虽然成员资格用户存储现在包含罗斯向她和 Tito 的帐户的信息，我们还实现允许进行罗斯向她或 Tito 登录到站点的功能。</span><span class="sxs-lookup"><span data-stu-id="3227e-268">While the Membership user store now includes Bruce and Tito's account information, we have yet to implement functionality that allows for Bruce or Tito to log on to the site.</span></span> <span data-ttu-id="3227e-269">目前，`Login.aspx`验证用户的凭据对硬编码的用户名/密码对 – 集与其*不*验证针对成员资格框架提供的凭据。</span><span class="sxs-lookup"><span data-stu-id="3227e-269">Currently, `Login.aspx` validates the user's credentials against a hard-coded set of username/password pairs – it does *not* validate the supplied credentials against the Membership framework.</span></span> <span data-ttu-id="3227e-270">现在出现在新的用户帐户的`aspnet_Users`和`aspnet_Membership`表将需要满足要求。</span><span class="sxs-lookup"><span data-stu-id="3227e-270">For now seeing the new user accounts in the `aspnet_Users` and `aspnet_Membership` tables will have to suffice.</span></span> <span data-ttu-id="3227e-271">在下一步的教程中，  *<a id="_msoanchor_9"> </a>[验证用户凭据对成员资格用户存储](validating-user-credentials-against-the-membership-user-store-cs.md)*，我们将更新成员资格存储针对验证的登录页。</span><span class="sxs-lookup"><span data-stu-id="3227e-271">In the next tutorial, *<a id="_msoanchor_9"></a>[Validating User Credentials Against the Membership User Store](validating-user-credentials-against-the-membership-user-store-cs.md)*, we will update the login page to validate against the Membership store.</span></span>

> [!NOTE]
> <span data-ttu-id="3227e-272">如果你看不到内的任何用户你`SecurityTutorials.mdf`数据库，则可能是因为 web 应用程序正在使用默认成员资格提供程序， `AspNetSqlMembershipProvider`，它使用`ASPNETDB.mdf`作为其用户存储区的数据库。</span><span class="sxs-lookup"><span data-stu-id="3227e-272">If you do not see any users in your `SecurityTutorials.mdf` database, it may be because your web application is using the default Membership provider, `AspNetSqlMembershipProvider`, which uses the `ASPNETDB.mdf` database as its user store.</span></span> <span data-ttu-id="3227e-273">若要确定如果出现此问题，请单击解决方案资源管理器中的刷新按钮。</span><span class="sxs-lookup"><span data-stu-id="3227e-273">To determine if this is the problem, click the Refresh button in the Solution Explorer.</span></span> <span data-ttu-id="3227e-274">如果一个名为数据库`ASPNETDB.mdf`已添加到`App_Data`文件夹中，出现此问题。</span><span class="sxs-lookup"><span data-stu-id="3227e-274">If a database named `ASPNETDB.mdf` has been added to the `App_Data` folder, this is the problem.</span></span> <span data-ttu-id="3227e-275">返回到的第 4 步 *<a id="_msoanchor_10"> </a>[在 SQL Server 中创建成员身份架构](creating-the-membership-schema-in-sql-server-cs.md)*教程有关如何正确配置成员资格提供程序的说明。</span><span class="sxs-lookup"><span data-stu-id="3227e-275">Return to Step 4 of the *<a id="_msoanchor_10"></a>[Creating the Membership Schema in SQL Server](creating-the-membership-schema-in-sql-server-cs.md)* tutorial for instructions on how to properly configure the Membership provider.</span></span>


<span data-ttu-id="3227e-276">在大多数创建用户帐户方案、 在距访客出现某些接口输入他们的用户名、 密码、 电子邮件和其他重要信息，此时创建新的帐户。</span><span class="sxs-lookup"><span data-stu-id="3227e-276">In most create user account scenarios, the visitor is presented with some interface to enter their username, password, email, and other essential information, at which point a new account is created.</span></span> <span data-ttu-id="3227e-277">在此步骤中，我们看手动生成此类接口，然后了解了如何使用`Membership.CreateUser`方法以编程方式添加新的用户帐户基于用户的输入。</span><span class="sxs-lookup"><span data-stu-id="3227e-277">In this step we looked at building such an interface by hand and then saw how to use the `Membership.CreateUser` method to programmatically add the new user account based on the user's inputs.</span></span> <span data-ttu-id="3227e-278">但是，我们的代码，只需创建新的用户帐户。</span><span class="sxs-lookup"><span data-stu-id="3227e-278">Our code, however, just created the new user account.</span></span> <span data-ttu-id="3227e-279">它没有执行任何跟进操作，如用户访问刚创建的用户帐户，该站点中的日志记录或向用户发送确认电子邮件。</span><span class="sxs-lookup"><span data-stu-id="3227e-279">It did not perform any follow up actions, like logging in the user to the site under the just-created user account, or sending a confirmation email to the user.</span></span> <span data-ttu-id="3227e-280">这些附加步骤将需要附加代码按钮的`Click`事件处理程序。</span><span class="sxs-lookup"><span data-stu-id="3227e-280">These additional steps would require additional code in the Button's `Click` event handler.</span></span>

<span data-ttu-id="3227e-281">ASP.NET 附带了用于处理从呈现用户界面，用于创建新的用户帐户，在成员资格框架中创建帐户并执行后的帐户的用户帐户创建过程，通过创建任务，例如发送确认电子邮件和刚创建的用户登录到网站。</span><span class="sxs-lookup"><span data-stu-id="3227e-281">ASP.NET ships with the CreateUserWizard control, which is designed to handle the user account creation process, from rendering a user interface for creating new user accounts, to creating the account in the Membership framework and performing post-account creation tasks, such as sending a confirmation email and logging the just-created user into the site.</span></span> <span data-ttu-id="3227e-282">使用通过只需从工具箱拖到页面上，拖动通过，然后设置的几个属性。</span><span class="sxs-lookup"><span data-stu-id="3227e-282">Using the CreateUserWizard control is as simple as dragging the CreateUserWizard control from the Toolbox onto a page, and then setting a few properties.</span></span> <span data-ttu-id="3227e-283">在大多数情况下，你不需要编写一行代码。</span><span class="sxs-lookup"><span data-stu-id="3227e-283">In most cases, you won't need to write a single line of code.</span></span> <span data-ttu-id="3227e-284">我们将探讨此极好的控件处于第 6 步中的详细信息。</span><span class="sxs-lookup"><span data-stu-id="3227e-284">We will explore this nifty control in detail in Step 6.</span></span>

<span data-ttu-id="3227e-285">如果通过典型的创建帐户网页仅创建新的用户帐户，它不太曾经需要编写代码，使用`CreateUser`方法，通过为可能满足您的需求。</span><span class="sxs-lookup"><span data-stu-id="3227e-285">If new user accounts are only created through a typical Create Account web page, it is unlikely that you will ever need to write code that uses the `CreateUser` method, as the CreateUserWizard control will likely meet your needs.</span></span> <span data-ttu-id="3227e-286">但是，`CreateUser`需要提供高度自定义创建帐户的用户体验，或者当您需要以编程方式创建新的用户帐户，通过替代接口，方法是在方案中非常方便。</span><span class="sxs-lookup"><span data-stu-id="3227e-286">However, the `CreateUser` method is handy in scenarios where you need a highly customized Create Account user experience or when you need to programmatically create new user accounts through an alternative interface.</span></span> <span data-ttu-id="3227e-287">例如，你可能必须允许用户上载 XML 文件，其中包含从某个其他应用程序的用户信息的页。</span><span class="sxs-lookup"><span data-stu-id="3227e-287">For example, you might have a page that allows a user to upload an XML file that contains user information from some other application.</span></span> <span data-ttu-id="3227e-288">页可能会的分析已上载的 XML 的内容文件，并在 XML 中创建表示每个用户的新帐户，通过调用`CreateUser`方法。</span><span class="sxs-lookup"><span data-stu-id="3227e-288">The page might parses the contents of the uploaded XML file and create a new account for each user represented in the XML by calling the `CreateUser` method.</span></span>

## <a name="step-6-creating-a-new-user-with-the-createuserwizard-control"></a><span data-ttu-id="3227e-289">步骤 6: 通过使用创建新用户</span><span class="sxs-lookup"><span data-stu-id="3227e-289">Step 6: Creating a New User with the CreateUserWizard Control</span></span>

<span data-ttu-id="3227e-290">ASP.NET 附带了大量的登录 Web 控件。</span><span class="sxs-lookup"><span data-stu-id="3227e-290">ASP.NET ships with a number of Login Web controls.</span></span> <span data-ttu-id="3227e-291">这些控件有助于许多常见用户帐户和登录名相关方案。</span><span class="sxs-lookup"><span data-stu-id="3227e-291">These controls aid in many common user account- and login-related scenarios.</span></span> <span data-ttu-id="3227e-292">[通过](https://quickstarts.asp.net/QuickStartv20/aspnet/doc/ctrlref/login/createuserwizard.aspx)一个此类旨在提供用于将新的用户帐户添加到成员资格 framework 的用户界面的控件。</span><span class="sxs-lookup"><span data-stu-id="3227e-292">The [CreateUserWizard control](https://quickstarts.asp.net/QuickStartv20/aspnet/doc/ctrlref/login/createuserwizard.aspx) is one such control that is designed to present a user interface for adding a new user account to the Membership framework.</span></span>

<span data-ttu-id="3227e-293">很多其他登录名相关的 Web 控件，如 CreateUserWizard 可用而无需编写一行代码。</span><span class="sxs-lookup"><span data-stu-id="3227e-293">Like many of the other Login-related Web controls, the CreateUserWizard can be used without writing a single line of code.</span></span> <span data-ttu-id="3227e-294">它直观地提供用户界面基于成员资格提供程序的配置设置和内部调用`Membership`类的`CreateUser`方法后用户输入所需的信息并单击"创建用户"按钮。</span><span class="sxs-lookup"><span data-stu-id="3227e-294">It intuitively provides a user interface based on the Membership provider's configuration settings and internally calls the `Membership` class's `CreateUser` method after the user enters the necessary information and clicks the "Create User" button.</span></span> <span data-ttu-id="3227e-295">通过可极自定义。</span><span class="sxs-lookup"><span data-stu-id="3227e-295">The CreateUserWizard control is extremely customizable.</span></span> <span data-ttu-id="3227e-296">有一个主机为帐户创建过程的各个阶段激发的事件。</span><span class="sxs-lookup"><span data-stu-id="3227e-296">There are a host of events that fire during various stages of the account creation process.</span></span> <span data-ttu-id="3227e-297">根据需要帐户创建工作流中插入自定义逻辑，我们可以创建事件处理程序。</span><span class="sxs-lookup"><span data-stu-id="3227e-297">We can create event handlers, as needed, to inject custom logic into the account creation workflow.</span></span> <span data-ttu-id="3227e-298">此外，CreateUserWizard 的外观会非常灵活。</span><span class="sxs-lookup"><span data-stu-id="3227e-298">Furthermore, the CreateUserWizard's appearance is very flexible.</span></span> <span data-ttu-id="3227e-299">有多个定义的默认接口; 外观的属性如有必要，该控件可以转换为模板，或可能添加其他用户注册"步骤"。</span><span class="sxs-lookup"><span data-stu-id="3227e-299">There are a number of properties that define the appearance of the default interface; if necessary, the control can be converted into a template or additional user registration "steps" may be added.</span></span>

<span data-ttu-id="3227e-300">让我们开始看一下使用通过默认接口和行为。</span><span class="sxs-lookup"><span data-stu-id="3227e-300">Let's start with a look at using the CreateUserWizard control's default interface and behavior.</span></span> <span data-ttu-id="3227e-301">然后，我们将探讨如何自定义控件的属性和事件通过外观。</span><span class="sxs-lookup"><span data-stu-id="3227e-301">We'll then explore how to customize the appearance via the control's properties and events.</span></span>

### <a name="examining-the-createuserwizards-default-interface-and-behavior"></a><span data-ttu-id="3227e-302">检查 CreateUserWizard 的默认接口和行为</span><span class="sxs-lookup"><span data-stu-id="3227e-302">Examining the CreateUserWizard's Default Interface and Behavior</span></span>

<span data-ttu-id="3227e-303">返回到`CreatingUserAccounts.aspx`页面`Membership`文件夹中，切换到设计或拆分模式中，并将通过添加到页面顶部。</span><span class="sxs-lookup"><span data-stu-id="3227e-303">Return to the `CreatingUserAccounts.aspx` page in the `Membership` folder, switch to the Design or Split mode, and then add a CreateUserWizard control to the top of the page.</span></span> <span data-ttu-id="3227e-304">通过在工具箱的登录控件部分下归档。</span><span class="sxs-lookup"><span data-stu-id="3227e-304">The CreateUserWizard control is filed under the Toolbox's Login controls section.</span></span> <span data-ttu-id="3227e-305">在添加控件后, 设置其`ID`属性`RegisterUser`。</span><span class="sxs-lookup"><span data-stu-id="3227e-305">After adding the control, set its `ID` property to `RegisterUser`.</span></span> <span data-ttu-id="3227e-306">图 11 显示中的屏幕截图，如 CreateUserWizard 呈现为新用户的用户名、 密码、 电子邮件地址和安全问题和答案的文本框中的接口。</span><span class="sxs-lookup"><span data-stu-id="3227e-306">As the screen shot in Figure 11 shows, the CreateUserWizard renders an interface with textboxes for the new user's username, password, email address, and security question and answer.</span></span>


<span data-ttu-id="3227e-307">[![通过呈现泛型创建用户界面](creating-user-accounts-cs/_static/image32.png)](creating-user-accounts-cs/_static/image31.png)</span><span class="sxs-lookup"><span data-stu-id="3227e-307">[![The CreateUserWizard Control Renders a Generic Create User Interface](creating-user-accounts-cs/_static/image32.png)](creating-user-accounts-cs/_static/image31.png)</span></span>

<span data-ttu-id="3227e-308">**图 11**: 通过呈现泛型的创建用户界面 ([单击以查看实际尺寸的图像](creating-user-accounts-cs/_static/image33.png))</span><span class="sxs-lookup"><span data-stu-id="3227e-308">**Figure 11**: The CreateUserWizard Control Renders a Generic Create User Interface  ([Click to view full-size image](creating-user-accounts-cs/_static/image33.png))</span></span>


<span data-ttu-id="3227e-309">让我们花些时间比较由通过与我们在步骤 5 中创建的接口生成的默认用户界面。</span><span class="sxs-lookup"><span data-stu-id="3227e-309">Let's take a moment to compare the default user interface generated by the CreateUserWizard control with the interface we created in Step 5.</span></span> <span data-ttu-id="3227e-310">对于初学者，通过允许访问者来指定安全问题和答案，而我们手动创建接口使用预定义的安全问题。</span><span class="sxs-lookup"><span data-stu-id="3227e-310">For starters, the CreateUserWizard control allows the visitor to specify both the security question and answer, whereas our manually-created interface used a pre-defined security question.</span></span> <span data-ttu-id="3227e-311">通过接口还包括验证控件，而我们不得不尚未在我们接口的窗体字段上实现验证。</span><span class="sxs-lookup"><span data-stu-id="3227e-311">The CreateUserWizard control's interface also includes validation controls, whereas we had yet to implement validation on our interface's form fields.</span></span> <span data-ttu-id="3227e-312">并 CreateUserWizard 控件接口包含 （以及以确保输入的文本的"密码"和"比较密码"文本框中相等 CompareValidator)"确认密码"文本框。</span><span class="sxs-lookup"><span data-stu-id="3227e-312">And the CreateUserWizard control interface includes a "Confirm Password" textbox (along with a CompareValidator to ensure that the text entered the "Password" and "Compare Password" textboxes are equal).</span></span>

<span data-ttu-id="3227e-313">有趣的是通过向成员资格提供程序的配置设置，在其用户界面进行呈现时。</span><span class="sxs-lookup"><span data-stu-id="3227e-313">What's interesting is that the CreateUserWizard control consults the Membership provider's configuration settings when rendering its user interface.</span></span> <span data-ttu-id="3227e-314">例如，安全问题和答案文本框中仅显示如果`requiresQuestionAndAnswer`设置为 True。</span><span class="sxs-lookup"><span data-stu-id="3227e-314">For example, the security question and answer textboxes are only displayed if `requiresQuestionAndAnswer` is set to True.</span></span> <span data-ttu-id="3227e-315">同样，CreateUserWizard 会自动添加 RegularExpressionValidator 控件，以确保密码强度要求满足，并设置其`ErrorMessage`和`ValidationExpression`属性基于`minRequiredPasswordLength`， `minRequiredNonalphanumericCharacters`，和`passwordStrengthRegularExpression`配置设置。</span><span class="sxs-lookup"><span data-stu-id="3227e-315">Likewise, CreateUserWizard automatically adds a RegularExpressionValidator control to ensure that the password strength requirements are met, and sets its `ErrorMessage` and `ValidationExpression` properties based on the `minRequiredPasswordLength`, `minRequiredNonalphanumericCharacters`, and `passwordStrengthRegularExpression` configuration settings.</span></span>

<span data-ttu-id="3227e-316">通过，正如其名，派生自[向导控件](https://msdn.microsoft.com/en-us/library/s2etd1ek.aspx)。</span><span class="sxs-lookup"><span data-stu-id="3227e-316">The CreateUserWizard control, as its name implies, is derived from the [Wizard control](https://msdn.microsoft.com/en-us/library/s2etd1ek.aspx).</span></span> <span data-ttu-id="3227e-317">向导控件被设计用于提供用于完成多步骤任务的接口。</span><span class="sxs-lookup"><span data-stu-id="3227e-317">Wizard controls are designed to provide an interface for completing multi-step tasks.</span></span> <span data-ttu-id="3227e-318">向导控件可能包含任意数目的`WizardSteps`，其中每个是一个模板，定义 HTML 和 Web 控件为该步骤。</span><span class="sxs-lookup"><span data-stu-id="3227e-318">A Wizard control may have an arbitrary number of `WizardSteps`, each of which is a template that defines the HTML and Web controls for that step.</span></span> <span data-ttu-id="3227e-319">向导控件最初显示第一个`WizardStep`，以及允许用户可从某一步前进到下一行，或返回到前面的步骤的导航控件。</span><span class="sxs-lookup"><span data-stu-id="3227e-319">The Wizard control initially displays the first `WizardStep`, along with navigation controls that permit the user to proceed from one step to the next, or to return to previous steps.</span></span>

<span data-ttu-id="3227e-320">如图 11 中的声明性标记所示，通过默认接口包括两个`WizardSteps:`</span><span class="sxs-lookup"><span data-stu-id="3227e-320">As the declarative markup in Figure 11 shows, the CreateUserWizard control's default interface includes two `WizardSteps:`</span></span>

- <span data-ttu-id="3227e-321">[`CreateUserWizardStep`](https://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.createuserwizardstep.aspx)– 呈现的界面，以收集用于创建新的用户帐户的信息。</span><span class="sxs-lookup"><span data-stu-id="3227e-321">[`CreateUserWizardStep`](https://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.createuserwizardstep.aspx) – renders the interface to collect information for creating the new user account.</span></span> <span data-ttu-id="3227e-322">这是图 11 中所示的步骤。</span><span class="sxs-lookup"><span data-stu-id="3227e-322">This is the step shown in Figure 11.</span></span>
- <span data-ttu-id="3227e-323">[`CompleteWizardStep`](https://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.completewizardstep.aspx)– 呈现，该值指示该帐户已成功创建一条消息。</span><span class="sxs-lookup"><span data-stu-id="3227e-323">[`CompleteWizardStep`](https://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.completewizardstep.aspx) – renders a message indicating that the account has successfully been created.</span></span>

<span data-ttu-id="3227e-324">可以修改 CreateUserWizard 的外观和行为，通过将上述任一步骤转换为模板，或添加自己`WizardSteps`。</span><span class="sxs-lookup"><span data-stu-id="3227e-324">The CreateUserWizard's appearance and behavior can be modified by converting either of these steps to templates, or by adding your own `WizardSteps`.</span></span> <span data-ttu-id="3227e-325">我们将考察添加`WizardStep`到中的注册界面*存储的其他用户信息*教程。</span><span class="sxs-lookup"><span data-stu-id="3227e-325">We will look at adding a `WizardStep` to the registration interface in the *Storing Additional User Information* tutorial.</span></span>

<span data-ttu-id="3227e-326">我们来看通过在操作中。</span><span class="sxs-lookup"><span data-stu-id="3227e-326">Let's see the CreateUserWizard control in action.</span></span> <span data-ttu-id="3227e-327">请访问`CreatingUserAccounts.aspx`通过浏览器的页。</span><span class="sxs-lookup"><span data-stu-id="3227e-327">Visit the `CreatingUserAccounts.aspx` page through a browser.</span></span> <span data-ttu-id="3227e-328">首先到 CreateUserWizard 的界面中输入一些无效的值。</span><span class="sxs-lookup"><span data-stu-id="3227e-328">Start by entering some invalid values into the CreateUserWizard's interface.</span></span> <span data-ttu-id="3227e-329">请尝试输入到密码强度要求或将"用户名"文本框中为空的密码不符合。</span><span class="sxs-lookup"><span data-stu-id="3227e-329">Try entering a password that doesn't conform to the password strength requirements, or leaving the "User Name" textbox empty.</span></span> <span data-ttu-id="3227e-330">CreateUserWizard 将显示相应的错误消息。</span><span class="sxs-lookup"><span data-stu-id="3227e-330">The CreateUserWizard will display an appropriate error message.</span></span> <span data-ttu-id="3227e-331">图 12 显示输出时尝试创建具有不足强密码的用户。</span><span class="sxs-lookup"><span data-stu-id="3227e-331">Figure 12 shows the output when attempting to create a user with an insufficiently strong password.</span></span>


<span data-ttu-id="3227e-332">[![CreateUserWizard 自动插入验证控件](creating-user-accounts-cs/_static/image35.png)](creating-user-accounts-cs/_static/image34.png)</span><span class="sxs-lookup"><span data-stu-id="3227e-332">[![The CreateUserWizard Automatically Injects Validation Controls](creating-user-accounts-cs/_static/image35.png)](creating-user-accounts-cs/_static/image34.png)</span></span>

<span data-ttu-id="3227e-333">**图 12**: CreateUserWizard 自动插入验证控件 ([单击以查看实际尺寸的图像](creating-user-accounts-cs/_static/image36.png))</span><span class="sxs-lookup"><span data-stu-id="3227e-333">**Figure 12**: The CreateUserWizard Automatically Injects Validation Controls  ([Click to view full-size image](creating-user-accounts-cs/_static/image36.png))</span></span>


<span data-ttu-id="3227e-334">接下来，向 CreateUserWizard 输入适当的值，然后单击"创建用户"按钮。</span><span class="sxs-lookup"><span data-stu-id="3227e-334">Next, enter appropriate values into the CreateUserWizard and click the "Create User" button.</span></span> <span data-ttu-id="3227e-335">假设已输入必填的字段，并且密码的强度就足够了，CreateUserWizard 将创建新的用户帐户通过成员资格框架，然后显示`CompleteWizardStep`的接口 （请参阅图 13）。</span><span class="sxs-lookup"><span data-stu-id="3227e-335">Assuming the required fields have been entered and the password's strength is sufficient, the CreateUserWizard will create a new user account through the Membership framework and then display the `CompleteWizardStep`'s interface (see Figure 13).</span></span> <span data-ttu-id="3227e-336">在后台，CreateUserWizard 调用`Membership.CreateUser`方法，就像我们未在步骤 5 中一样。</span><span class="sxs-lookup"><span data-stu-id="3227e-336">Behind the scenes, the CreateUserWizard calls the `Membership.CreateUser` method, just like we did in Step 5.</span></span>


<span data-ttu-id="3227e-337">[![新的用户帐户已成功创建](creating-user-accounts-cs/_static/image38.png)](creating-user-accounts-cs/_static/image37.png)</span><span class="sxs-lookup"><span data-stu-id="3227e-337">[![A New User Account has Successfully Been Created](creating-user-accounts-cs/_static/image38.png)](creating-user-accounts-cs/_static/image37.png)</span></span>

<span data-ttu-id="3227e-338">**图 13**: 新的用户帐户已成功创建 ([单击以查看实际尺寸的图像](creating-user-accounts-cs/_static/image39.png))</span><span class="sxs-lookup"><span data-stu-id="3227e-338">**Figure 13**: A New User Account has Successfully Been Created  ([Click to view full-size image](creating-user-accounts-cs/_static/image39.png))</span></span>


> [!NOTE]
> <span data-ttu-id="3227e-339">如图 13 所示，`CompleteWizardStep`的接口包含一个继续按钮。</span><span class="sxs-lookup"><span data-stu-id="3227e-339">As Figure 13 shows, the `CompleteWizardStep`'s interface includes a Continue button.</span></span> <span data-ttu-id="3227e-340">但是，此时只需单击以执行回发时，将在距访客保留同一页上。</span><span class="sxs-lookup"><span data-stu-id="3227e-340">However, at this point clicking it just performs a postback, leaving the visitor on the same page.</span></span> <span data-ttu-id="3227e-341">在"CreateUserWizard 的外观和行为通过其属性将自定义"部分，我们将看如何可以发送到在距访客此按钮`Default.aspx`（或某些其他页）。</span><span class="sxs-lookup"><span data-stu-id="3227e-341">In the "Customizing the CreateUserWizard's Appearance and Behavior Through Its Properties" section we will look at how you can have this button send the visitor to `Default.aspx` (or some other page).</span></span>


<span data-ttu-id="3227e-342">创建新的用户帐户之后, 返回到 Visual Studio 和检查`aspnet_Users`和`aspnet_Membership`表像图 10，若要验证是否已成功创建帐户。</span><span class="sxs-lookup"><span data-stu-id="3227e-342">After creating a new user account, return to Visual Studio and examine the `aspnet_Users` and `aspnet_Membership` tables like we did in Figure 10 to verify that the account was successfully created.</span></span>

### <a name="customizing-the-createuserwizards-behavior-and-appearance-through-its-properties"></a><span data-ttu-id="3227e-343">自定义 CreateUserWizard 的行为和外观通过其属性</span><span class="sxs-lookup"><span data-stu-id="3227e-343">Customizing the CreateUserWizard's Behavior and Appearance Through Its Properties</span></span>

<span data-ttu-id="3227e-344">中有许多种情况下，通过属性，可以自定义 CreateUserWizard `WizardSteps`，和事件处理程序。</span><span class="sxs-lookup"><span data-stu-id="3227e-344">The CreateUserWizard can be customized in a variety of ways, through properties, `WizardSteps`, and event handlers.</span></span> <span data-ttu-id="3227e-345">在本部分中我们将探讨如何自定义控件的外观，通过其属性：下一节查看扩展通过事件处理程序的控件的行为。</span><span class="sxs-lookup"><span data-stu-id="3227e-345">In this section we will look at how to customize the control's appearance through its properties; the next section looks at extending the control's behavior through event handlers.</span></span>

<span data-ttu-id="3227e-346">几乎所有通过的默认用户界面中显示的文本可以通过其各种属性自定义。</span><span class="sxs-lookup"><span data-stu-id="3227e-346">Virtually all of the text displayed in the CreateUserWizard control's default user interface can be customized through its plethora of properties.</span></span> <span data-ttu-id="3227e-347">例如，文本框中的左侧显示的"用户名"、"密码"、"确认密码"、"电子邮件"、"安全问题"和"安全答案"标签也可以通过自定义[ `UserNameLabelText` ](https://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.createuserwizard.usernamelabeltext.aspx)， [ `PasswordLabelText` ](https://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.createuserwizard.passwordlabeltext.aspx)， [ `ConfirmPasswordLabelText` ](https://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.createuserwizard.confirmpasswordlabeltext.aspx)， [ `EmailLabelText` ](https://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.createuserwizard.emaillabeltext.aspx)， [ `QuestionLabelText` ](https://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.createuserwizard.questionlabeltext.aspx)，和[ `AnswerLabelText` ](https://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.createuserwizard.answerlabeltext.aspx)属性，分别。</span><span class="sxs-lookup"><span data-stu-id="3227e-347">For example, the "User Name", "Password", "Confirm Password", "E-mail", "Security Question", and "Security Answer" labels displayed to the left of the textboxes can be customized by the [`UserNameLabelText`](https://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.createuserwizard.usernamelabeltext.aspx), [`PasswordLabelText`](https://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.createuserwizard.passwordlabeltext.aspx), [`ConfirmPasswordLabelText`](https://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.createuserwizard.confirmpasswordlabeltext.aspx), [`EmailLabelText`](https://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.createuserwizard.emaillabeltext.aspx), [`QuestionLabelText`](https://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.createuserwizard.questionlabeltext.aspx), and [`AnswerLabelText`](https://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.createuserwizard.answerlabeltext.aspx) properties, respectively.</span></span> <span data-ttu-id="3227e-348">同样，没有用于指定中的"创建用户"和"继续"按钮的文本属性`CreateUserWizardStep`和`CompleteWizardStep`，也就像这些按钮将呈现为按钮、 LinkButtons 或 ImageButtons。</span><span class="sxs-lookup"><span data-stu-id="3227e-348">Likewise, there are properties for specifying the text for the "Create User" and "Continue" buttons in the `CreateUserWizardStep` and `CompleteWizardStep`, as well as if these buttons are rendered as Buttons, LinkButtons, or ImageButtons.</span></span>

<span data-ttu-id="3227e-349">颜色、 边框、 字体和其他可视元素是可通过样式属性的主机配置。</span><span class="sxs-lookup"><span data-stu-id="3227e-349">The colors, borders, fonts, and other visual elements are configurable through a host of style properties.</span></span> <span data-ttu-id="3227e-350">通过本身具有常见 Web 控件的样式属性 – `BackColor`， `BorderStyle`， `CssClass`， `Font`，依次类推 – 并且有多个用于定义的特定部分的外观的样式属性CreateUserWizard 的接口。</span><span class="sxs-lookup"><span data-stu-id="3227e-350">The CreateUserWizard control itself has the common Web control style properties – `BackColor`, `BorderStyle`, `CssClass`, `Font`, and so on – and there are a number of style properties for defining the appearance for particular sections of the CreateUserWizard's interface.</span></span> <span data-ttu-id="3227e-351">[ `TextBoxStyle`属性](https://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.createuserwizard.textboxstyle.aspx)，例如，定义在文本框中的样式`CreateUserWizardStep`，虽然[`TitleTextStyle`属性](https://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.createuserwizard.titletextstyle.aspx)定义 （"注册为你新标题的样式帐户"）。</span><span class="sxs-lookup"><span data-stu-id="3227e-351">The [`TextBoxStyle` property](https://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.createuserwizard.textboxstyle.aspx), for instance, defines the styles for the textboxes in the `CreateUserWizardStep`, while the [`TitleTextStyle` property](https://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.createuserwizard.titletextstyle.aspx) defines the style for the title ("Sign Up for Your New Account").</span></span>

<span data-ttu-id="3227e-352">除了与外观相关的属性，有多个属性可以影响通过的行为。</span><span class="sxs-lookup"><span data-stu-id="3227e-352">In addition to the appearance-related properties, there are a number of properties that affect the CreateUserWizard control's behavior.</span></span> <span data-ttu-id="3227e-353">[ `DisplayCancelButton`属性](https://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.wizard.displaycancelbutton.aspx)，如果设置为 True，将显示"创建用户"按钮 （默认值为 False） 旁边的取消按钮。</span><span class="sxs-lookup"><span data-stu-id="3227e-353">The [`DisplayCancelButton` property](https://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.wizard.displaycancelbutton.aspx), if set to True, displays a Cancel button next to the "Create User" button (the default value is False).</span></span> <span data-ttu-id="3227e-354">如果显示取消按钮，请务必也将设置[`CancelDestinationPageUrl`属性](https://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.createuserwizard.continuedestinationpageurl.aspx)，其中指定后单击取消将用户发送到的页。</span><span class="sxs-lookup"><span data-stu-id="3227e-354">If you display the Cancel button, be sure to also set the [`CancelDestinationPageUrl` property](https://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.createuserwizard.continuedestinationpageurl.aspx), which specifies the page the user is sent to after clicking Cancel.</span></span> <span data-ttu-id="3227e-355">在上一节中的继续按钮中所述`CompleteWizardStep`的接口，导致回发，但将在距访客留在同一页上。</span><span class="sxs-lookup"><span data-stu-id="3227e-355">As noted in the previous section, the Continue button in the `CompleteWizardStep`'s interface causes a postback, but leaves the visitor on the same page.</span></span> <span data-ttu-id="3227e-356">若要发送到其他页面上访问者，单击继续按钮后，只需指定中的 URL [ `ContinueDestinationPageUrl`属性](https://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.createuserwizard.continuedestinationpageurl.aspx)。</span><span class="sxs-lookup"><span data-stu-id="3227e-356">To send the visitor to some other page after clicking the Continue button, simply specify the URL in the [`ContinueDestinationPageUrl` property](https://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.createuserwizard.continuedestinationpageurl.aspx).</span></span>

<span data-ttu-id="3227e-357">让我们更新`RegisterUser`通过显示取消按钮并将发送到在距访客`Default.aspx`时单击取消或继续按钮。</span><span class="sxs-lookup"><span data-stu-id="3227e-357">Let's update the `RegisterUser` CreateUserWizard control to show a Cancel button and to send the visitor to `Default.aspx` when the Cancel or Continue buttons are clicked.</span></span> <span data-ttu-id="3227e-358">若要完成此操作，将设置`DisplayCancelButton`属性设置为 True 且两`CancelDestinationPageUrl`和`ContinueDestinationPageUrl`属性设置为"~ / Default.aspx"。</span><span class="sxs-lookup"><span data-stu-id="3227e-358">To accomplish this, set the `DisplayCancelButton` property to True and both the `CancelDestinationPageUrl` and `ContinueDestinationPageUrl` properties to "~/Default.aspx".</span></span> <span data-ttu-id="3227e-359">图 14 显示更新的 CreateUserWizard 通过浏览器查看时。</span><span class="sxs-lookup"><span data-stu-id="3227e-359">Figure 14 shows the updated CreateUserWizard when viewed through a browser.</span></span>


<span data-ttu-id="3227e-360">[![CreateUserWizardStep 包括取消按钮](creating-user-accounts-cs/_static/image41.png)](creating-user-accounts-cs/_static/image40.png)</span><span class="sxs-lookup"><span data-stu-id="3227e-360">[![The CreateUserWizardStep Includes a Cancel Button](creating-user-accounts-cs/_static/image41.png)](creating-user-accounts-cs/_static/image40.png)</span></span>

<span data-ttu-id="3227e-361">**图 14**:`CreateUserWizardStep`包括取消按钮 ([单击以查看实际尺寸的图像](creating-user-accounts-cs/_static/image42.png))</span><span class="sxs-lookup"><span data-stu-id="3227e-361">**Figure 14**: The `CreateUserWizardStep` Includes a Cancel Button  ([Click to view full-size image](creating-user-accounts-cs/_static/image42.png))</span></span>


<span data-ttu-id="3227e-362">当访问者输入用户名、 密码、 电子邮件地址和安全问题和答案，并单击"创建用户"时，创建一个新的用户帐户和访问者在中记录为该新创建的用户。</span><span class="sxs-lookup"><span data-stu-id="3227e-362">When a visitor enters a username, password, email address, and security question and answer and clicks "Create User," a new user account is created and the visitor is logged in as that newly created user.</span></span> <span data-ttu-id="3227e-363">假定可访问的页面的人员为自己创建新帐户，这可能是所需的行为。</span><span class="sxs-lookup"><span data-stu-id="3227e-363">Assuming that the person visiting the page is creating a new account for themselves, this is likely the desired behavior.</span></span> <span data-ttu-id="3227e-364">但是，你可能想要允许管理员添加新用户帐户。</span><span class="sxs-lookup"><span data-stu-id="3227e-364">However, you may want to allow Administrators to add new user accounts.</span></span> <span data-ttu-id="3227e-365">在此情况下，将创建用户帐户，但管理员将保持在已登录，以管理员身份 （而不是新创建的帐户）。</span><span class="sxs-lookup"><span data-stu-id="3227e-365">In doing so, the user account would be created, but the Administrator would remain logged in as an Administrator (and not as the newly created account).</span></span> <span data-ttu-id="3227e-366">此行为可以修改通过布尔[`LoginCreatedUser`属性](https://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.createuserwizard.logincreateduser.aspx)。</span><span class="sxs-lookup"><span data-stu-id="3227e-366">This behavior can be modified through the Boolean [`LoginCreatedUser` property](https://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.createuserwizard.logincreateduser.aspx).</span></span>

<span data-ttu-id="3227e-367">成员资格 framework 中的用户帐户包含一个已批准的标志;未获批准的用户将无法登录到网站。</span><span class="sxs-lookup"><span data-stu-id="3227e-367">User accounts in the Membership framework contain an approved flag; users who are not approved are unable to log into the site.</span></span> <span data-ttu-id="3227e-368">默认情况下，新创建的帐户是标记为已获得批准，允许用户立即登录到网站。</span><span class="sxs-lookup"><span data-stu-id="3227e-368">By default, a newly created account is marked as approved, allowing the user to log into the site immediately.</span></span> <span data-ttu-id="3227e-369">它有可能，但是，具有标记为未批准的新用户帐户。</span><span class="sxs-lookup"><span data-stu-id="3227e-369">It is possible, however, to have new user accounts marked as unapproved.</span></span> <span data-ttu-id="3227e-370">您可能需要管理员手动批准的新用户之前用户可以登录;或者，你可能想要验证允许用户登录之前在注册输入的电子邮件地址有效。</span><span class="sxs-lookup"><span data-stu-id="3227e-370">Perhaps you want an Administrator to manually approve new users before they can log in; or maybe you want to verify that the email address entered at signup is valid before permitting a user to log on.</span></span> <span data-ttu-id="3227e-371">这种情况可能存在的内容，你可以通过设置通过标记为未批准的新创建的用户帐户[`DisableCreatedUser`属性](https://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.createuserwizard.disablecreateduser.aspx)为 True （默认值为 False）。</span><span class="sxs-lookup"><span data-stu-id="3227e-371">Whatever the case may be, you can have the newly created user account marked as unapproved by setting the CreateUserWizard control's [`DisableCreatedUser` property](https://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.createuserwizard.disablecreateduser.aspx) to True (the default is False).</span></span>

<span data-ttu-id="3227e-372">注意的其他行为相关的属性包括`AutoGeneratePassword`和`MailDefinition`。</span><span class="sxs-lookup"><span data-stu-id="3227e-372">Other behavior-related properties of note include `AutoGeneratePassword` and `MailDefinition`.</span></span> <span data-ttu-id="3227e-373">如果[`AutoGeneratePassword`属性](https://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.createuserwizard.autogeneratepassword.aspx)设置为 True，`CreateUserWizardStep`不会显示的"密码"和"确认密码"文本框中; 相反，新创建用户的密码自动生成使用`Membership`类的[`GeneratePassword`方法](https://msdn.microsoft.com/en-us/library/system.web.security.membership.generatepassword.aspx)。</span><span class="sxs-lookup"><span data-stu-id="3227e-373">If the [`AutoGeneratePassword` property](https://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.createuserwizard.autogeneratepassword.aspx) is set to True, the `CreateUserWizardStep` does not display the "Password" and "Confirm Password" textboxes; instead, the newly-created user's password is automatically generated using the `Membership` class's [`GeneratePassword` method](https://msdn.microsoft.com/en-us/library/system.web.security.membership.generatepassword.aspx).</span></span> <span data-ttu-id="3227e-374">`GeneratePassword`方法构造具有指定长度的和使用足够数量的非字母数字字符，以满足配置的密码强度要求的密码。</span><span class="sxs-lookup"><span data-stu-id="3227e-374">The `GeneratePassword` method constructs a password of a specified length and with a sufficient number of non-alphanumeric characters to satisfy the configured password strength requirements.</span></span>

<span data-ttu-id="3227e-375">[ `MailDefinition`属性](https://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.createuserwizard.maildefinition.aspx)如果你想要在帐户创建过程中指定的电子邮件地址发送一封电子邮件将非常有用。</span><span class="sxs-lookup"><span data-stu-id="3227e-375">The [`MailDefinition` property](https://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.createuserwizard.maildefinition.aspx) is useful if you want to send an email to the email address specified during the account creation process.</span></span> <span data-ttu-id="3227e-376">`MailDefinition`属性包含一系列的子属性，用于定义有关构造电子邮件消息的信息。</span><span class="sxs-lookup"><span data-stu-id="3227e-376">The `MailDefinition` property includes a series of subproperties for defining information about the constructed email message.</span></span> <span data-ttu-id="3227e-377">这些子属性包括诸如以下选项`Subject`， `Priority`， `IsBodyHtml`， `From`， `CC`，和`BodyFileName`。</span><span class="sxs-lookup"><span data-stu-id="3227e-377">These subproperties include options like `Subject`, `Priority`, `IsBodyHtml`, `From`, `CC`, and `BodyFileName`.</span></span> <span data-ttu-id="3227e-378">[ `BodyFileName`属性](https://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.maildefinition.bodyfilename.aspx)指向文本或 HTML 文件，其中包含电子邮件的正文。</span><span class="sxs-lookup"><span data-stu-id="3227e-378">The [`BodyFileName` property](https://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.maildefinition.bodyfilename.aspx) points to a text or HTML file that contains the body for the email message.</span></span> <span data-ttu-id="3227e-379">正文支持两个预定义的占位符：`<%UserName%>`和`<%Password%>`。</span><span class="sxs-lookup"><span data-stu-id="3227e-379">The body supports two pre-defined placeholders: `<%UserName%>` and `<%Password%>`.</span></span> <span data-ttu-id="3227e-380">这些占位符，如果存在于`BodyFileName`文件中，将替换为刚创建用户的名称和密码。</span><span class="sxs-lookup"><span data-stu-id="3227e-380">These placeholders, if present in the `BodyFileName` file, will be replaced with the just-created user's name and password.</span></span>

> [!NOTE]
> <span data-ttu-id="3227e-381">`CreateUserWizard`控件的`MailDefinition`属性只指定当创建新帐户发送电子邮件消息的详细信息。</span><span class="sxs-lookup"><span data-stu-id="3227e-381">The `CreateUserWizard` control's `MailDefinition` property just specifies details about the email message that is sent when a new account is created.</span></span> <span data-ttu-id="3227e-382">它不包含任何实际发送电子邮件方式的详细信息 （即，是否使用 SMTP 服务器或邮件投递目录、 任何身份验证信息和等等）。</span><span class="sxs-lookup"><span data-stu-id="3227e-382">It does not include any details on how the email message is actually sent (that is, whether an SMTP server or mail drop directory is used, any authentication information, and so on).</span></span> <span data-ttu-id="3227e-383">需要在中定义这些低级别的详细信息`<system.net>`主题中`Web.config`。</span><span class="sxs-lookup"><span data-stu-id="3227e-383">These low-level details need to be defined in the `<system.net>` section in `Web.config`.</span></span> <span data-ttu-id="3227e-384">有关这些配置设置和一般情况下从 ASP.NET 2.0 发送电子邮件的详细信息，请参阅[在 SystemNetMail.com 常见问题](http://www.systemnetmail.com/)和我文章[ASP.NET 2.0 中发送电子邮件](http://aspnet.4guysfromrolla.com/articles/072606-1.aspx)。</span><span class="sxs-lookup"><span data-stu-id="3227e-384">For more information on these configuration settings and on sending email from ASP.NET 2.0 in general, refer to the [FAQs at SystemNetMail.com](http://www.systemnetmail.com/) and my article, [Sending Email in ASP.NET 2.0](http://aspnet.4guysfromrolla.com/articles/072606-1.aspx).</span></span>


### <a name="extending-the-createuserwizards-behavior-using-event-handlers"></a><span data-ttu-id="3227e-385">扩展 CreateUserWizard 的行为使用事件处理程序</span><span class="sxs-lookup"><span data-stu-id="3227e-385">Extending the CreateUserWizard's Behavior Using Event Handlers</span></span>

<span data-ttu-id="3227e-386">通过其工作流期间引发事件的数。</span><span class="sxs-lookup"><span data-stu-id="3227e-386">The CreateUserWizard control raises a number of events during its workflow.</span></span> <span data-ttu-id="3227e-387">例如，访问者输入他们的用户名、 密码和其他相关信息并单击"创建用户"按钮后，通过引发其[`CreatingUser`事件](https://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.createuserwizard.creatinguser.aspx)。</span><span class="sxs-lookup"><span data-stu-id="3227e-387">For example, after a visitor enters their username, password, and other pertinent information and clicks the "Create User" button, the CreateUserWizard control raises its [`CreatingUser` event](https://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.createuserwizard.creatinguser.aspx).</span></span> <span data-ttu-id="3227e-388">如果在创建过程中，问题[`CreateUserError`事件](https://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.createuserwizard.createusererror.aspx)激发; 但是，如果已成功创建用户，则[`CreatedUser`事件](https://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.createuserwizard.createduser.aspx)引发。</span><span class="sxs-lookup"><span data-stu-id="3227e-388">If there is a problem during the create process, the [`CreateUserError` event](https://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.createuserwizard.createusererror.aspx) is fired; however, if the user is successfully created, then the [`CreatedUser` event](https://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.createuserwizard.createduser.aspx) is raised.</span></span> <span data-ttu-id="3227e-389">获取引发的其他 CreateUserWizard 控件事件，但这些是三个最 germane 的。</span><span class="sxs-lookup"><span data-stu-id="3227e-389">There are additional CreateUserWizard control events that get raised, but these are the three most germane ones.</span></span>

<span data-ttu-id="3227e-390">在某些情况下我们可能想要点击流入 CreateUserWizard 流中，我们可以通过创建相应的事件的事件处理程序执行操作。</span><span class="sxs-lookup"><span data-stu-id="3227e-390">In certain scenarios we may want to tap into the CreateUserWizard workflow, which we can do by creating an event handler for the appropriate event.</span></span> <span data-ttu-id="3227e-391">为了说明这一点，让我们增强`RegisterUser`通过以包含一些自定义验证的用户名和密码。</span><span class="sxs-lookup"><span data-stu-id="3227e-391">To illustrate this, let's enhance the `RegisterUser` CreateUserWizard control to include some custom validation on the username and password.</span></span> <span data-ttu-id="3227e-392">具体而言，让我们增强我们 CreateUserWizard，以便用户名不能包含前导空格或尾随空格和用户名不能在密码中任意位置出现如此。</span><span class="sxs-lookup"><span data-stu-id="3227e-392">In particular, let's enhance our CreateUserWizard so that usernames cannot contain leading or trailing spaces and the username cannot appear anywhere in the password.</span></span> <span data-ttu-id="3227e-393">简单地说，我们想要防止某人创建的用户名与"Scott"，或都有"Scott"和"Scott.1234"等用户名/密码组合。</span><span class="sxs-lookup"><span data-stu-id="3227e-393">In short, we want to prevent someone from creating a username like "Scott ", or having a username/password combination like "Scott" and "Scott.1234".</span></span>

<span data-ttu-id="3227e-394">若要完成此我们将创建的事件处理程序`CreatingUser`事件以执行我们的额外验证检查。</span><span class="sxs-lookup"><span data-stu-id="3227e-394">To accomplish this we will create an event handler for the `CreatingUser` event to perform our extra validation checks.</span></span> <span data-ttu-id="3227e-395">如果提供的数据不是有效我们需要取消创建过程。</span><span class="sxs-lookup"><span data-stu-id="3227e-395">If the supplied data is not valid we need to cancel the creation process.</span></span> <span data-ttu-id="3227e-396">我们还需要将标签 Web 控件添加到页后，可以显示一条消息说明的用户名或密码无效。</span><span class="sxs-lookup"><span data-stu-id="3227e-396">We also need to add a Label Web control to the page to display a message explaining that the username or password is invalid.</span></span> <span data-ttu-id="3227e-397">首先，通过添加标签控件下通过，设置其`ID`属性`InvalidUserNameOrPasswordMessage`及其`ForeColor`属性`Red`。</span><span class="sxs-lookup"><span data-stu-id="3227e-397">Start by adding a Label control beneath the CreateUserWizard control, setting its `ID` property to `InvalidUserNameOrPasswordMessage` and its `ForeColor` property to `Red`.</span></span> <span data-ttu-id="3227e-398">清除其`Text`属性并设置其`EnableViewState`和`Visible`属性为 False。</span><span class="sxs-lookup"><span data-stu-id="3227e-398">Clear out its `Text` property and set its `EnableViewState` and `Visible` properties to False.</span></span>

[!code-aspx[Main](creating-user-accounts-cs/samples/sample7.aspx)]

<span data-ttu-id="3227e-399">接下来，创建的事件处理程序通过`CreatingUser`事件。</span><span class="sxs-lookup"><span data-stu-id="3227e-399">Next, create an event handler for the CreateUserWizard control's `CreatingUser` event.</span></span> <span data-ttu-id="3227e-400">若要创建一个事件处理程序，在设计器中选择控件，然后转到属性窗口。</span><span class="sxs-lookup"><span data-stu-id="3227e-400">To create an event handler, select the control in the Designer and then go to the Properties window.</span></span> <span data-ttu-id="3227e-401">从这里，单击闪电形图标，然后双击相应的事件来创建事件处理程序。</span><span class="sxs-lookup"><span data-stu-id="3227e-401">From there, click on the lightning bolt icon and then double-click the appropriate event to create the event handler.</span></span>

<span data-ttu-id="3227e-402">将以下代码添加到 `CreatingUser` 事件处理程序中：</span><span class="sxs-lookup"><span data-stu-id="3227e-402">Add the following code to the `CreatingUser` event handler:</span></span>

[!code-csharp[Main](creating-user-accounts-cs/samples/sample8.cs)]

<span data-ttu-id="3227e-403">请注意，用户名和密码输入到通过是可通过其[ `UserName` ](https://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.createuserwizard.username.aspx)和[`Password`属性](https://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.createuserwizard.password.aspx)分别。</span><span class="sxs-lookup"><span data-stu-id="3227e-403">Note that the username and password entered into the CreateUserWizard control are available through its [`UserName`](https://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.createuserwizard.username.aspx) and [`Password` properties](https://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.createuserwizard.password.aspx), respectively.</span></span> <span data-ttu-id="3227e-404">我们可以使用在上面的事件处理程序中的这些属性以确定提供的用户名是否包含前导空格或尾随空格，并且密码中找到的用户名。</span><span class="sxs-lookup"><span data-stu-id="3227e-404">We use these properties in the above event handler to determine whether the supplied username contains leading or trailing spaces and whether the username is found within the password.</span></span> <span data-ttu-id="3227e-405">如果满足这些条件之一，则一条错误消息显示在`InvalidUserNameOrPasswordMessage`标签和事件处理程序的`e.Cancel`属性设置为`true`。</span><span class="sxs-lookup"><span data-stu-id="3227e-405">If either of these conditions is met, an error message is displayed in the `InvalidUserNameOrPasswordMessage` Label and the event handler's `e.Cancel` property is set to `true`.</span></span> <span data-ttu-id="3227e-406">如果`e.Cancel`设置为`true`，CreateUserWizard 会使短路其工作流，有效地取消用户帐户创建过程。</span><span class="sxs-lookup"><span data-stu-id="3227e-406">If `e.Cancel` is set to `true`, the CreateUserWizard short-circuits its workflow, effectively cancelling the user account creation process.</span></span>

<span data-ttu-id="3227e-407">图 15 所示的屏幕截图`CreatingUserAccounts.aspx`当用户输入的用户名与前导空格。</span><span class="sxs-lookup"><span data-stu-id="3227e-407">Figure 15 shows a screen shot of `CreatingUserAccounts.aspx` when the user enters a username with leading spaces.</span></span>


<span data-ttu-id="3227e-408">[![不允许以前导或尾随空格的用户名](creating-user-accounts-cs/_static/image44.png)](creating-user-accounts-cs/_static/image43.png)</span><span class="sxs-lookup"><span data-stu-id="3227e-408">[![Usernames with Leading or Trailing Spaces are not Permitted](creating-user-accounts-cs/_static/image44.png)](creating-user-accounts-cs/_static/image43.png)</span></span>

<span data-ttu-id="3227e-409">**图 15**： 不允许以前导或尾随空格的用户名 ([单击以查看实际尺寸的图像](creating-user-accounts-cs/_static/image45.png))</span><span class="sxs-lookup"><span data-stu-id="3227e-409">**Figure 15**: Usernames with Leading or Trailing Spaces are not Permitted  ([Click to view full-size image](creating-user-accounts-cs/_static/image45.png))</span></span>


> [!NOTE]
> <span data-ttu-id="3227e-410">我们将看到举例说明使用通过`CreatedUser`中的事件 *<a id="_msoanchor_11"> </a>[存储的其他用户信息](storing-additional-user-information-cs.md)*教程。</span><span class="sxs-lookup"><span data-stu-id="3227e-410">We will see an example of using the CreateUserWizard control's `CreatedUser` event in the *<a id="_msoanchor_11"></a>[Storing Additional User Information](storing-additional-user-information-cs.md)* tutorial.</span></span>


## <a name="summary"></a><span data-ttu-id="3227e-411">摘要</span><span class="sxs-lookup"><span data-stu-id="3227e-411">Summary</span></span>

<span data-ttu-id="3227e-412">`Membership`类的`CreateUser`方法中的成员资格 framework 创建新的用户帐户。</span><span class="sxs-lookup"><span data-stu-id="3227e-412">The `Membership` class's `CreateUser` method creates a new user account in the Membership framework.</span></span> <span data-ttu-id="3227e-413">它会通过委派对配置成员资格提供程序的调用。</span><span class="sxs-lookup"><span data-stu-id="3227e-413">It does so by delegating the call to the configured Membership provider.</span></span> <span data-ttu-id="3227e-414">情况下`SqlMembershipProvider`、`CreateUser`方法将添加到记录`aspnet_Users`和`aspnet_Membership`数据库表。</span><span class="sxs-lookup"><span data-stu-id="3227e-414">In the case of the `SqlMembershipProvider`, the `CreateUser` method adds a record to the `aspnet_Users` and `aspnet_Membership` database tables.</span></span>

<span data-ttu-id="3227e-415">虽然可以创建新的用户帐户，以编程方式 （如我们看到在步骤 5 中），更快且更容易的方法是使用通过。</span><span class="sxs-lookup"><span data-stu-id="3227e-415">While new user accounts can be created programmatically (as we saw in Step 5), a faster and easier approach is to use the CreateUserWizard control.</span></span> <span data-ttu-id="3227e-416">此控件呈现用于收集用户信息并在成员资格框架中创建新用户的多步骤用户界面。</span><span class="sxs-lookup"><span data-stu-id="3227e-416">This control renders a multi-step user interface for collecting user information and creating a new user in the Membership framework.</span></span> <span data-ttu-id="3227e-417">下方底层，此控件使用相同`Membership.CreateUser`方法检查在步骤 5 中，但该控件中作为创建用户界面，验证控件，并对用户帐户创建错误而无需编写缺乏对代码做出响应。</span><span class="sxs-lookup"><span data-stu-id="3227e-417">Underneath the covers, this control uses the same `Membership.CreateUser` method as examined in Step 5, but the control creates the user interface, validation controls, and responds to user account creation errors without having to write a lick of code.</span></span>

<span data-ttu-id="3227e-418">此时我们的位置，以创建新用户帐户具有的功能。</span><span class="sxs-lookup"><span data-stu-id="3227e-418">At this point we have the functionality in place to create new user accounts.</span></span> <span data-ttu-id="3227e-419">但是，登录页仍验证针对进来第二个教程，我们指定了这些硬编码的凭据。</span><span class="sxs-lookup"><span data-stu-id="3227e-419">However, the login page still is validating against those hard-coded credentials we specified back in the second tutorial.</span></span> <span data-ttu-id="3227e-420">在<a id="_msoanchor_12"> </a>[下一教程](validating-user-credentials-against-the-membership-user-store-cs.md)我们将更新`Login.aspx`以验证此用户的提供针对成员资格框架的凭据。</span><span class="sxs-lookup"><span data-stu-id="3227e-420">In the <a id="_msoanchor_12"></a>[next tutorial](validating-user-credentials-against-the-membership-user-store-cs.md) we will update `Login.aspx` to validate the user's supplied credentials against the Membership framework.</span></span>

<span data-ttu-id="3227e-421">尽情享受编程 ！</span><span class="sxs-lookup"><span data-stu-id="3227e-421">Happy Programming!</span></span>

### <a name="further-reading"></a><span data-ttu-id="3227e-422">其他阅读材料</span><span class="sxs-lookup"><span data-stu-id="3227e-422">Further Reading</span></span>

<span data-ttu-id="3227e-423">在本教程中讨论的主题的详细信息，请参阅以下资源：</span><span class="sxs-lookup"><span data-stu-id="3227e-423">For more information on the topics discussed in this tutorial, refer to the following resources:</span></span>

- [<span data-ttu-id="3227e-424">`CreateUser`技术文档</span><span class="sxs-lookup"><span data-stu-id="3227e-424">`CreateUser` Technical Documentation</span></span>](https://msdn.microsoft.com/En-US/library/system.web.security.membershipprovider.createuser.aspx)
- [<span data-ttu-id="3227e-425">通过概述</span><span class="sxs-lookup"><span data-stu-id="3227e-425">CreateUserWizard Control Overview</span></span>](https://quickstarts.asp.net/QuickStartv20/aspnet/doc/ctrlref/login/createuserwizard.aspx)
- [<span data-ttu-id="3227e-426">创建文件系统基于站点映射提供程序</span><span class="sxs-lookup"><span data-stu-id="3227e-426">Creating a File System-Based Site Map Provider</span></span>](http://aspnet.4guysfromrolla.com/articles/020106-1.aspx)
- [<span data-ttu-id="3227e-427">使用 ASP.NET 2.0 向导控件创建分步的用户界面</span><span class="sxs-lookup"><span data-stu-id="3227e-427">Creating a Step-by-Step User Interface with the ASP.NET 2.0 Wizard Control</span></span>](http://aspnet.4guysfromrolla.com/articles/061406-1.aspx)
- [<span data-ttu-id="3227e-428">检查 ASP.NET 2.0 的网站的导航</span><span class="sxs-lookup"><span data-stu-id="3227e-428">Examining ASP.NET 2.0's Site Navigation</span></span>](http://aspnet.4guysfromrolla.com/articles/111605-1.aspx)
- [<span data-ttu-id="3227e-429">母版页和网站的导航</span><span class="sxs-lookup"><span data-stu-id="3227e-429">Master Pages and Site Navigation</span></span>](https://asp.net/learn/data-access/tutorial-03-vb.aspx)
- [<span data-ttu-id="3227e-430">SQL 站点地图提供商提供你所期待的</span><span class="sxs-lookup"><span data-stu-id="3227e-430">The SQL Site Map Provider You've Been Waiting For</span></span>](https://msdn.microsoft.com/msdnmag/issues/06/02/WickedCode/default.aspx)

### <a name="about-the-author"></a><span data-ttu-id="3227e-431">关于作者</span><span class="sxs-lookup"><span data-stu-id="3227e-431">About the Author</span></span>

<span data-ttu-id="3227e-432">Scott Mitchell，多个 ASP/ASP.NET 丛书的作者和创始人 4GuysFromRolla.com，具有已使用自 1998 年 Microsoft Web 技术。</span><span class="sxs-lookup"><span data-stu-id="3227e-432">Scott Mitchell, author of multiple ASP/ASP.NET books and founder of 4GuysFromRolla.com, has been working with Microsoft Web technologies since 1998.</span></span> <span data-ttu-id="3227e-433">Scott 的作用是作为独立的顾问、 培训师和编写器。</span><span class="sxs-lookup"><span data-stu-id="3227e-433">Scott works as an independent consultant, trainer, and writer.</span></span> <span data-ttu-id="3227e-434">最新书籍是 *[Sam 教授自己 ASP.NET 2.0 24 小时内](https://www.amazon.com/exec/obidos/ASIN/0672327384/4guysfromrollaco)*。</span><span class="sxs-lookup"><span data-stu-id="3227e-434">His latest book is *[Sams Teach Yourself ASP.NET 2.0 in 24 Hours](https://www.amazon.com/exec/obidos/ASIN/0672327384/4guysfromrollaco)*.</span></span> <span data-ttu-id="3227e-435">可以在达到 Scott [ mitchell@4guysfromrolla.com ](mailto:mitchell@4guysfromrolla.com)或通过在其博客地址[http://ScottOnWriting.NET](http://scottonwriting.net/)。</span><span class="sxs-lookup"><span data-stu-id="3227e-435">Scott can be reached at [mitchell@4guysfromrolla.com](mailto:mitchell@4guysfromrolla.com) or via his blog at [http://ScottOnWriting.NET](http://scottonwriting.net/).</span></span>

### <a name="special-thanks-to"></a><span data-ttu-id="3227e-436">特别感谢...</span><span class="sxs-lookup"><span data-stu-id="3227e-436">Special Thanks To…</span></span>

<span data-ttu-id="3227e-437">本教程系列已由许多有用的审阅者评审。</span><span class="sxs-lookup"><span data-stu-id="3227e-437">This tutorial series was reviewed by many helpful reviewers.</span></span> <span data-ttu-id="3227e-438">本教程中的前导审阅者已 Teresa 墨。</span><span class="sxs-lookup"><span data-stu-id="3227e-438">Lead reviewer for this tutorial was Teresa Murphy.</span></span> <span data-ttu-id="3227e-439">对感兴趣查看我即将到来的 MSDN 文章？</span><span class="sxs-lookup"><span data-stu-id="3227e-439">Interested in reviewing my upcoming MSDN articles?</span></span> <span data-ttu-id="3227e-440">如果是这样，删除我一行[ mitchell@4GuysFromRolla.com ](mailto:mitchell@4GuysFromRolla.com)。</span><span class="sxs-lookup"><span data-stu-id="3227e-440">If so, drop me a line at [mitchell@4GuysFromRolla.com](mailto:mitchell@4GuysFromRolla.com).</span></span>

>[!div class="step-by-step"]
<span data-ttu-id="3227e-441">[上一页](creating-the-membership-schema-in-sql-server-cs.md)
[下一页](validating-user-credentials-against-the-membership-user-store-cs.md)</span><span class="sxs-lookup"><span data-stu-id="3227e-441">[Previous](creating-the-membership-schema-in-sql-server-cs.md)
[Next](validating-user-credentials-against-the-membership-user-store-cs.md)</span></span>
