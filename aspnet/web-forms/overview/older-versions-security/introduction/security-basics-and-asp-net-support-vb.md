---
uid: web-forms/overview/older-versions-security/introduction/security-basics-and-asp-net-support-vb
title: "安全性基础知识和 ASP.NET 支持 (VB) |Microsoft 文档"
author: rick-anderson
description: "这是一系列将浏览进行身份验证通过 web 窗体的访问者授予对 partic 访问权限的技术的教程中的第一个教程..."
ms.author: aspnetcontent
manager: wpickett
ms.date: 01/13/2008
ms.topic: article
ms.assetid: ab68a92b-fc81-40a4-a7dc-406625d2c5d4
ms.technology: dotnet-webforms
ms.prod: .net-framework
msc.legacyurl: /web-forms/overview/older-versions-security/introduction/security-basics-and-asp-net-support-vb
msc.type: authoredcontent
ms.openlocfilehash: 1ff76d08b6de20be7263ae134b102883fc8d99a2
ms.sourcegitcommit: 9a9483aceb34591c97451997036a9120c3fe2baf
ms.translationtype: MT
ms.contentlocale: zh-CN
ms.lasthandoff: 11/10/2017
---
<a name="security-basics-and-aspnet-support-vb"></a><span data-ttu-id="2cf6c-103">安全性基础知识和 ASP.NET 支持 (VB)</span><span class="sxs-lookup"><span data-stu-id="2cf6c-103">Security Basics and ASP.NET Support (VB)</span></span>
====================
<span data-ttu-id="2cf6c-104">通过[Scott Mitchell](https://twitter.com/ScottOnWriting)</span><span class="sxs-lookup"><span data-stu-id="2cf6c-104">by [Scott Mitchell](https://twitter.com/ScottOnWriting)</span></span>

[<span data-ttu-id="2cf6c-105">下载 PDF</span><span class="sxs-lookup"><span data-stu-id="2cf6c-105">Download PDF</span></span>](http://download.microsoft.com/download/2/F/7/2F705A34-F9DE-4112-BBDE-60098089645E/aspnet_tutorial01_Basics_vb.pdf)

> <span data-ttu-id="2cf6c-106">这是一系列将浏览进行身份验证通过 web 窗体的访问者、 授权访问特定页面和功能，以及管理 ASP.NET 应用程序中的用户帐户的技术的教程中的第一个教程。</span><span class="sxs-lookup"><span data-stu-id="2cf6c-106">This is the first tutorial in a series of tutorials that will explore techniques for authenticating visitors through a web form, authorizing access to particular pages and functionality, and managing user accounts in an ASP.NET application.</span></span>


## <a name="introduction"></a><span data-ttu-id="2cf6c-107">介绍</span><span class="sxs-lookup"><span data-stu-id="2cf6c-107">Introduction</span></span>

<span data-ttu-id="2cf6c-108">什么是一件事论坛、 电子商务站点、 在线电子邮件网站、 门户网站和所有具有共同的社交网络站点？</span><span class="sxs-lookup"><span data-stu-id="2cf6c-108">What is the one thing forums, eCommerce sites, online email websites, portal websites, and social network sites all have in common?</span></span> <span data-ttu-id="2cf6c-109">它们都提供*用户帐户*。</span><span class="sxs-lookup"><span data-stu-id="2cf6c-109">They all offer *user accounts*.</span></span> <span data-ttu-id="2cf6c-110">提供用户帐户的站点必须提供多个服务。</span><span class="sxs-lookup"><span data-stu-id="2cf6c-110">Sites that offer user accounts must provide a number of services.</span></span> <span data-ttu-id="2cf6c-111">至少，新的访问者需要能够创建帐户并返回访问者必须能够登录。</span><span class="sxs-lookup"><span data-stu-id="2cf6c-111">At a minimum, new visitors need to be able to create an account and returning visitors must be able to log in.</span></span> <span data-ttu-id="2cf6c-112">此类 web 应用程序可以做出决策基于在已登录的用户： 某些页或操作可能限制为仅记录在用户或特定的用户; 子集其他页可能会显示信息特定向登录的用户，或可能显示更多或更少信息，具体取决于哪些用户正在查看的页。</span><span class="sxs-lookup"><span data-stu-id="2cf6c-112">Such web applications can make decisions based on the logged in user: some pages or actions might be restricted to only logged in users, or to a certain subset of users; other pages might show information specific to the logged in user, or might show more or less information, depending on what user is viewing the page.</span></span>

<span data-ttu-id="2cf6c-113">这是一系列将浏览进行身份验证通过 web 窗体的访问者、 授权访问特定页面和功能，以及管理 ASP.NET 应用程序中的用户帐户的技术的教程中的第一个教程。</span><span class="sxs-lookup"><span data-stu-id="2cf6c-113">This is the first tutorial in a series of tutorials that will explore techniques for authenticating visitors through a web form, authorizing access to particular pages and functionality, and managing user accounts in an ASP.NET application.</span></span> <span data-ttu-id="2cf6c-114">我们将检查这些教程之中如何：</span><span class="sxs-lookup"><span data-stu-id="2cf6c-114">Over the course of these tutorials we will examine how to:</span></span>

- <span data-ttu-id="2cf6c-115">确定并在用户登录到网站</span><span class="sxs-lookup"><span data-stu-id="2cf6c-115">Identify and log users in to a website</span></span>
- <span data-ttu-id="2cf6c-116">使用 ASP.NET 的成员资格框架来管理用户帐户</span><span class="sxs-lookup"><span data-stu-id="2cf6c-116">Use ASP.NET's Membership framework to manage user accounts</span></span>
- <span data-ttu-id="2cf6c-117">创建、 更新和删除用户帐户</span><span class="sxs-lookup"><span data-stu-id="2cf6c-117">Create, update, and delete user accounts</span></span>
- <span data-ttu-id="2cf6c-118">限制对网页、 目录或基于在已登录用户的特定功能的访问</span><span class="sxs-lookup"><span data-stu-id="2cf6c-118">Limit access to a web page, directory, or specific functionality based on the logged in user</span></span>
- <span data-ttu-id="2cf6c-119">使用 ASP.NET 的角色框架来将用户帐户与角色关联</span><span class="sxs-lookup"><span data-stu-id="2cf6c-119">Use ASP.NET's Roles framework to associate user accounts with roles</span></span>
- <span data-ttu-id="2cf6c-120">管理用户角色</span><span class="sxs-lookup"><span data-stu-id="2cf6c-120">Manage user roles</span></span>
- <span data-ttu-id="2cf6c-121">限制对网页、 目录或特定功能基于在已登录的用户的角色的访问</span><span class="sxs-lookup"><span data-stu-id="2cf6c-121">Limit access to a web page, directory, or specific functionality based on the logged in user's role</span></span>
- <span data-ttu-id="2cf6c-122">自定义和扩展 ASP。NET 的安全 Web 控件</span><span class="sxs-lookup"><span data-stu-id="2cf6c-122">Customize and extend ASP.NET's security Web controls</span></span>

<span data-ttu-id="2cf6c-123">这些教程旨在是简洁并提供引导你完成此过程以可视方式并提供充足的屏幕截图的分步说明。</span><span class="sxs-lookup"><span data-stu-id="2cf6c-123">These tutorials are geared to be concise and provide step-by-step instructions with plenty of screen shots to walk you through the process visually.</span></span> <span data-ttu-id="2cf6c-124">每个教程是在 C# 和 Visual Basic 版本中可用，包括使用的完整代码下载。</span><span class="sxs-lookup"><span data-stu-id="2cf6c-124">Each tutorial is available in C# and Visual Basic versions and includes a download of the complete code used.</span></span> <span data-ttu-id="2cf6c-125">（此第一个教程重点介绍从高级的角度来看的安全概念和因此不包含任何关联的代码。）</span><span class="sxs-lookup"><span data-stu-id="2cf6c-125">(This first tutorial focuses on security concepts from a high-level viewpoint and therefore does not contain any associated code.)</span></span>

<span data-ttu-id="2cf6c-126">在本教程中我们将讨论重要的安全概念而 ASP.NET 以帮助实现窗体身份验证、 授权、 用户帐户和角色提供的哪些功能。</span><span class="sxs-lookup"><span data-stu-id="2cf6c-126">In this tutorial we will discuss important security concepts and what facilities are available in ASP.NET to assist in implementing forms authentication, authorization, user accounts, and roles.</span></span> <span data-ttu-id="2cf6c-127">让我们进入正题！</span><span class="sxs-lookup"><span data-stu-id="2cf6c-127">Let's get started!</span></span>

> [!NOTE]
> <span data-ttu-id="2cf6c-128">安全是跨越物理、 技术，任何应用程序的一个重要方面和策略决策，需要高度的规划和域知识。</span><span class="sxs-lookup"><span data-stu-id="2cf6c-128">Security is an important aspect of any application that spans physical, technological, and policy decisions and requires a high degree of planning and domain knowledge.</span></span> <span data-ttu-id="2cf6c-129">本教程系列不用于开发安全的 web 应用程序应作为指南。</span><span class="sxs-lookup"><span data-stu-id="2cf6c-129">This tutorial series is not intended as a guide for developing secure web applications.</span></span> <span data-ttu-id="2cf6c-130">相反，它重点说明特定于窗体身份验证、 授权、 用户帐户和角色。</span><span class="sxs-lookup"><span data-stu-id="2cf6c-130">Rather, it focuses specifically on forms authentication, authorization, user accounts, and roles.</span></span> <span data-ttu-id="2cf6c-131">这一系列中讨论了旋转解决这些问题的一些安全概念，而其他处于未探测。</span><span class="sxs-lookup"><span data-stu-id="2cf6c-131">While some security concepts revolving around these issues are discussed in this series, others are left unexplored.</span></span>


## <a name="authentication-authorization-user-accounts-and-roles"></a><span data-ttu-id="2cf6c-132">身份验证、 授权、 用户帐户和角色</span><span class="sxs-lookup"><span data-stu-id="2cf6c-132">Authentication, Authorization, User Accounts, and Roles</span></span>

<span data-ttu-id="2cf6c-133">身份验证、 授权、 用户帐户和角色是将在非常频繁整个本系列教程，因此我想要花快速一些时间来定义这些条款 web 安全的上下文中的四个术语。</span><span class="sxs-lookup"><span data-stu-id="2cf6c-133">Authentication, authorization, user accounts, and roles are four terms that will be used very often throughout this tutorial series, so I'd like to take a quick moment to define these terms within the context of web security.</span></span> <span data-ttu-id="2cf6c-134">在客户端 / 服务器模型中，如 Internet，有很多情况下，服务器需要标识客户端发出请求。</span><span class="sxs-lookup"><span data-stu-id="2cf6c-134">In a client-server model, such as the Internet, there are many scenarios in which the server needs to identify the client making the request.</span></span> <span data-ttu-id="2cf6c-135">*身份验证*是有助于确定客户端的标识的过程。</span><span class="sxs-lookup"><span data-stu-id="2cf6c-135">*Authentication* is the process of ascertaining the client's identity.</span></span> <span data-ttu-id="2cf6c-136">已成功发现的客户端被认为是*身份验证*。</span><span class="sxs-lookup"><span data-stu-id="2cf6c-136">A client who has been successfully identified is said to be *authenticated*.</span></span> <span data-ttu-id="2cf6c-137">无法识别客户端被认为是*未经身份验证*或*匿名*。</span><span class="sxs-lookup"><span data-stu-id="2cf6c-137">An unidentified client is said to be *unauthenticated* or *anonymous*.</span></span>

<span data-ttu-id="2cf6c-138">安全身份验证系统涉及至少一个以下三个方面：[你知道的东西，你拥有的东西，或者内容您](http://www.cs.cornell.edu/Courses/cs513/2005fa/NNLauthPeople.html)。</span><span class="sxs-lookup"><span data-stu-id="2cf6c-138">Secure authentication systems involve at least one of the following three facets: [something you know, something you have, or something you are](http://www.cs.cornell.edu/Courses/cs513/2005fa/NNLauthPeople.html).</span></span> <span data-ttu-id="2cf6c-139">大多数 web 应用程序依赖于某些客户端知道，例如密码或 PIN。</span><span class="sxs-lookup"><span data-stu-id="2cf6c-139">Most web applications rely on something the client knows, such as a password or a PIN.</span></span> <span data-ttu-id="2cf6c-140">用于标识用户的她的用户名和密码，例如-的信息被称为*凭据*。</span><span class="sxs-lookup"><span data-stu-id="2cf6c-140">The information used to identify a user - her username and password, for example - are referred to as *credentials*.</span></span> <span data-ttu-id="2cf6c-141">本系列教程侧重于*窗体身份验证*，即其中用户登录到站点通过提供其凭据以网页形式的身份验证模型。</span><span class="sxs-lookup"><span data-stu-id="2cf6c-141">This tutorial series focuses on *forms authentication*, which is an authentication model where users log in to the site by providing their credentials in a web page form.</span></span> <span data-ttu-id="2cf6c-142">我们会所有遇到这种类型的身份验证之前。</span><span class="sxs-lookup"><span data-stu-id="2cf6c-142">We have all experienced this type of authentication before.</span></span> <span data-ttu-id="2cf6c-143">转到任何电子商务站点。</span><span class="sxs-lookup"><span data-stu-id="2cf6c-143">Go to any eCommerce site.</span></span> <span data-ttu-id="2cf6c-144">当你准备好签出系统会要求你登录到文本框中输入你的用户名和密码，在网页上。</span><span class="sxs-lookup"><span data-stu-id="2cf6c-144">When you are ready to check out you are asked to log in by entering your username and password into textboxes on a web page.</span></span>

<span data-ttu-id="2cf6c-145">除了标识客户端，可能需要限制哪些资源或功能可以根据发出请求的客户端访问服务器。</span><span class="sxs-lookup"><span data-stu-id="2cf6c-145">In addition to identifying clients, a server may need to limit what resources or functionalities are accessible depending on the client making the request.</span></span> <span data-ttu-id="2cf6c-146">*授权*是确定特定的用户是否有权访问特定资源或功能的过程。</span><span class="sxs-lookup"><span data-stu-id="2cf6c-146">*Authorization* is the process of determining whether a particular user has the authority to access a specific resource or functionality.</span></span>

<span data-ttu-id="2cf6c-147">A*用户帐户*一个存储用于保存有关特定用户的信息。</span><span class="sxs-lookup"><span data-stu-id="2cf6c-147">A *user account* is a store for persisting information about a particular user.</span></span> <span data-ttu-id="2cf6c-148">用户帐户必须至少包括唯一标识该用户，如用户的登录名和密码的信息。</span><span class="sxs-lookup"><span data-stu-id="2cf6c-148">User accounts must minimally include information that uniquely identifies the user, such as the user's login name and password.</span></span> <span data-ttu-id="2cf6c-149">此基本信息，以及用户帐户可能包括诸如： 用户的电子邮件地址;日期和时间创建帐户;日期和时间在用户上次登录;第一个和最后一个名称;电话号码;和邮寄地址。</span><span class="sxs-lookup"><span data-stu-id="2cf6c-149">Along with this essential information, user accounts may include things like: the user's email address; the date and time the account was created; the date and time they last logged in; first and last name; phone number; and mailing address.</span></span> <span data-ttu-id="2cf6c-150">在使用窗体身份验证时，通常类似于 Microsoft SQL Server 关系数据库中存储用户帐户信息。</span><span class="sxs-lookup"><span data-stu-id="2cf6c-150">When using forms authentication, user account information is typically stored in a relational database like Microsoft SQL Server.</span></span>

<span data-ttu-id="2cf6c-151">支持用户帐户的 web 应用程序 （可选） 可以分组到用户*角色*。</span><span class="sxs-lookup"><span data-stu-id="2cf6c-151">Web applications that support user accounts may optionally group users into *roles*.</span></span> <span data-ttu-id="2cf6c-152">角色是只应用于用户，并提供用于定义授权规则和页面级别功能的抽象的标签。</span><span class="sxs-lookup"><span data-stu-id="2cf6c-152">A role is simply a label that is applied to a user and provides an abstraction for defining authorization rules and page-level functionality.</span></span> <span data-ttu-id="2cf6c-153">例如，网站可能包括使用禁止任何人但管理员可以访问一组特定的网页的授权规则的管理员角色。</span><span class="sxs-lookup"><span data-stu-id="2cf6c-153">For example, a website might include an Administrator role with authorization rules that prohibit anyone but an Administrator to access a particular set of web pages.</span></span> <span data-ttu-id="2cf6c-154">此外，各种 （包括非管理员） 的所有用户都都可以访问的页可能会显示其他数据，或提供额外的功能时访问过的管理员角色中的用户。</span><span class="sxs-lookup"><span data-stu-id="2cf6c-154">Moreover, a variety of pages that are accessible to all users (including non-Administrators) might display additional data or offer extra functionality when visited by users in the Administrators role.</span></span> <span data-ttu-id="2cf6c-155">使用角色，我们可以在角色的角色，而不是用户通过用户定义这些授权规则。</span><span class="sxs-lookup"><span data-stu-id="2cf6c-155">Using roles, we can define these authorization rules on a role-by-role basis rather than user-by-user.</span></span>

## <a name="authenticating-users-in-an-aspnet-application"></a><span data-ttu-id="2cf6c-156">ASP.NET 应用程序中的用户进行身份验证</span><span class="sxs-lookup"><span data-stu-id="2cf6c-156">Authenticating Users in an ASP.NET Application</span></span>

<span data-ttu-id="2cf6c-157">当用户链接到其浏览器的地址窗口或单击输入 URL 时，该浏览器建立[超文本传输协议 (HTTP)](http://en.wikipedia.org/wiki/HTTP)请求到指定的内容 web 服务器，它是 ASP.NET 页上，一个映像，JavaScript文件或任何其他类型的内容。</span><span class="sxs-lookup"><span data-stu-id="2cf6c-157">When a user enters a URL into their browser's address window or clicks on a link, the browser makes a [Hypertext Transfer Protocol (HTTP)](http://en.wikipedia.org/wiki/HTTP) request to the web server for the specified content, be it an ASP.NET page, an image, a JavaScript file, or any other type of content.</span></span> <span data-ttu-id="2cf6c-158">Web 服务器担负返回请求的内容。</span><span class="sxs-lookup"><span data-stu-id="2cf6c-158">The web server is tasked with returning the requested content.</span></span> <span data-ttu-id="2cf6c-159">在此情况下，它必须确定大量请求，包括谁做了请求，并且是否标识有权检索请求的内容有关的操作。</span><span class="sxs-lookup"><span data-stu-id="2cf6c-159">In doing so, it must determine a number of things about the request, including who made the request and whether the identity is authorized to retrieve the requested content.</span></span>

<span data-ttu-id="2cf6c-160">默认情况下，浏览器发送 HTTP 请求中缺少任何种类的标识信息。</span><span class="sxs-lookup"><span data-stu-id="2cf6c-160">By default, browsers send HTTP requests that lack any sort of identification information.</span></span> <span data-ttu-id="2cf6c-161">但如果浏览器包括身份验证信息，然后 web 服务器启动身份验证工作流，它会尝试标识客户端发出请求。</span><span class="sxs-lookup"><span data-stu-id="2cf6c-161">But if the browser does include authentication information then the web server starts the authentication workflow, which attempts to identify the client making the request.</span></span> <span data-ttu-id="2cf6c-162">身份验证工作流的步骤取决于 web 应用程序正在使用的身份验证类型。</span><span class="sxs-lookup"><span data-stu-id="2cf6c-162">The steps of the authentication workflow depend on the type of authentication being used by the web application.</span></span> <span data-ttu-id="2cf6c-163">ASP.NET 支持的身份验证的三种类型： Windows、 Passport 和窗体。</span><span class="sxs-lookup"><span data-stu-id="2cf6c-163">ASP.NET supports three types of authentication: Windows, Passport, and forms.</span></span> <span data-ttu-id="2cf6c-164">本系列教程侧重于窗体身份验证，但让我们花一些时间进行比较和对比 Windows 身份验证用户存储和工作流。</span><span class="sxs-lookup"><span data-stu-id="2cf6c-164">This tutorial series focuses on forms authentication, but let's take a minute to compare and contrast Windows authentication user stores and workflow.</span></span>

### <a name="authentication-via-windows-authentication"></a><span data-ttu-id="2cf6c-165">通过 Windows 身份验证的身份验证</span><span class="sxs-lookup"><span data-stu-id="2cf6c-165">Authentication via Windows Authentication</span></span>

<span data-ttu-id="2cf6c-166">Windows 身份验证工作流使用以下身份验证方法之一：</span><span class="sxs-lookup"><span data-stu-id="2cf6c-166">The Windows authentication workflow uses one of the following authentication techniques:</span></span>

- <span data-ttu-id="2cf6c-167">基本身份验证</span><span class="sxs-lookup"><span data-stu-id="2cf6c-167">Basic authentication</span></span>
- <span data-ttu-id="2cf6c-168">摘要式身份验证</span><span class="sxs-lookup"><span data-stu-id="2cf6c-168">Digest authentication</span></span>
- <span data-ttu-id="2cf6c-169">Windows 集成身份验证</span><span class="sxs-lookup"><span data-stu-id="2cf6c-169">Windows Integrated Authentication</span></span>

<span data-ttu-id="2cf6c-170">所有这三种技术大致相同的方式工作： 当未经授权匿名请求到达时，web 服务器发送回 HTTP 响应，该值指示该授权才能继续。</span><span class="sxs-lookup"><span data-stu-id="2cf6c-170">All three techniques work in roughly the same way: when an unauthorized, anonymous request arrives, the web server sends back an HTTP response that indicates that authorization is required to continue.</span></span> <span data-ttu-id="2cf6c-171">浏览器然后显示一个模式对话框，提示用户输入其用户名和密码 （请参见图 1）。</span><span class="sxs-lookup"><span data-stu-id="2cf6c-171">The browser then displays a modal dialog box that prompts the user for their username and password (see Figure 1).</span></span> <span data-ttu-id="2cf6c-172">然后，此信息将发送回 web 服务器通过 HTTP 标头。</span><span class="sxs-lookup"><span data-stu-id="2cf6c-172">This information is then sent back to the web server via an HTTP header.</span></span>


![模式对话框提示用户提供其凭据](security-basics-and-asp-net-support-vb/_static/image1.png)

<span data-ttu-id="2cf6c-174">**图 1**： 模式对话框提示用户提供其凭据</span><span class="sxs-lookup"><span data-stu-id="2cf6c-174">**Figure 1**: A Modal Dialog Box Prompts the User for His Credentials</span></span>


<span data-ttu-id="2cf6c-175">提供的凭据进行验证对 web 服务器的 Windows 用户存储区。</span><span class="sxs-lookup"><span data-stu-id="2cf6c-175">The supplied credentials are validated against the web server's Windows User Store.</span></span> <span data-ttu-id="2cf6c-176">这意味着 web 应用程序中的每个经过身份验证的用户，必须在你的组织中的 Windows 帐户。</span><span class="sxs-lookup"><span data-stu-id="2cf6c-176">This means that each authenticated user in your web application must have a Windows account in your organization.</span></span> <span data-ttu-id="2cf6c-177">这是司空见惯内部网应用场景中。</span><span class="sxs-lookup"><span data-stu-id="2cf6c-177">This is commonplace in intranet scenarios.</span></span> <span data-ttu-id="2cf6c-178">事实上，在 intranet 设置中使用 Windows 集成身份验证，浏览器自动向 web 服务器提供的凭据用于登录到网络时，从而阻止图 1 所示的对话框。</span><span class="sxs-lookup"><span data-stu-id="2cf6c-178">In fact, when using Windows Integrated Authentication in an intranet setting, the browser automatically provides the web server with the credentials used to log on to the network, thereby suppressing the dialog box shown in Figure 1.</span></span> <span data-ttu-id="2cf6c-179">尽管 Windows 身份验证非常适合 intranet 应用程序，它通常可行 Internet 应用程序是由于您不希望创建注册您的站点上的每个用户的 Windows 帐户。</span><span class="sxs-lookup"><span data-stu-id="2cf6c-179">While Windows authentication is great for intranet applications, it is usually unfeasible for Internet applications since you do not want to create Windows accounts for each and every user who signs up at your site.</span></span>

### <a name="authentication-via-forms-authentication"></a><span data-ttu-id="2cf6c-180">通过窗体身份验证的身份验证</span><span class="sxs-lookup"><span data-stu-id="2cf6c-180">Authentication via Forms Authentication</span></span>

<span data-ttu-id="2cf6c-181">窗体身份验证，另一方面，非常适合于 Internet web 应用程序。</span><span class="sxs-lookup"><span data-stu-id="2cf6c-181">Forms authentication, on the other hand, is ideal for Internet web applications.</span></span> <span data-ttu-id="2cf6c-182">回想一下，窗体身份验证标识的用户通过提示他们输入其凭据通过 web 窗体。</span><span class="sxs-lookup"><span data-stu-id="2cf6c-182">Recall that forms authentication identifies the user by prompting them to enter their credentials through a web form.</span></span> <span data-ttu-id="2cf6c-183">因此，当用户尝试访问未经授权的资源，则会自动重定向到他们可以在其中输入其凭据的登录页。</span><span class="sxs-lookup"><span data-stu-id="2cf6c-183">Consequently, when a user attempts to access an unauthorized resource, they are automatically redirected to the login page where they can enter their credentials.</span></span> <span data-ttu-id="2cf6c-184">针对自定义用户存储-通常数据库然后验证的已提交的凭据。</span><span class="sxs-lookup"><span data-stu-id="2cf6c-184">The submitted credentials are then validated against a custom user store - usually a database.</span></span>

<span data-ttu-id="2cf6c-185">验证已提交的凭据后,*窗体身份验证票证*为用户创建。</span><span class="sxs-lookup"><span data-stu-id="2cf6c-185">After verifying the submitted credentials, a *forms authentication ticket* is created for the user.</span></span> <span data-ttu-id="2cf6c-186">此票证指示用户已经过身份验证，并包含标识信息，例如用户名。</span><span class="sxs-lookup"><span data-stu-id="2cf6c-186">This ticket indicates that the user has been authenticated and includes identifying information, such as the username.</span></span> <span data-ttu-id="2cf6c-187">窗体身份验证票证 （通常） 将存储为客户端计算机上的 cookie。</span><span class="sxs-lookup"><span data-stu-id="2cf6c-187">The forms authentication ticket is (typically) stored as a cookie on the client computer.</span></span> <span data-ttu-id="2cf6c-188">因此，后续访问网站包括在 HTTP 请求中，从而支持的 web 应用程序后用户登录标识用户的窗体身份验证票证。</span><span class="sxs-lookup"><span data-stu-id="2cf6c-188">Therefore, subsequent visits to the website include the forms authentication ticket in the HTTP request, thereby enabling the web application to identify the user once they have logged in.</span></span>

<span data-ttu-id="2cf6c-189">图 2 演示了高级的观察点从窗体身份验证工作流。</span><span class="sxs-lookup"><span data-stu-id="2cf6c-189">Figure 2 illustrates the forms authentication workflow from a high-level vantage point.</span></span> <span data-ttu-id="2cf6c-190">请注意如何在 ASP.NET 中的身份验证和授权部分充当两个单独的实体。</span><span class="sxs-lookup"><span data-stu-id="2cf6c-190">Notice how the authentication and authorization pieces in ASP.NET act as two separate entities.</span></span> <span data-ttu-id="2cf6c-191">窗体身份验证系统标识用户 （或报告它们是匿名）。</span><span class="sxs-lookup"><span data-stu-id="2cf6c-191">The forms authentication system identifies the user (or reports that they are anonymous).</span></span> <span data-ttu-id="2cf6c-192">授权系统是什么确定用户是否有权访问请求的资源。</span><span class="sxs-lookup"><span data-stu-id="2cf6c-192">The authorization system is what determines whether the user has access to the requested resource.</span></span> <span data-ttu-id="2cf6c-193">如果用户未获授权的 （因为它们是在图 2 中尝试以匿名方式访问 ProtectedPage.aspx 时），授权系统报告用户已被拒绝，这将导致窗体身份验证系统，自动将用户重定向到登录页。</span><span class="sxs-lookup"><span data-stu-id="2cf6c-193">If the user is unauthorized (as they are in Figure 2 when attempting to anonymously visit ProtectedPage.aspx), the authorization system reports that the user is denied, causing the forms authentication system to automatically redirect the user to the login page.</span></span>

<span data-ttu-id="2cf6c-194">用户已成功登录后，后续的 HTTP 请求包含窗体身份验证票证。</span><span class="sxs-lookup"><span data-stu-id="2cf6c-194">Once the user has successfully logged in, subsequent HTTP requests include the forms authentication ticket.</span></span> <span data-ttu-id="2cf6c-195">窗体身份验证系统只标识的用户-它是确定用户是否可以访问所请求的资源的授权系统。</span><span class="sxs-lookup"><span data-stu-id="2cf6c-195">The forms authentication system merely identifies the user - it is the authorization system that determines whether the user can access the requested resource.</span></span>


![窗体身份验证工作流](security-basics-and-asp-net-support-vb/_static/image2.png)

<span data-ttu-id="2cf6c-197">**图 2**： 窗体身份验证工作流</span><span class="sxs-lookup"><span data-stu-id="2cf6c-197">**Figure 2**: The Forms Authentication Workflow</span></span>


<span data-ttu-id="2cf6c-198">我们将深入探讨在随后两个教程中，窗体大得多的详细信息中的身份验证[概述窗体身份验证的](an-overview-of-forms-authentication-vb.md)和[窗体身份验证配置和高级主题](forms-authentication-configuration-and-advanced-topics-vb.md)。</span><span class="sxs-lookup"><span data-stu-id="2cf6c-198">We will dig into forms authentication in much greater detail in the next two tutorials,[An Overview of Forms Authentication](an-overview-of-forms-authentication-vb.md) and [Forms Authentication Configuration and Advanced Topics](forms-authentication-configuration-and-advanced-topics-vb.md).</span></span> <span data-ttu-id="2cf6c-199">ASP 的详细信息。NET 的身份验证选项，请参阅[ASP.NET 身份验证](https://msdn.microsoft.com/en-us/library/eeyk640h.aspx)。</span><span class="sxs-lookup"><span data-stu-id="2cf6c-199">For more on ASP.NET's authentication options, see [ASP.NET Authentication](https://msdn.microsoft.com/en-us/library/eeyk640h.aspx).</span></span>

## <a name="limiting-access-to-web-pages-directories-and-page-functionality"></a><span data-ttu-id="2cf6c-200">限制对 Web 页、 目录和页面功能的访问</span><span class="sxs-lookup"><span data-stu-id="2cf6c-200">Limiting Access to Web Pages, Directories, and Page Functionality</span></span>

<span data-ttu-id="2cf6c-201">ASP.NET 包括两种方法可以确定特定的用户是否有权访问的特定文件或目录：</span><span class="sxs-lookup"><span data-stu-id="2cf6c-201">ASP.NET includes two ways to determine whether a particular user has authority to access a specific file or directory:</span></span>

- <span data-ttu-id="2cf6c-202">**文件授权**-由于如驻留在 web 服务器的文件系统，对这些文件的访问的文件可通过访问控制列表 (Acl) 指定实现 ASP.NET 页和 web 服务。</span><span class="sxs-lookup"><span data-stu-id="2cf6c-202">**File authorization** - since ASP.NET pages and web services are implemented as files that reside on the web server's file system, access to these files can be specified through Access Control Lists (ACLs).</span></span> <span data-ttu-id="2cf6c-203">由于 Acl 是适用于 Windows 帐户的权限，文件授权最常用于使用 Windows 身份验证。</span><span class="sxs-lookup"><span data-stu-id="2cf6c-203">File authorization is most commonly used with Windows authentication because ACLs are permissions that apply to Windows accounts.</span></span> <span data-ttu-id="2cf6c-204">时使用窗体身份验证，所有的操作系统和文件系统级请求执行的相同的 Windows 帐户，而不考虑用户访问网站。</span><span class="sxs-lookup"><span data-stu-id="2cf6c-204">When using forms authentication, all operating system- and file system-level requests are executed by the same Windows account, regardless of the user visiting the site.</span></span>
- <span data-ttu-id="2cf6c-205">**URL 授权**-使用 URL 授权页开发人员所指定的 Web.config 中的授权规则。这些授权规则中指定哪些用户或角色允许访问或拒绝访问某些页或应用程序中的目录。</span><span class="sxs-lookup"><span data-stu-id="2cf6c-205">**URL authorization**- with URL authorization, the page developer specifies authorization rules in Web.config. These authorization rules specify what users or roles are allowed to access or are denied from accessing certain pages or directories in the application.</span></span>

<span data-ttu-id="2cf6c-206">文件授权和 URL 授权特定目录中定义用于访问特定的 ASP.NET 页或所有 ASP.NET 页面的授权规则。</span><span class="sxs-lookup"><span data-stu-id="2cf6c-206">File authorization and URL authorization define authorization rules for accessing a particular ASP.NET page or for all ASP.NET pages in a particular directory.</span></span> <span data-ttu-id="2cf6c-207">使用这些技术，我们可以指示 ASP.NET 拒绝对特定用户的特定页的请求或允许访问一组用户并授予其他人拒绝访问。</span><span class="sxs-lookup"><span data-stu-id="2cf6c-207">Using these techniques we can instruct ASP.NET to deny requests to a particular page for a particular user, or allow access to a set of users and deny access to everyone else.</span></span> <span data-ttu-id="2cf6c-208">有关方案，其中的所有用户可以访问的页面，但该页面的功能依赖于用户的新增功能？</span><span class="sxs-lookup"><span data-stu-id="2cf6c-208">What about scenarios where all of the users can access the page, but the page's functionality depends on the user?</span></span> <span data-ttu-id="2cf6c-209">例如，支持用户帐户的多个站点具有显示不同的内容或与匿名用户的经过身份验证用户的数据的页。</span><span class="sxs-lookup"><span data-stu-id="2cf6c-209">For example, many sites that support user accounts have pages that display different content or data for authenticated users versus anonymous users.</span></span> <span data-ttu-id="2cf6c-210">匿名用户可能会看到一个链接，用于登录到站点，而身份验证的用户改为将看到一条消息，如、 欢迎回来，*用户名*以及将其注销的链接。另一个示例： 查看拍卖站点处的项时你会看到不同的信息，具体取决于您是 bidder 还是 auctioning 项的一个。</span><span class="sxs-lookup"><span data-stu-id="2cf6c-210">An anonymous user might see a link to log in to the site, whereas an authenticated user would instead see a message like, Welcome back, *Username* along with a link to log out. Another example: when viewing an item at an auction site you see different information depending on whether you are a bidder or the one auctioning the item.</span></span>

<span data-ttu-id="2cf6c-211">以声明方式或以编程方式，可以实现此类页级调整。</span><span class="sxs-lookup"><span data-stu-id="2cf6c-211">Such page-level adjustments can be accomplished declaratively or programmatically.</span></span> <span data-ttu-id="2cf6c-212">若要显示不同的内容，为匿名身份验证的用户，只需拖比[LoginView 控件](https://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.loginview.aspx)拖动到页面并输入到其 AnonymousTemplate 和 LoggedInTemplate 模板以及合适的内容。</span><span class="sxs-lookup"><span data-stu-id="2cf6c-212">To show different content for anonymous than authenticated users, simply drag a [LoginView control](https://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.loginview.aspx) onto your page and enter the appropriate content into its AnonymousTemplate and LoggedInTemplate templates.</span></span> <span data-ttu-id="2cf6c-213">或者，你可以以编程方式确定是否当前的请求进行身份验证、 用户身份，以及哪些角色它们属于 （如果有）。</span><span class="sxs-lookup"><span data-stu-id="2cf6c-213">Alternatively, you can programmatically determine whether the current request is authenticated, who the user is, and what roles they belong to (if any).</span></span> <span data-ttu-id="2cf6c-214">此信息可用于然后显示或隐藏在网格或面板页上的列。</span><span class="sxs-lookup"><span data-stu-id="2cf6c-214">You can use this information to then show or hide columns in a grid or Panels on the page.</span></span>

<span data-ttu-id="2cf6c-215">这一系列包含三个专注于授权的教程。</span><span class="sxs-lookup"><span data-stu-id="2cf6c-215">This series includes three tutorials that focus on authorization.</span></span> <span data-ttu-id="2cf6c-216">***基于用户的授权***检查如何限制特定用户帐户; 某页或在目录中的页面的访问***角色基于授权***考察级别; 最后，提供在角色的授权规则***显示内容根据当前记录中的用户***教程探讨修改特定页的内容和根据用户访问的页面的功能。</span><span class="sxs-lookup"><span data-stu-id="2cf6c-216">***User-Based Authorization***examines how to limit access to a page or pages in a directory for specific user accounts; ***Role-Based Authorization*** looks at supplying authorization rules at the role level; lastly, the ***Displaying Content Based on the Currently Logged In User*** tutorial explores modifying a particular page's content and functionality based on the user visiting the page.</span></span> <span data-ttu-id="2cf6c-217">ASP 的详细信息。NET 的授权选项，请参阅[ASP.NET 授权](https://msdn.microsoft.com/en-us/library/wce3kxhd.aspx)。</span><span class="sxs-lookup"><span data-stu-id="2cf6c-217">For more on ASP.NET's authorization options, see [ASP.NET Authorization](https://msdn.microsoft.com/en-us/library/wce3kxhd.aspx).</span></span>

## <a name="user-accounts-and-roles"></a><span data-ttu-id="2cf6c-218">用户帐户和角色</span><span class="sxs-lookup"><span data-stu-id="2cf6c-218">User Accounts and Roles</span></span>

<span data-ttu-id="2cf6c-219">ASP。NET 的窗体身份验证提供了基础结构以用户可以登录到站点并记住跨网页访问其经过身份验证的状态。</span><span class="sxs-lookup"><span data-stu-id="2cf6c-219">ASP.NET's forms authentication provides an infrastructure for users to log in to a site and have their authenticated state remembered across page visits.</span></span> <span data-ttu-id="2cf6c-220">和 URL 授权提供一个框架，用于限制对特定文件或 ASP.NET 应用程序中的文件夹的访问。</span><span class="sxs-lookup"><span data-stu-id="2cf6c-220">And URL authorization offers a framework for limiting access to specific files or folders in an ASP.NET application.</span></span> <span data-ttu-id="2cf6c-221">两者，但是，提供了存储用户帐户信息或管理角色的一种方法。</span><span class="sxs-lookup"><span data-stu-id="2cf6c-221">Neither feature, however, supplies a means for storing user account information or managing roles.</span></span>

<span data-ttu-id="2cf6c-222">在 ASP.NET 2.0 中之前, 开发人员负责创建其自己的用户和角色存储。</span><span class="sxs-lookup"><span data-stu-id="2cf6c-222">Prior to ASP.NET 2.0, developers were responsible for creating their own user and role stores.</span></span> <span data-ttu-id="2cf6c-223">它们也是在设计用户界面和写入如登录页和页后，可以创建新的帐户，以及其他与帐户相关的页的基本用户的代码的挂钩。</span><span class="sxs-lookup"><span data-stu-id="2cf6c-223">They were also on the hook for designing the user interfaces and writing the code for essential user account-related pages like the login page and the page to create a new account, among others.</span></span> <span data-ttu-id="2cf6c-224">而无需在 ASP.NET 中，实现的用户帐户必须在其自己的设计决策到达问题，例如，每个开发人员的任何内置用户帐户框架如何存储密码或其他敏感信息？和哪些准则我应施加有关密码长度和强度？</span><span class="sxs-lookup"><span data-stu-id="2cf6c-224">Without any built-in user account framework in ASP.NET, each developer implementing user accounts had to arrive at his own design decisions on questions like, How do I store passwords or other sensitive information? and What guidelines should I impose regarding password length and strength?</span></span>

<span data-ttu-id="2cf6c-225">现在，在 ASP.NET 应用程序中实现用户帐户是要简单得多，谢谢到*成员资格 framework*和内置登录 Web 控件。</span><span class="sxs-lookup"><span data-stu-id="2cf6c-225">Today, implementing user accounts in an ASP.NET application is much simpler thanks to the *Membership framework* and the built-in Login Web controls.</span></span> <span data-ttu-id="2cf6c-226">成员资格框架是中的类少量[System.Web.Security 命名空间](https://msdn.microsoft.com/en-us/library/system.web.security.aspx)执行基本的用户帐户相关的任务提供功能。</span><span class="sxs-lookup"><span data-stu-id="2cf6c-226">The Membership framework is a handful of classes in the [System.Web.Security namespace](https://msdn.microsoft.com/en-us/library/system.web.security.aspx) that provide functionality for performing essential user account-related tasks.</span></span> <span data-ttu-id="2cf6c-227">成员资格 framework 中的键类是[成员资格类](https://msdn.microsoft.com/en-us/library/system.web.security.membership.aspx)，它具有等方法：</span><span class="sxs-lookup"><span data-stu-id="2cf6c-227">The key class in the Membership framework is the [Membership class](https://msdn.microsoft.com/en-us/library/system.web.security.membership.aspx), which has methods like:</span></span>

- <span data-ttu-id="2cf6c-228">CreateUser</span><span class="sxs-lookup"><span data-stu-id="2cf6c-228">CreateUser</span></span>
- <span data-ttu-id="2cf6c-229">DeleteUser</span><span class="sxs-lookup"><span data-stu-id="2cf6c-229">DeleteUser</span></span>
- <span data-ttu-id="2cf6c-230">GetAllUsers</span><span class="sxs-lookup"><span data-stu-id="2cf6c-230">GetAllUsers</span></span>
- <span data-ttu-id="2cf6c-231">GetUser</span><span class="sxs-lookup"><span data-stu-id="2cf6c-231">GetUser</span></span>
- <span data-ttu-id="2cf6c-232">UpdateUser</span><span class="sxs-lookup"><span data-stu-id="2cf6c-232">UpdateUser</span></span>
- <span data-ttu-id="2cf6c-233">验证用户</span><span class="sxs-lookup"><span data-stu-id="2cf6c-233">ValidateUser</span></span>

<span data-ttu-id="2cf6c-234">成员资格框架使用[提供程序模型](http://aspnet.4guysfromrolla.com/articles/101905-1.aspx)，这能完全分隔从其实现的成员资格框架的 API。</span><span class="sxs-lookup"><span data-stu-id="2cf6c-234">The Membership framework uses the [provider model](http://aspnet.4guysfromrolla.com/articles/101905-1.aspx), which cleanly separates the Membership framework's API from its implementation.</span></span> <span data-ttu-id="2cf6c-235">这使开发人员可以使用通用 API，但使它们以使用符合其应用程序的自定义需要实现。</span><span class="sxs-lookup"><span data-stu-id="2cf6c-235">This enables developers to use a common API, but empowers them to use an implementation that meets their application's custom needs.</span></span> <span data-ttu-id="2cf6c-236">简单地说，成员资格类定义框架 （方法、 属性和事件） 的基本功能，但不会实际提供任何实现详细信息。</span><span class="sxs-lookup"><span data-stu-id="2cf6c-236">In short, the Membership class defines the essential functionality of the framework (the methods, properties, and events), but does not actually supply any implementation details.</span></span> <span data-ttu-id="2cf6c-237">相反，成员身份类的方法调用配置的提供程序，这是什么执行的实际工作。</span><span class="sxs-lookup"><span data-stu-id="2cf6c-237">Instead, the methods of the Membership class invoke the configured provider, which is what performs the actual work.</span></span> <span data-ttu-id="2cf6c-238">例如，当调用的成员资格类 CreateUser 方法时，成员资格类不知道用户存储的详细信息。</span><span class="sxs-lookup"><span data-stu-id="2cf6c-238">For example, when the Membership class's CreateUser method is invoked, the Membership class doesn't know the details of the user store.</span></span> <span data-ttu-id="2cf6c-239">它不知道用户数据库或 XML 文件或某些其他存储受到维护。</span><span class="sxs-lookup"><span data-stu-id="2cf6c-239">It doesn't know if users are being maintained in a database or in an XML file or in some other store.</span></span> <span data-ttu-id="2cf6c-240">成员资格类将检查 web 应用程序的配置，以确定哪些提供商联系，以委托的调用，并且该提供程序类负责实际上在相应的用户存储区中创建新的用户帐户。</span><span class="sxs-lookup"><span data-stu-id="2cf6c-240">The Membership class examines the web application's configuration to determine what provider to delegate the call to, and that provider class is responsible for actually creating the new user account in the appropriate user store.</span></span> <span data-ttu-id="2cf6c-241">这种交互图 3 所示。</span><span class="sxs-lookup"><span data-stu-id="2cf6c-241">This interaction is illustrated in Figure 3.</span></span>

<span data-ttu-id="2cf6c-242">Microsoft.NET Framework 中附带了两个成员资格提供程序类：</span><span class="sxs-lookup"><span data-stu-id="2cf6c-242">Microsoft ships two Membership provider classes in the .NET Framework:</span></span>

- <span data-ttu-id="2cf6c-243">[ActiveDirectoryMembershipProvider](https://msdn.microsoft.com/en-us/library/system.web.security.activedirectorymembershipprovider.aspx) -实现在 Active Directory 和 Active Directory 应用程序模式 (ADAM) 服务器中的成员资格 API。</span><span class="sxs-lookup"><span data-stu-id="2cf6c-243">[ActiveDirectoryMembershipProvider](https://msdn.microsoft.com/en-us/library/system.web.security.activedirectorymembershipprovider.aspx) - implements the Membership API in Active Directory and Active Directory Application Mode (ADAM) servers.</span></span>
- <span data-ttu-id="2cf6c-244">[SqlMembershipProvider](https://msdn.microsoft.com/en-us/library/system.web.security.sqlmembershipprovider.aspx) -实现 SQL Server 数据库中的成员资格 API。</span><span class="sxs-lookup"><span data-stu-id="2cf6c-244">[SqlMembershipProvider](https://msdn.microsoft.com/en-us/library/system.web.security.sqlmembershipprovider.aspx) - implements the Membership API in a SQL Server database.</span></span>

<span data-ttu-id="2cf6c-245">本系列教程着重 SqlMembershipProvider 上以独占方式。</span><span class="sxs-lookup"><span data-stu-id="2cf6c-245">This tutorial series focuses exclusively on the SqlMembershipProvider.</span></span>


<span data-ttu-id="2cf6c-246">[![提供程序模型使不同的实现要无缝地插入到的 Framework](security-basics-and-asp-net-support-vb/_static/image4.png)](security-basics-and-asp-net-support-vb/_static/image3.png)</span><span class="sxs-lookup"><span data-stu-id="2cf6c-246">[![The Provider Model Enables Different Implementations to be Seamlessly Plugged Into the Framework](security-basics-and-asp-net-support-vb/_static/image4.png)](security-basics-and-asp-net-support-vb/_static/image3.png)</span></span>

<span data-ttu-id="2cf6c-247">**图 03**: 提供程序模型使不同的实现要无缝地插入到的 Framework ([单击以查看实际尺寸的图像](security-basics-and-asp-net-support-vb/_static/image5.png))</span><span class="sxs-lookup"><span data-stu-id="2cf6c-247">**Figure 03**: The Provider Model Enables Different Implementations to be Seamlessly Plugged Into the Framework ([Click to view full-size image](security-basics-and-asp-net-support-vb/_static/image5.png))</span></span>


<span data-ttu-id="2cf6c-248">提供程序模型的好处是可以由 Microsoft、 第三方供应商或各个开发人员开发和无缝地插入到成员资格 framework 备用实现。</span><span class="sxs-lookup"><span data-stu-id="2cf6c-248">The benefit of the provider model is that alternative implementations can be developed by Microsoft, third-party vendors, or individual developers and seamlessly plugged into the Membership framework.</span></span> <span data-ttu-id="2cf6c-249">例如，Microsoft 发布了[的成员资格提供程序的 Microsoft Access 数据库](https://download.microsoft.com/download/5/5/b/55bc291f-4316-4fd7-9269-dbf9edbaada8/sampleaccessproviders.vsi)。</span><span class="sxs-lookup"><span data-stu-id="2cf6c-249">For example, Microsoft has released [a Membership provider for Microsoft Access databases](https://download.microsoft.com/download/5/5/b/55bc291f-4316-4fd7-9269-dbf9edbaada8/sampleaccessproviders.vsi).</span></span> <span data-ttu-id="2cf6c-250">有关成员资格提供程序的详细信息，请参阅[提供程序工具包](https://msdn.microsoft.com/en-us/asp.net/aa336558.aspx)，其中包括成员资格提供程序、 示例自定义提供程序、 100 多个页上提供程序模型中，文档的演练和完整的内置成员资格提供程序 （即 ActiveDirectoryMembershipProvider 和 SqlMembershipProvider） 的源代码。</span><span class="sxs-lookup"><span data-stu-id="2cf6c-250">For more information on the Membership providers, refer to the [Provider Toolkit](https://msdn.microsoft.com/en-us/asp.net/aa336558.aspx), which includes a walkthrough of the Membership providers, sample custom providers, over 100 pages of documentation on the provider model, and the complete source code for the built-in Membership providers (namely, ActiveDirectoryMembershipProvider and SqlMembershipProvider).</span></span>

<span data-ttu-id="2cf6c-251">ASP.NET 2.0 还引入了角色 framework。</span><span class="sxs-lookup"><span data-stu-id="2cf6c-251">ASP.NET 2.0 also introduced the Roles framework.</span></span> <span data-ttu-id="2cf6c-252">成员资格 framework 中，如角色 framework 是在提供程序模型之上构建的。</span><span class="sxs-lookup"><span data-stu-id="2cf6c-252">Like the Membership framework, the Roles framework is built atop the provider model.</span></span> <span data-ttu-id="2cf6c-253">通过公开其 API[角色类](https://msdn.microsoft.com/en-us/library/system.web.security.roles.aspx)和.NET Framework 附带三个提供程序类：</span><span class="sxs-lookup"><span data-stu-id="2cf6c-253">Its API is exposed via the [Roles class](https://msdn.microsoft.com/en-us/library/system.web.security.roles.aspx) and the .NET Framework ships with three provider classes:</span></span>

- <span data-ttu-id="2cf6c-254">[AuthorizationStoreRoleProvider](https://msdn.microsoft.com/en-us/library/system.web.security.authorizationstoreroleprovider.aspx) -管理角色，如 Active Directory 或 ADAM 授权管理器策略存储区中的信息。</span><span class="sxs-lookup"><span data-stu-id="2cf6c-254">[AuthorizationStoreRoleProvider](https://msdn.microsoft.com/en-us/library/system.web.security.authorizationstoreroleprovider.aspx) - manages role information in an authorization-manager policy store, such as Active Directory or ADAM.</span></span>
- <span data-ttu-id="2cf6c-255">[SqlRoleProvider](https://msdn.microsoft.com/en-us/library/system.web.security.sqlroleprovider.aspx) -实现 SQL Server 数据库中的角色。</span><span class="sxs-lookup"><span data-stu-id="2cf6c-255">[SqlRoleProvider](https://msdn.microsoft.com/en-us/library/system.web.security.sqlroleprovider.aspx) - implements roles in a SQL Server database.</span></span>
- <span data-ttu-id="2cf6c-256">[WindowsTokenRoleProvider](https://msdn.microsoft.com/en-us/library/system.web.security.windowstokenroleprovider.aspx) -将基于访问者的 Windows 组的角色信息相关联。</span><span class="sxs-lookup"><span data-stu-id="2cf6c-256">[WindowsTokenRoleProvider](https://msdn.microsoft.com/en-us/library/system.web.security.windowstokenroleprovider.aspx) - associates role information based on the visitor's Windows group.</span></span> <span data-ttu-id="2cf6c-257">此方法通常用于 Windows 身份验证。</span><span class="sxs-lookup"><span data-stu-id="2cf6c-257">This method is typically used with Windows authentication.</span></span>

<span data-ttu-id="2cf6c-258">本系列教程重点介绍专门 SqlRoleProvider。</span><span class="sxs-lookup"><span data-stu-id="2cf6c-258">This tutorial series focuses exclusively on the SqlRoleProvider.</span></span>

<span data-ttu-id="2cf6c-259">由于提供程序模型包括单个进面向 API （成员资格和角色类），可以生成围绕该 API 的功能，而无需担心实现详细信息-这些由选定的页面的提供程序开发人员。</span><span class="sxs-lookup"><span data-stu-id="2cf6c-259">Since the provider model includes a single forward-facing API (the Membership and Roles classes), it is possible to build functionality around that API without having to worry about the implementation details - those are handled by the providers selected by the page developer.</span></span> <span data-ttu-id="2cf6c-260">此统一的 API 允许 Microsoft 和第三方供应商，以生成与成员资格和角色框架该接口的 Web 控件。</span><span class="sxs-lookup"><span data-stu-id="2cf6c-260">This unified API allows for Microsoft and third-party vendors to build Web controls that interface with the Membership and Roles frameworks.</span></span> <span data-ttu-id="2cf6c-261">ASP.NET 附带的许多[登录 Web 控制](https://msdn.microsoft.com/en-us/library/ms178329.aspx)用于实现常见的用户帐户的用户界面。</span><span class="sxs-lookup"><span data-stu-id="2cf6c-261">ASP.NET ships with a number of [Login Web controls](https://msdn.microsoft.com/en-us/library/ms178329.aspx) for implementing common user account user interfaces.</span></span> <span data-ttu-id="2cf6c-262">例如，[登录控件](https://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.login.aspx)提示用户输入其凭据验证，然后将其在记录通过窗体身份验证。</span><span class="sxs-lookup"><span data-stu-id="2cf6c-262">For example, the [Login control](https://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.login.aspx) prompts a user for their credentials, validates them, and then logs them in via forms authentication.</span></span> <span data-ttu-id="2cf6c-263">[LoginView 控件](https://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.loginview.aspx)提供用于显示与经过身份验证的用户的匿名用户的不同标记或基于用户的角色的不同标记的模板。</span><span class="sxs-lookup"><span data-stu-id="2cf6c-263">The [LoginView control](https://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.loginview.aspx) offers templates for displaying different markup to anonymous users versus authenticated users, or different markup based on the user's role.</span></span> <span data-ttu-id="2cf6c-264">与[通过](https://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.createuserwizard.aspx)提供分步的用户界面，用于创建新的用户帐户。</span><span class="sxs-lookup"><span data-stu-id="2cf6c-264">And the [CreateUserWizard control](https://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.createuserwizard.aspx) provides a step-by-step user interface for creating a new user account.</span></span>

<span data-ttu-id="2cf6c-265">实际上各种登录控件与成员资格和角色框架进行交互。</span><span class="sxs-lookup"><span data-stu-id="2cf6c-265">Underneath the covers the various Login controls interact with the Membership and Roles frameworks.</span></span> <span data-ttu-id="2cf6c-266">大多数登录控件可以实现无需编写一行代码。</span><span class="sxs-lookup"><span data-stu-id="2cf6c-266">Most Login controls can be implemented without having to write a single line of code.</span></span> <span data-ttu-id="2cf6c-267">我们将在将来的教程，包括用于扩展和自定义其功能的技术中查看更详细介绍这些控件。</span><span class="sxs-lookup"><span data-stu-id="2cf6c-267">We will examine these controls in greater detail in future tutorials, including techniques for extending and customizing their functionality.</span></span>

## <a name="summary"></a><span data-ttu-id="2cf6c-268">摘要</span><span class="sxs-lookup"><span data-stu-id="2cf6c-268">Summary</span></span>

<span data-ttu-id="2cf6c-269">所有 web 应用程序支持用户帐户还都需要类似的功能，例如： 用户登录并记住网页访问; 跨状态中有其日志的能力某一网页寻求新访问者创建帐户;并向页开发人员能够指定哪些资源、 数据和功能可供哪些用户或角色。</span><span class="sxs-lookup"><span data-stu-id="2cf6c-269">All web applications that support user accounts require similar features, such as: the ability for users to log in and have their log in status remembered across page visits; a web page for new visitors to create an account; and the ability to the page developer to specify what resource, data, and functionality are available to what users or roles.</span></span> <span data-ttu-id="2cf6c-270">进行身份验证和授权用户和管理用户帐户和角色的任务是非常简单，可以用感谢窗体身份验证、 URL 授权和的成员资格和角色的框架的 ASP.NET 应用程序实现。</span><span class="sxs-lookup"><span data-stu-id="2cf6c-270">The tasks of authenticating and authorizing users and of managing user accounts and roles is remarkably easy to accomplish in ASP.NET applications thanks to forms authentication, URL authorization, and the Membership and Roles frameworks.</span></span>

<span data-ttu-id="2cf6c-271">在过程中的下一步的几个教程，我们将检查这些方面通过从零开始的工作 web 应用以分步的方式构建。</span><span class="sxs-lookup"><span data-stu-id="2cf6c-271">Over the course of the next several tutorials we will examine these aspects by building a working web application from the ground up in a step-by-step fashion.</span></span> <span data-ttu-id="2cf6c-272">在下面的两个教程中，我们将探究详细信息中的窗体身份验证。</span><span class="sxs-lookup"><span data-stu-id="2cf6c-272">In the next two tutorial we will explore forms authentication in detail.</span></span> <span data-ttu-id="2cf6c-273">我们将看到在操作的窗体身份验证工作流剖析窗体身份验证票证、 讨论安全问题，并请参阅如何配置窗体身份验证系统-所有构建 web 应用程序时允许访问者登录和注销。</span><span class="sxs-lookup"><span data-stu-id="2cf6c-273">We will see the forms authentication workflow in action, dissect the forms authentication ticket, discuss security concerns, and see how to configure the forms authentication system - all while building a web application that allows visitors to log in and log out.</span></span>

<span data-ttu-id="2cf6c-274">尽情享受编程 ！</span><span class="sxs-lookup"><span data-stu-id="2cf6c-274">Happy Programming!</span></span>

### <a name="further-reading"></a><span data-ttu-id="2cf6c-275">其他阅读材料</span><span class="sxs-lookup"><span data-stu-id="2cf6c-275">Further Reading</span></span>

<span data-ttu-id="2cf6c-276">在本教程中讨论的主题的详细信息，请参阅以下资源：</span><span class="sxs-lookup"><span data-stu-id="2cf6c-276">For more information on the topics discussed in this tutorial, refer to the following resources:</span></span>

- [<span data-ttu-id="2cf6c-277">ASP.NET 2.0 成员资格、 角色、 窗体身份验证和安全资源</span><span class="sxs-lookup"><span data-stu-id="2cf6c-277">ASP.NET 2.0 Membership, Roles, Forms Authentication, and Security Resources</span></span>](https://weblogs.asp.net/scottgu/ASP.NET-2.0-Membership_2C00_-Roles_2C00_-Forms-Authentication_2C00_-and-Security-Resources-)
- [<span data-ttu-id="2cf6c-278">ASP.NET 2.0 的安全指导原则</span><span class="sxs-lookup"><span data-stu-id="2cf6c-278">ASP.NET 2.0 Security Guidelines</span></span>](https://msdn.microsoft.com/en-us/library/ms998258.aspx)
- [<span data-ttu-id="2cf6c-279">ASP.NET 身份验证</span><span class="sxs-lookup"><span data-stu-id="2cf6c-279">ASP.NET Authentication</span></span>](https://msdn.microsoft.com/en-us/library/eeyk640h.aspx)
- [<span data-ttu-id="2cf6c-280">ASP.NET 授权</span><span class="sxs-lookup"><span data-stu-id="2cf6c-280">ASP.NET Authorization</span></span>](https://msdn.microsoft.com/en-us/library/wce3kxhd.aspx)
- [<span data-ttu-id="2cf6c-281">ASP.NET 登录控件概述</span><span class="sxs-lookup"><span data-stu-id="2cf6c-281">ASP.NET Login Controls Overview</span></span>](https://msdn.microsoft.com/en-us/library/ms178329.aspx)
- [<span data-ttu-id="2cf6c-282">检查 ASP.NET 2.0 的成员资格、 角色和配置文件</span><span class="sxs-lookup"><span data-stu-id="2cf6c-282">Examining ASP.NET 2.0's Membership, Roles, and Profile</span></span>](http://aspnet.4guysfromrolla.com/articles/120705-1.aspx)
- [<span data-ttu-id="2cf6c-283">I： 如何安全我使用成员资格和角色的站点？</span><span class="sxs-lookup"><span data-stu-id="2cf6c-283">How Do I: Secure My Site Using Membership and Roles?</span></span>](https://asp.net/learn/videos/video-45.aspx) <span data-ttu-id="2cf6c-284">（视频）</span><span class="sxs-lookup"><span data-stu-id="2cf6c-284">(Video)</span></span>
- [<span data-ttu-id="2cf6c-285">成员资格简介</span><span class="sxs-lookup"><span data-stu-id="2cf6c-285">Introduction to Membership</span></span>](https://msdn.microsoft.com/en-us/library/yh26yfzy.aspx)
- [<span data-ttu-id="2cf6c-286">MSDN 安全开发人员中心</span><span class="sxs-lookup"><span data-stu-id="2cf6c-286">MSDN Security Developer Center</span></span>](https://msdn.microsoft.com/en-us/security/default.aspx)
- <span data-ttu-id="2cf6c-287">[专业 ASP.NET 2.0 安全、 成员资格和角色管理](http://www.wrox.com/WileyCDA/WroxTitle/productCd-0764596985.html)(ISBN: 978-0-7645-9698-8)</span><span class="sxs-lookup"><span data-stu-id="2cf6c-287">[Professional ASP.NET 2.0 Security, Membership, and Role Management](http://www.wrox.com/WileyCDA/WroxTitle/productCd-0764596985.html) (ISBN: 978-0-7645-9698-8)</span></span>
- [<span data-ttu-id="2cf6c-288">提供程序工具包</span><span class="sxs-lookup"><span data-stu-id="2cf6c-288">Provider Toolkit</span></span>](https://msdn.microsoft.com/en-us/asp.net/aa336558.aspx)

## <a name="about-the-author"></a><span data-ttu-id="2cf6c-289">关于作者</span><span class="sxs-lookup"><span data-stu-id="2cf6c-289">About the Author</span></span>

<span data-ttu-id="2cf6c-290">[Scott Mitchell](http://www.4guysfromrolla.com/ScottMitchell.shtml)，作者的七个 ASP/ASP.NET 书籍和的创始人[4GuysFromRolla.com](http://www.4guysfromrolla.com)，自 1998 年使用与 Microsoft Web 技术。</span><span class="sxs-lookup"><span data-stu-id="2cf6c-290">[Scott Mitchell](http://www.4guysfromrolla.com/ScottMitchell.shtml), author of seven ASP/ASP.NET books and founder of [4GuysFromRolla.com](http://www.4guysfromrolla.com), has been working with Microsoft Web technologies since 1998.</span></span> <span data-ttu-id="2cf6c-291">Scott 的作用是作为独立的顾问、 培训师和编写器。</span><span class="sxs-lookup"><span data-stu-id="2cf6c-291">Scott works as an independent consultant, trainer, and writer.</span></span> <span data-ttu-id="2cf6c-292">最新书籍是[ *Sam 教授自己 ASP.NET 2.0 24 小时内*](https://www.amazon.com/exec/obidos/ASIN/0672327384/4guysfromrollaco)。</span><span class="sxs-lookup"><span data-stu-id="2cf6c-292">His latest book is [*Sams Teach Yourself ASP.NET 2.0 in 24 Hours*](https://www.amazon.com/exec/obidos/ASIN/0672327384/4guysfromrollaco).</span></span> <span data-ttu-id="2cf6c-293">他可以达到在[ mitchell@4GuysFromRolla.com。](mailto:mitchell@4GuysFromRolla.com)或通过他的博客，其中可以找到在[http://ScottOnWriting.NET](http://ScottOnWriting.NET)。</span><span class="sxs-lookup"><span data-stu-id="2cf6c-293">He can be reached at [mitchell@4GuysFromRolla.com.](mailto:mitchell@4GuysFromRolla.com) or via his blog, which can be found at [http://ScottOnWriting.NET](http://ScottOnWriting.NET).</span></span>

## <a name="special-thanks-to"></a><span data-ttu-id="2cf6c-294">特别感谢</span><span class="sxs-lookup"><span data-stu-id="2cf6c-294">Special Thanks To</span></span>

<span data-ttu-id="2cf6c-295">本教程系列已由许多有用的审阅者评审。</span><span class="sxs-lookup"><span data-stu-id="2cf6c-295">This tutorial series was reviewed by many helpful reviewers.</span></span> <span data-ttu-id="2cf6c-296">本教程中的前导审阅者已系列已由许多有用的审阅者评审本教程。</span><span class="sxs-lookup"><span data-stu-id="2cf6c-296">Lead reviewer for this tutorial was This tutorial series was reviewed by many helpful reviewers.</span></span> <span data-ttu-id="2cf6c-297">本教程中的前导审阅者包括 Alicja Maziarz、 John Suru 和 Teresa 墨。</span><span class="sxs-lookup"><span data-stu-id="2cf6c-297">Lead reviewers for this tutorial include Alicja Maziarz, John Suru, and Teresa Murphy.</span></span> <span data-ttu-id="2cf6c-298">对感兴趣查看我即将到来的 MSDN 文章？</span><span class="sxs-lookup"><span data-stu-id="2cf6c-298">Interested in reviewing my upcoming MSDN articles?</span></span> <span data-ttu-id="2cf6c-299">如果是这样，删除我一行[ mitchell@4GuysFromRolla.com。](mailto:mitchell@4GuysFromRolla.com)</span><span class="sxs-lookup"><span data-stu-id="2cf6c-299">If so, drop me a line at [mitchell@4GuysFromRolla.com.](mailto:mitchell@4GuysFromRolla.com)</span></span>

>[!div class="step-by-step"]
<span data-ttu-id="2cf6c-300">[上一页](forms-authentication-configuration-and-advanced-topics-cs.md)
[下一页](an-overview-of-forms-authentication-vb.md)</span><span class="sxs-lookup"><span data-stu-id="2cf6c-300">[Previous](forms-authentication-configuration-and-advanced-topics-cs.md)
[Next](an-overview-of-forms-authentication-vb.md)</span></span>
